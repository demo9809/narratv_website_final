"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[865],{7347:function(e,t,n){let i;n.r(t),n.d(t,{BackLink:function(){return eO},ChildLink:function(){return eB},ConfirmDeleteDialogContainer:function(){return e5},DocumentInspectorHeader:function(){return nD},DocumentPane:function(){return rO},DocumentPaneProviderWrapper:function(){return rN},LOADING_PANE:function(){return iU},LoadingPane:function(){return ny},Pane:function(){return te},PaneContainer:function(){return oE},PaneContent:function(){return ti},PaneHeader:function(){return tj},PaneHeaderActions:function(){return tG},PaneItem:function(){return tX},PaneLayout:function(){return tI},ParameterizedLink:function(){return eV},ReferenceChildLink:function(){return eG},_DEBUG:function(){return iN},pane:function(){return sj},pane$1:function(){return s_},setActivePanes:function(){return oP},structureTool:function(){return sv},useDocumentPane:function(){return nv},useDocumentTitle:function(){return nP},usePane:function(){return tn},usePaneLayout:function(){return eU},usePaneOptions:function(){return rV},usePaneRouter:function(){return eF},useStructureTool:function(){return nC}});var l=n(29525),r=n(9115),o=n(57437),s=n(44184),a=n(90535),d=n(74487),c=n(2265),u=n(18923),p=n(4710),m=n(74819),h=n(61485),f=n(60036),x=n(92840),g=n(28140),b=n(71373),y=n(94038),v=n(49524),j=n(48634),_=n(46075),w=n(51187),k=n(85078),C=n(61514),S=n(66692),z=n(87935),E=n(82863),I=n(28887),$=n(44465),P=n(7449),A=n(36381),T=n(36940),R=n(17482),M=n(85393),D=n(30783),L=n(71947),N=n(28419),O=n(68851),U=n(36550),B=n(38214),V=n(71064),G=n(27817),F=n(99578),K=n(46593),W=n(11368),X=n(30867),H=n(61160),q=n(3868),Y=n(31072),Z=n(35554),J=n(93810),Q=n(8727),ee=n(73600),et=n(89155),en=n(49930),ei=n(95937),el=n(36551),er=n(45609),eo=n(7688),es=n(60033),ea=n(89634),ed=n(70421),ec=n(97114),eu=n(51936),ep=n(85258),em=n(92728),eh=n(79664),ef=n(10082),ex=n(71878),eg=n(67603),eb=n(52141),ey=n(20920),ev=n(21652),ej=n(15655),e_=n(47230),ew=n(94686),ek=n(87242),eC=n(82734),eS=n(46668),ez=n(97863),eE=n(36029),eI=n(71594),e$=n(24525);function eP(e){let t,n,i,r;let a=(0,s.c)(21),{document:d}=e,c=(0,m.I_y)();a[0]!==d._type||a[1]!==c?(t=c.get(d._type),a[0]=d._type,a[1]=c,a[2]=t):t=a[2];let u=t,{t:p}=(0,m.$G7)(l.UA);a[3]!==d||a[4]!==u?(n={schemaType:u,value:d},a[3]=d,a[4]=u,a[5]=n):n=a[5];let{error:h,value:f}=(0,m._2T)(n);if(!u){let e,t;return a[6]!==d._type||a[7]!==p?(e=p("doc-title.unknown-schema-type.text",{schemaType:d._type}),a[6]=d._type,a[7]=p,a[8]=e):e=a[8],a[9]!==e?(t=(0,o.jsx)("code",{children:e}),a[9]=e,a[10]=t):t=a[10],t}if(h){let e,t;return a[11]!==h.message||a[12]!==p?(e=p("doc-title.error.text",{errorMessage:h.message}),a[11]=h.message,a[12]=p,a[13]=e):e=a[13],a[14]!==e?(t=(0,o.jsx)(o.Fragment,{children:e}),a[14]=e,a[15]=t):t=a[15],t}return a[16]!==p||a[17]!==f?.title?(i=f?.title||(0,o.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:p("doc-title.fallback.text")}),a[16]=p,a[17]=f?.title,a[18]=i):i=a[18],a[19]!==i?(r=(0,o.jsx)(o.Fragment,{children:i}),a[19]=i,a[20]=r):r=a[20],r}let eA=(0,x.zo)(a.xu)`
  margin-left: auto;
`,eT=x.zo.details`
  flex: none;

  &[open] ${eA} {
    transform: rotate(180deg);
  }
`,eR=x.zo.summary`
  list-style: none;

  &::-webkit-details-marker {
    display: none;
  }
`,eM=x.zo.table`
  width: 100%;
  text-align: left;
  padding: 0 ${({theme:e})=>(0,a.hO)(e.sanity.space[2])};
  border-collapse: collapse;

  th {
    padding: ${({theme:e})=>(0,a.hO)(e.sanity.space[1])};
  }

  td {
    padding: 0 ${({theme:e})=>(0,a.hO)(e.sanity.space[1])};
  }

  tr > *:last-child {
    text-align: right;
  }
`,eD=(0,x.zo)(a.kC)`
  min-height: 33px;
`,eL=e=>{let t,n,i,d,c,u;let h=(0,s.c)(13),{t:f}=(0,m.$G7)(l.UA),x=e.totalCount-e.references.length;return x?(h[0]!==x||h[1]!==f?(t=f("confirm-delete-dialog.other-reference-count.title",{count:x}),h[0]=x,h[1]=f,h[2]=t):t=h[2],h[3]!==t?(n=(0,o.jsx)(a.xv,{size:1,muted:!0,children:t}),h[3]=t,h[4]=n):n=h[4],h[5]!==f?(i=f("confirm-delete-dialog.other-reference-count.tooltip"),h[5]=f,h[6]=i):i=h[6],h[7]===Symbol.for("react.memo_cache_sentinel")?(d=(0,o.jsx)(a.xv,{size:1,muted:!0,children:(0,o.jsx)(p.hQ6,{})}),h[7]=d):d=h[7],h[8]!==i?(c=(0,o.jsx)(r.u,{portal:!0,placement:"top",content:i,children:d}),h[8]=i,h[9]=c):c=h[9],h[10]!==n||h[11]!==c?(u=(0,o.jsx)(a.xu,{padding:2,children:(0,o.jsxs)(a.gF,{space:2,children:[n,c]})}),h[10]=n,h[11]=c,h[12]=u):u=h[12],u):null};function eN(e){let t,n,i,l,d,c,u;let p=(0,s.c)(27),{icon:h,layout:f,presence:x,schemaType:g,value:b}=e,y=(0,m._je)(b._id),{perspectiveStack:j}=(0,m.Wc0)();p[0]!==j||p[1]!==e.documentPreviewStore||p[2]!==g||p[3]!==b._id?(n=(0,m.eLL)(e.documentPreviewStore,g,b._id,j),p[0]=j,p[1]=e.documentPreviewStore,p[2]=g,p[3]=b._id,p[4]=n):n=p[4],t=n,p[5]===Symbol.for("react.memo_cache_sentinel")?(i={snapshot:null,isLoading:!0,original:null},p[5]=i):i=p[5];let{snapshot:_,original:w,isLoading:k}=(0,v.m)(t,i);p[6]!==k||p[7]!==x||p[8]!==y.draft||p[9]!==y.published||p[10]!==y.versions?(l=k?null:(0,o.jsx)(r.uE,{children:(0,o.jsxs)(a.kC,{align:"center",gap:3,children:[x&&x.length>0&&(0,o.jsx)(m.mEJ,{presence:x}),(0,o.jsx)(m.aAo,{draft:y.draft,published:y.published,versions:y.versions})]})}),p[6]=k,p[7]=x,p[8]=y.draft,p[9]=y.published,p[10]=y.versions,p[11]=l):l=p[11];let C=l;p[12]!==y.draft||p[13]!==y.published||p[14]!==y.versions?(d=(0,o.jsx)(m._mO,{draft:y.draft,published:y.published,versions:y.versions}),p[12]=y.draft,p[13]=y.published,p[14]=y.versions,p[15]=d):d=p[15];let S=d;return p[16]!==w||p[17]!==_||p[18]!==b?(c=(0,m.L_b)({snapshot:_,original:w,fallback:b}),p[16]=w,p[17]=_,p[18]=b,p[19]=c):c=p[19],p[20]!==h||p[21]!==k||p[22]!==f||p[23]!==C||p[24]!==c||p[25]!==S?(u=(0,o.jsx)(m.ogX,{...c,isPlaceholder:k,icon:h,layout:f,status:C,tooltip:S}),p[20]=h,p[21]=k,p[22]=f,p[23]=C,p[24]=c,p[25]=S,p[26]=u):u=p[26],u}let eO=(0,c.forwardRef)(function(e,t){let n,i,l,r,a;let d=(0,s.c)(9),{routerPanesState:p,groupIndex:m}=(0,c.useContext)(u.ud);return d[0]!==m||d[1]!==p?(i=p.slice(0,m),d[0]=m,d[1]=p,d[2]=i):i=d[2],n=i,d[3]!==n?(r={panes:n},d[3]=n,d[4]=r):r=d[4],l=r,d[5]!==e||d[6]!==t||d[7]!==l?(a=(0,o.jsx)(j.Px,{...e,ref:t,state:l}),d[5]=e,d[6]=t,d[7]=l,d[8]=a):a=d[8],a});function eU(){let e=(0,c.useContext)(u.yq);if(!e)throw Error("PaneLayout: missing context value");return e}let eB=(0,c.forwardRef)(function(e,t){let n,i,l,r,a,d;let p=(0,s.c)(19);p[0]!==e?({childId:n,childPayload:l,childParameters:i,...r}=e,p[0]=e,p[1]=n,p[2]=i,p[3]=l,p[4]=r):(n=p[1],i=p[2],l=p[3],r=p[4]);let{routerPanesState:m,groupIndex:h}=(0,c.useContext)(u.ud);if(p[5]!==n||p[6]!==i||p[7]!==l||p[8]!==h||p[9]!==m){let e;p[11]!==n||p[12]!==i||p[13]!==l?(e=[{id:n,params:i,payload:l}],p[11]=n,p[12]=i,p[13]=l,p[14]=e):e=p[14],a={panes:[...m.slice(0,h+1),e]},p[5]=n,p[6]=i,p[7]=l,p[8]=h,p[9]=m,p[10]=a}else a=p[10];return p[15]!==t||p[16]!==r||p[17]!==a?(d=(0,o.jsx)(j.Px,{...r,ref:t,state:a}),p[15]=t,p[16]=r,p[17]=a,p[18]=d):d=p[18],d}),eV=(0,c.forwardRef)(function(e,t){let n,i,l,r,a,d,p,h,f;let x=(0,s.c)(22),{routerPanesState:g,groupIndex:b,siblingIndex:y}=(0,c.useContext)(u.ud);x[0]!==e?({params:n,payload:i,...l}=e,x[0]=e,x[1]=n,x[2]=i,x[3]=l):(n=x[1],i=x[2],l=x[3]);let v=(0,m.BoV)(n),_=(0,m.BoV)(i),w=g[b],k=w[y],C=v??k.params,S=_??k.payload;x[4]!==k||x[5]!==C||x[6]!==S?(a={...k,params:C,payload:S},x[4]=k,x[5]=C,x[6]=S,x[7]=a):a=x[7];let z=a;x[8]!==w||x[9]!==z||x[10]!==y?(d=[...w.slice(0,y),z,...w.slice(y+1)],x[8]=w,x[9]=z,x[10]=y,x[11]=d):d=x[11];let E=d;x[12]!==g||x[13]!==b||x[14]!==E?(p=[...g.slice(0,b),E,...g.slice(b+1)],x[12]=g,x[13]=b,x[14]=E,x[15]=p):p=x[15];let I=p;return x[16]!==I?(h={panes:I},x[16]=I,x[17]=h):h=x[17],r=h,x[18]!==r||x[19]!==t||x[20]!==l?(f=(0,o.jsx)(j.Px,{ref:t,...l,state:r}),x[18]=r,x[19]=t,x[20]=l,x[21]=f):f=x[21],f}),eG=(0,c.forwardRef)(function(e,t){let n,i,l,r,a,d,c,u,p,m;let h=(0,s.c)(22);h[0]!==e?({documentId:i,documentType:l,parentRefPath:r,children:n,template:d,...a}=e,h[0]=e,h[1]=n,h[2]=i,h[3]=l,h[4]=r,h[5]=a,h[6]=d):(n=h[1],i=h[2],l=h[3],r=h[4],a=h[5],d=h[6]);let f=d?.params;return h[7]!==r?(c=(0,w.BB)(r),h[7]=r,h[8]=c):c=h[8],h[9]!==d?(u=d&&{template:d?.id},h[9]=d,h[10]=u):u=h[10],h[11]!==l||h[12]!==c||h[13]!==u?(p={type:l,parentRefPath:c,...u},h[11]=l,h[12]=c,h[13]=u,h[14]=p):p=h[14],h[15]!==n||h[16]!==i||h[17]!==t||h[18]!==a||h[19]!==f||h[20]!==p?(m=(0,o.jsx)(eB,{...a,ref:t,childId:i,childPayload:f,childParameters:p,children:n}),h[15]=n,h[16]=i,h[17]=t,h[18]=a,h[19]=f,h[20]=p,h[21]=m):m=h[21],m});function eF(){return(0,c.useContext)(u.ud)}let eK=[];function eW(e){let t,n,i,l;let r=(0,s.c)(16),{onClick:a,type:d,value:c}=e,u=c?._id;r[0]!==u?(t=(0,m.vsM)(u),r[0]=u,r[1]=t):t=r[1];let p=(0,m.Dqo)(t),h=(0,m.rq_)(),{ReferenceChildLink:f}=eF();r[2]!==f||r[3]!==d?.name||r[4]!==c?._id?(n=function(e){return(0,o.jsx)(f,{documentId:c?._id,documentType:d?.name,parentRefPath:eK,...e})},r[2]=f,r[3]=d?.name,r[4]=c?._id,r[5]=n):n=r[5];let x=n,g=d?.icon,b=p?.length>0?p:eK;return r[6]!==h||r[7]!==g||r[8]!==b||r[9]!==d||r[10]!==c?(i=(0,o.jsx)(eN,{documentPreviewStore:h,icon:g,layout:"compact",presence:b,schemaType:d,value:c}),r[6]=h,r[7]=g,r[8]=b,r[9]=d,r[10]=c,r[11]=i):i=r[11],r[12]!==a||r[13]!==x||r[14]!==i?(l=(0,o.jsx)(m.oUE,{__unstable_focusRing:!0,as:x,"data-as":"a",onClick:a,radius:2,children:i}),r[12]=a,r[13]=x,r[14]=i,r[15]=l):l=r[15],l}function eX(e){let t,n,i,c,u,h,f,x,g,b,y,v,j,_,w,k,C,S,z,E;let I=(0,s.c)(78),{crossDatasetReferences:$,internalReferences:P,documentTitle:A,totalCount:T,action:R,datasetNames:M,hasUnknownDatasetNames:D,onReferenceLinkClick:L}=e,N=(0,m.I_y)(),O=(0,d.pm)(),{t:U}=(0,m.$G7)(l.UA);I[0]!==L||I[1]!==N||I[2]!==U?(t=e=>{let t=N.get(e._type);return t?(0,o.jsx)(eW,{type:t,value:e,onClick:L}):(0,o.jsx)(a.xu,{padding:2,children:(0,o.jsx)(m.ogX,{icon:p.Tzq,title:U("confirm-delete-dialog.preview-item.preview-unavailable.title"),subtitle:U("confirm-delete-dialog.preview-item.preview-unavailable.subtitle",{documentId:e._id}),layout:"default"})})},I[0]=L,I[1]=N,I[2]=U,I[3]=t):t=I[3];let B=t;if(P?.totalCount===0&&$?.totalCount===0){let e,t;return I[4]!==A?(e={DocumentTitle:()=>(0,o.jsx)("strong",{children:A})},I[4]=A,I[5]=e):e=I[5],I[6]!==R||I[7]!==U||I[8]!==e?(t=(0,o.jsx)(a.xv,{as:"p",size:1,children:(0,o.jsx)(m.vNl,{t:U,i18nKey:"confirm-delete-dialog.confirmation.text",context:R,components:e})}),I[6]=R,I[7]=U,I[8]=e,I[9]=t):t=I[9],t}if(I[10]!==R||I[11]!==$||I[12]!==M||I[13]!==A||I[14]!==D||I[15]!==P||I[16]!==B||I[17]!==U||I[18]!==O||I[19]!==T){let e,t,l,s;let d=[...M,...D?["unavailable"]:[]],k=U("confirm-delete-dialog.cdr-summary.subtitle",{count:d.length,datasets:d.join(", "),context:D&&d.length?"unavailable":""});c=a.kC,w="column",u=4,I[34]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(a.xv,{"aria-hidden":"true",size:1,children:(0,o.jsx)(p.foC,{})}),I[34]=e):e=I[34],I[35]!==A?(t={DocumentTitle:()=>A},I[35]=A,I[36]=t):t=I[36],I[37]!==T?(l={count:T},I[37]=T,I[38]=l):l=I[38],I[39]!==U||I[40]!==t||I[41]!==l?(h=(0,o.jsx)(a.Zb,{padding:3,radius:2,tone:"caution",flex:"none",children:(0,o.jsxs)(a.kC,{children:[e,(0,o.jsx)(a.xu,{flex:1,marginLeft:3,children:(0,o.jsx)(a.xv,{size:1,children:(0,o.jsx)(m.vNl,{i18nKey:"confirm-delete-dialog.referring-document-count.text",components:t,t:U,values:l})})})]})}),I[39]=U,I[40]=t,I[41]=l,I[42]=h):h=I[42],I[43]!==A?(s={DocumentTitle:()=>A},I[43]=A,I[44]=s):s=I[44],I[45]!==R||I[46]!==U||I[47]!==s?(f=(0,o.jsx)(a.xu,{flex:"none",children:(0,o.jsx)(a.xv,{size:1,children:(0,o.jsx)(m.vNl,{i18nKey:"confirm-delete-dialog.referring-documents-descriptor.text",t:U,context:R,components:s})})}),I[45]=R,I[46]=U,I[47]=s,I[48]=f):f=I[48],i=a.Zb,y=2,v=1,j="auto",_=2,n=a.kC,x="column",I[49]!==P||I[50]!==B?(g=P.totalCount>0&&(0,o.jsxs)(a.Kq,{as:"ul",marginBottom:2,space:2,"data-testid":"internal-references",children:[P?.references.map(e=>o.jsx(a.xu,{as:"li",children:B(e)},e._id)),P.totalCount>P.references.length&&(0,o.jsx)(a.xu,{as:"li",padding:3,children:(0,o.jsx)(eL,{...P})})]}),I[49]=P,I[50]=B,I[51]=g):g=I[51],b=$.totalCount>0&&(0,o.jsxs)(eT,{"data-testid":"cross-dataset-references",style:{borderTop:P.totalCount>0?"1px solid var(--card-shadow-outline-color)":void 0},children:[(0,o.jsx)(eR,{children:(0,o.jsx)(a.Zb,{as:"a",marginTop:P.totalCount>0?2:0,radius:2,shadow:1,paddingY:1,children:(0,o.jsxs)(a.kC,{align:"center",gap:3,paddingX:3,paddingY:1,children:[(0,o.jsx)(a.xv,{size:1,children:(0,o.jsx)(p.TAM,{})}),(0,o.jsxs)(a.Kq,{space:2,children:[(0,o.jsx)(a.xv,{textOverflow:"ellipsis",size:1,children:U("confirm-delete-dialog.cdr-summary.title",{count:d.length,documentCount:U("confirm-delete-dialog.cdr-summary.document-count",{count:$.totalCount})})}),(0,o.jsx)(a.xv,{title:k,textOverflow:"ellipsis",size:1,muted:!0,children:k})]}),(0,o.jsx)(eA,{children:(0,o.jsx)(a.xv,{muted:!0,size:1,children:(0,o.jsx)(p.v4q,{})})})]})})}),(0,o.jsxs)(a.xu,{overflow:"auto",paddingTop:2,children:[(0,o.jsxs)(eM,{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:(0,o.jsx)(a.xv,{muted:!0,size:1,style:{minWidth:"5rem"},weight:"medium",children:U("confirm-delete-dialog.cdr-table.project-id.label")})}),(0,o.jsx)("th",{children:(0,o.jsx)(a.xv,{muted:!0,size:1,weight:"medium",children:U("confirm-delete-dialog.cdr-table.dataset.label")})}),(0,o.jsx)("th",{children:(0,o.jsx)(a.xv,{muted:!0,size:1,weight:"medium",children:U("confirm-delete-dialog.cdr-table.document-id.label")})})]})}),(0,o.jsx)("tbody",{children:$.references.filter(eH).map((e,t)=>{let{projectId:n,datasetName:i,documentId:l}=e;return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)(a.xv,{size:1,children:n})}),(0,o.jsx)("td",{children:(0,o.jsx)(a.xv,{size:1,children:i||"unavailable"})}),(0,o.jsx)("td",{children:(0,o.jsxs)(eD,{align:"center",gap:2,justify:"flex-end",children:[(0,o.jsx)(a.xv,{textOverflow:"ellipsis",size:1,children:l||"unavailable"}),l&&(0,o.jsx)(r.zx,{mode:"bleed",icon:p.TIy,tooltipProps:{content:U("confirm-delete-dialog.cdr-table.copy-id-button.tooltip")},onClick:()=>{navigator.clipboard.writeText(l).catch(()=>{O.push({status:"error",title:U("confirm-delete-dialog.cdr-table.id-copied-toast.title-failed")})})}})]})})]},`${l}-${t}`)})})]}),(0,o.jsx)(eL,{...$})]})]}),I[10]=R,I[11]=$,I[12]=M,I[13]=A,I[14]=D,I[15]=P,I[16]=B,I[17]=U,I[18]=O,I[19]=T,I[20]=n,I[21]=i,I[22]=c,I[23]=u,I[24]=h,I[25]=f,I[26]=x,I[27]=g,I[28]=b,I[29]=y,I[30]=v,I[31]=j,I[32]=_,I[33]=w}else n=I[20],i=I[21],c=I[22],u=I[23],h=I[24],f=I[25],x=I[26],g=I[27],b=I[28],y=I[29],v=I[30],j=I[31],_=I[32],w=I[33];return I[52]!==n||I[53]!==x||I[54]!==g||I[55]!==b?(k=(0,o.jsxs)(n,{direction:x,children:[g,b]}),I[52]=n,I[53]=x,I[54]=g,I[55]=b,I[56]=k):k=I[56],I[57]!==i||I[58]!==k||I[59]!==y||I[60]!==v||I[61]!==j||I[62]!==_?(C=(0,o.jsx)(i,{radius:y,shadow:v,flex:j,padding:_,children:k}),I[57]=i,I[58]=k,I[59]=y,I[60]=v,I[61]=j,I[62]=_,I[63]=C):C=I[63],I[64]!==A?(S={DocumentTitle:()=>A},I[64]=A,I[65]=S):S=I[65],I[66]!==R||I[67]!==U||I[68]!==S?(z=(0,o.jsx)(a.xu,{flex:"none",children:(0,o.jsx)(a.xv,{size:1,children:(0,o.jsx)(m.vNl,{i18nKey:"confirm-delete-dialog.referential-integrity-disclaimer.text",t:U,context:R,components:S})})}),I[66]=R,I[67]=U,I[68]=S,I[69]=z):z=I[69],I[70]!==c||I[71]!==u||I[72]!==h||I[73]!==f||I[74]!==C||I[75]!==z||I[76]!==w?(E=(0,o.jsxs)(c,{direction:w,gap:u,children:[h,f,C,z]}),I[70]=c,I[71]=u,I[72]=h,I[73]=f,I[74]=C,I[75]=z,I[76]=w,I[77]=E):E=I[77],E}function eH(e){return"projectId"in e}let eq=()=>(i||(i=(0,k.R)(document,"visibilitychange").pipe((0,T.O)(null),(0,P.U)(()=>"visible"===document.visibilityState),(0,I.x)(),(0,ee.w)(e=>e?(0,C.H)(0,5e3):S.E),(0,et.d)({refCount:!0,bufferSize:1}))),i),eY=(0,m.ek8)(([e,t])=>t.listenQuery({fetch:'{"references":*[references($documentId)][0...100]{_id,_type},"totalCount":count(*[references($documentId)])}',listen:"*[references($documentId)]"},{documentId:e},{tag:"use-referring-documents",transitions:["appear","disappear"],throttleTime:5e3})),eZ=(0,m.ek8)(([e,t])=>eq().pipe((0,ee.w)(()=>(function(e,t){let{versionedClient:n}=t;return eq().pipe((0,ee.w)(()=>(function(e,{versionedClient:t}){let n=(0,m.qyu)(e),i=(0,m.vsM)(e),l={uri:t.getDataUrl("doc",`${n},${i}`),json:!0,query:{excludeContent:"true"},tag:"use-referring-documents.document-existence"};return t.observable.request(l).pipe((0,P.U)(({omitted:e})=>{let t=e.filter(e=>"existence"===e.reason);if(2!==t.length)return 0===t.length||t.some(e=>e.id===n)?i:n}))})(e,t)),(0,ee.w)(e=>{if(!e)return(0,z.of)({totalCount:0,references:[]});let t=n.config().dataset;return n.observable.request({url:`/data/references/${t}/documents/${e}/to?excludeInternalReferences=true&excludePaths=true`,tag:"use-referring-documents.external"}).pipe((0,R.K)(e=>{if("object"==typeof e&&e&&"statusCode"in e&&"response"in e&&404===e.statusCode)return(0,z.of)({totalCount:0,references:[]});throw e}))}))})(e,{versionedClient:t}))));function eJ(e){return"string"!=typeof e.datasetName}function eQ(e){return!!e&&""!==e}function e0(e){return e?.datasetName||""}function e1(e){return e.projectId}let e2=(0,x.zo)(a.xu)`
  box-sizing: border-box;
`,e3=(0,x.zo)(a.kC).attrs({align:"center",direction:"column",justify:"center"})`
  height: 110px;
`;function e4(e){let t,n,i,a,d,u,p,h,f,x;let g=(0,s.c)(40),{id:b,type:y,action:v,onCancel:j,onConfirm:_}=e,w=void 0===v?"delete":v,{t:k}=(0,m.$G7)(l.UA),C=`deletion-confirmation-${(0,c.useId)()}`,{internalReferences:S,crossDatasetReferences:z,isLoading:E,totalCount:I,projectIds:$,datasetNames:P,hasUnknownDatasetNames:A}=function(e){let t,n,i,l,r,o,a,d,c;let u=(0,s.c)(24),p=(0,m.m85)(m.Dr7),h=(0,m.H__)();u[0]!==e?(t=(0,m.vsM)(e),u[0]=e,u[1]=t):t=u[1];let f=t;u[2]!==h||u[3]!==f?(n=[f,h],u[2]=h,u[3]=f,u[4]=n):n=u[4];let[x,g]=eY(n);u[5]!==f||u[6]!==p?(i=[f,p],u[5]=f,u[6]=p,u[7]=i):i=u[7];let[b,y]=eZ(i);u[8]!==b?.references?(l=()=>Array.from(new Set(b?.references.map(e1).filter(Boolean))).sort(),u[8]=b?.references,u[9]=l):l=u[9],u[10]!==l?(r=l(),u[10]=l,u[11]=r):r=u[11];let v=r;u[12]!==b?.references?(a=Array.from(new Set(b?.references.map(e0).filter(eQ))).sort(),u[12]=b?.references,u[13]=a):a=u[13],o=a,u[14]!==b?.references?(d=()=>!!b?.references.some(eJ),u[14]=b?.references,u[15]=d):d=u[15];let j=d(),_=(x?.totalCount||0)+(b?.totalCount||0),w=g||y;return u[16]!==b||u[17]!==o||u[18]!==j||u[19]!==x||u[20]!==v||u[21]!==_||u[22]!==w?(c={totalCount:_,projectIds:v,datasetNames:o,hasUnknownDatasetNames:j,internalReferences:x,crossDatasetReferences:b,isLoading:w},u[16]=b,u[17]=o,u[18]=j,u[19]=x,u[20]=v,u[21]=_,u[22]=w,u[23]=c):c=u[23],c}(b);g[0]!==b||g[1]!==y?(n={_id:b,_type:y},g[0]=b,g[1]=y,g[2]=n):n=g[2],t=n,g[3]!==t?(i=(0,o.jsx)(eP,{document:t}),g[3]=t,g[4]=i):i=g[4];let T=i,R=!E;return g[5]!==w||g[6]!==k?(a=k("confirm-delete-dialog.header.text",{context:w}),g[5]=w,g[6]=k,g[7]=a):a=g[7],g[8]!==k?(d=k("confirm-delete-dialog.cancel-button.text"),g[8]=k,g[9]=d):d=g[9],g[10]!==j||g[11]!==d?(u={onClick:j,text:d},g[10]=j,g[11]=d,g[12]=u):u=g[12],g[13]!==w||g[14]!==_||g[15]!==R||g[16]!==k||g[17]!==I?(p=R?{text:k(I>0?"confirm-delete-dialog.confirm-anyway-button.text":"confirm-delete-dialog.confirm-button.text",{context:w}),onClick:_}:void 0,g[13]=w,g[14]=_,g[15]=R,g[16]=k,g[17]=I,g[18]=p):p=g[18],g[19]!==u||g[20]!==p?(h={cancelButton:u,confirmButton:p},g[19]=u,g[20]=p,g[21]=h):h=g[21],g[22]!==w||g[23]!==z||g[24]!==P||g[25]!==T||g[26]!==A||g[27]!==S||g[28]!==E||g[29]!==j||g[30]!==$||g[31]!==k||g[32]!==I?(f=(0,o.jsx)(e2,{children:z&&S&&!E?(0,o.jsx)(eX,{crossDatasetReferences:z,internalReferences:S,documentTitle:T,isLoading:E,totalCount:I,action:w,projectIds:$,datasetNames:P,hasUnknownDatasetNames:A,onReferenceLinkClick:j}):(0,o.jsx)(e3,{"data-testid":"loading-container",children:(0,o.jsx)(m.Bwn,{showText:!0,title:k("confirm-delete-dialog.loading.text")})})}),g[22]=w,g[23]=z,g[24]=P,g[25]=T,g[26]=A,g[27]=S,g[28]=E,g[29]=j,g[30]=$,g[31]=k,g[32]=I,g[33]=f):f=g[33],g[34]!==C||g[35]!==j||g[36]!==f||g[37]!==a||g[38]!==h?(x=(0,o.jsx)(r.Vq,{width:1,id:C,header:a,footer:h,onClose:j,onClickOutside:j,children:f}),g[34]=C,g[35]=j,g[36]=f,g[37]=a,g[38]=h,g[39]=x):x=g[39],x}function e5(e){let t,n;let i=(0,s.c)(6),{t:d}=(0,m.$G7)(l.UA),u=(0,c.useId)(),[p,h]=(0,c.useState)(null);i[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>h(null),i[0]=t):t=i[0];let f=t;return i[1]!==p||i[2]!==u||i[3]!==e||i[4]!==d?(n=p?(0,o.jsx)(r.Vq,{id:`dialog-error-${u}`,"data-testid":"confirm-delete-error-dialog",header:d("confirm-delete-dialog.error.title.text"),footer:{confirmButton:{text:d("confirm-delete-dialog.error.retry-button.text"),onClick:f,tone:"default"}},onClose:e.onCancel,children:(0,o.jsx)(a.xu,{padding:4,children:(0,o.jsx)(a.xv,{size:1,children:d("confirm-delete-dialog.error.message.text")})})}):(0,o.jsx)(r.SV,{onCatch:h,children:(0,o.jsx)(e4,{...e})}),i[1]=p,i[2]=u,i[3]=e,i[4]=d,i[5]=n):n=i[5],n}function e6(e){let t,n,i;let l=(0,s.c)(6),{children:r,ms:a}=e,d=void 0===a?0:a,[u,p]=(0,c.useState)(d<=0);if(l[0]!==d?(t=()=>{if(d<=0)return;let e=setTimeout(()=>p(!0),d);return()=>{clearTimeout(e)}},n=[d],l[0]=d,l[1]=t,l[2]=n):(t=l[1],n=l[2]),(0,c.useEffect)(t,n),!u||!r){let e;return l[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(o.Fragment,{}),l[3]=e):e=l[3],e}return l[4]!==r?(i="function"==typeof r?r():r,l[4]=r,l[5]=i):i=l[5],i}let e7=(0,x.zo)(a.mh)`
  position: relative;
  width: 1px;
  min-width: 1px;

  &:before {
    content: '';
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    width: 1px;
    background-color: var(--card-border-color);
  }

  &:not([data-disabled]) {
    cursor: ew-resize;
    width: 9px;
    min-width: 9px;
    margin: 0 -4px;

    &:before {
      left: 4px;
    }

    &:after {
      content: '';
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 9px;
      bottom: 0;
      background-color: var(--card-border-color);
      opacity: 0;
      transition: opacity 150ms;
    }

    &[data-dragging]:after,
    &:hover:after {
      opacity: 0.2;
    }
  }
`;function e8(e){let t,n;let i=(0,s.c)(7),{disabled:l,element:r}=e,{resize:a}=eU(),[d,u]=(0,c.useState)(!1);i[0]!==r||i[1]!==a?(t=e=>{if(!r)return;u(!0),e.preventDefault();let t=e.pageX;a("start",r,0);let n=e=>{e.preventDefault(),a("move",r,e.pageX-t)},i=e=>{e.preventDefault(),u(!1),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",i),a("end",r,0)};window.addEventListener("mousemove",n),window.addEventListener("mouseup",i)},i[0]=r,i[1]=a,i[2]=t):t=i[2];let p=t,m=l?"":void 0,h=d?"":void 0;return i[3]!==p||i[4]!==m||i[5]!==h?(n=(0,o.jsx)(e7,{"data-disabled":m,"data-dragging":h,onMouseDown:p}),i[3]=p,i[4]=m,i[5]=h,i[6]=n):n=i[6],n}let e9=(0,x.zo)(a.Zb)`
  outline: none;

  // NOTE: This will render a border to the right side of each pane
  // without taking up physical space.
  box-shadow: 1px 0 0 var(--card-border-color);
`,te=(0,c.forwardRef)(function(e,t){let n,i,l,r,d,p,h,f,x,g,b,y,v,j,_,w,k,C,S,z,E,I,$,P,A,T,R,M,D,L,N,O;let U=(0,s.c)(86);U[0]!==e?({children:n,currentMinWidth:l,currentMaxWidth:i,flex:f,id:r,minWidth:p,maxWidth:d,selected:x,...h}=e,U[0]=e,U[1]=n,U[2]=i,U[3]=l,U[4]=r,U[5]=d,U[6]=p,U[7]=h,U[8]=f,U[9]=x):(n=U[1],i=U[2],l=U[3],r=U[4],d=U[5],p=U[6],h=U[7],f=U[8],x=U[9]);let B=void 0===f?1:f,V=void 0!==x&&x,[G,F]=(0,c.useState)(null),{collapse:K,collapsed:W,expand:X,expandedElement:H,mount:q,panes:Y}=eU();if(U[10]!==Y||U[11]!==G){let e;U[14]!==G?(e=e=>e.element===G,U[14]=G,U[15]=e):e=U[15],b=(g=Y.find(e))&&Y.indexOf(g),U[10]=Y,U[11]=G,U[12]=g,U[13]=b}else g=U[12],b=U[13];let Z=b,J="number"==typeof Z?Y[Z+1]:void 0,Q=Z===Y.length-1,ee=H===G,et=!W&&(g?.collapsed||!1),en=J?.collapsed||!1,ei=(0,c.useRef)(null),el=g?.flex??B,er=g?.currentMinWidth??l,eo=g?.currentMaxWidth??i;U[16]===Symbol.for("react.memo_cache_sentinel")?(y=()=>ei.current,U[16]=y):y=U[16],(0,c.useImperativeHandle)(t,y),U[17]===Symbol.for("react.memo_cache_sentinel")?(v=e=>{F(e),ei.current=e},U[17]=v):v=U[17];let es=v;U[18]!==i||U[19]!==l||U[20]!==B||U[21]!==r||U[22]!==d||U[23]!==p||U[24]!==q||U[25]!==G?(j=()=>{if(G)return q(G,{currentMinWidth:l,currentMaxWidth:i,flex:B,id:r,minWidth:p,maxWidth:d})},_=[l,i,B,r,p,d,q,G],U[18]=i,U[19]=l,U[20]=B,U[21]=r,U[22]=d,U[23]=p,U[24]=q,U[25]=G,U[26]=j,U[27]=_):(j=U[26],_=U[27]),(0,c.useLayoutEffect)(j,_),U[28]!==K||U[29]!==G?(w=()=>{G&&K(G)},U[28]=K,U[29]=G,U[30]=w):w=U[30];let ea=w;U[31]!==X||U[32]!==G?(k=()=>{G&&X(G)},U[31]=X,U[32]=G,U[33]=k):k=U[33];let ed=k,ec=!W&&et;U[34]!==ea||U[35]!==ed||U[36]!==Q||U[37]!==Z||U[38]!==G||U[39]!==ec?(S={collapse:ea,collapsed:ec,expand:ed,index:Z,isLast:Q,rootElement:G},U[34]=ea,U[35]=ed,U[36]=Q,U[37]=Z,U[38]=G,U[39]=ec,U[40]=S):S=U[40],C=S;e:{if(W){z=void 0;break e}if(et){z=51;break e}if(0===er||Q){z=p||204;break e}z=er||p||204}let eu=z;t:{if(et){E=51;break t}if(W&&Q){E=void 0;break t}if(Q){if(d){E=eo??d;break t}E=void 0;break t}E=eo??d}let ep=E,em=W&&!Q;U[41]!==et||U[42]!==Q||U[43]!==W||U[44]!==en||U[45]!==G?($=!Q&&!W&&(0,o.jsx)(m.jr5,{zOffset:"paneResizer",children:(0,o.jsx)(e8,{disabled:et||en,element:G})}),U[41]=et,U[42]=Q,U[43]=W,U[44]=en,U[45]=G,U[46]=$):$=U[46],I=$;let eh=ep===1/0?void 0:ep;U[47]!==el||U[48]!==eu||U[49]!==eh?(A={flex:el,minWidth:eu,maxWidth:eh},U[47]=el,U[48]=eu,U[49]=eh,U[50]=A):A=U[50],P=A;let ef=W?void 0:"hidden",ex=et?"":void 0,eg=V?"":void 0;return U[51]!==et||U[52]!==eo||U[53]!==er||U[54]!==ee||U[55]!==el||U[56]!==ep||U[57]!==eu||U[58]!==Z?(T=!1,U[51]=et,U[52]=eo,U[53]=er,U[54]=ee,U[55]=el,U[56]=ep,U[57]=eu,U[58]=Z,U[59]=T):T=U[59],U[60]!==n||U[61]!==em?(R=!em&&(0,o.jsx)(a.kC,{direction:"column",height:"fill",children:n}),U[60]=n,U[61]=em,U[62]=R):R=U[62],U[63]!==G||U[64]!==R?(M=(0,o.jsx)(a.NM,{element:G,children:R}),U[63]=G,U[64]=R,U[65]=M):M=U[65],U[66]!==em||U[67]!==r||U[68]!==Z||U[69]!==h||U[70]!==P||U[71]!==ef||U[72]!==ex||U[73]!==eg||U[74]!==T||U[75]!==M?(D=(0,o.jsxs)(e9,{"data-testid":"pane","data-ui":"Pane",tone:"inherit",hidden:em,id:r,overflow:ef,...h,"data-pane-collapsed":ex,"data-pane-index":Z,"data-pane-selected":eg,ref:es,style:P,children:[T,M]}),U[66]=em,U[67]=r,U[68]=Z,U[69]=h,U[70]=P,U[71]=ef,U[72]=ex,U[73]=eg,U[74]=T,U[75]=M,U[76]=D):D=U[76],U[77]!==Q||U[78]!==D?(L=(0,o.jsx)(m.K4Y,{isLastPane:Q,children:D}),U[77]=Q,U[78]=D,U[79]=L):L=U[79],U[80]!==C||U[81]!==L?(N=(0,o.jsx)(m.jr5,{zOffset:"pane",children:(0,o.jsx)(u.tc.Provider,{value:C,children:L})}),U[80]=C,U[81]=L,U[82]=N):N=U[82],U[83]!==I||U[84]!==N?(O=(0,o.jsxs)(o.Fragment,{children:[N,I]}),U[83]=I,U[84]=N,U[85]=O):O=U[85],O}),tt=(0,x.zo)(a.Zb)`
  position: relative;
  outline: none;
`;function tn(){let e=(0,c.useContext)(u.tc);if(!e)throw Error("Pane: missing context value");return e}tt.displayName="PaneContent__root";let ti=(0,c.forwardRef)(function(e,t){let n,i,l,r,a,d;let c=(0,s.c)(14);c[0]!==e?({as:n,children:i,overflow:l,padding:r,...a}=e,c[0]=e,c[1]=n,c[2]=i,c[3]=l,c[4]=r,c[5]=a):(n=c[1],i=c[2],l=c[3],r=c[4],a=c[5]);let{collapsed:u}=tn(),{collapsed:p}=eU(),m=p?void 0:l;return c[6]!==n||c[7]!==i||c[8]!==u||c[9]!==r||c[10]!==t||c[11]!==a||c[12]!==m?(d=(0,o.jsx)(tt,{"data-testid":"pane-content",forwardedAs:n,...a,flex:1,hidden:u,overflow:m,padding:r,ref:t,tone:"inherit",children:i}),c[6]=n,c[7]=i,c[8]=u,c[9]=r,c[10]=t,c[11]=a,c[12]=m,c[13]=d):d=c[13],d});function tl(e){return e?e.toLocaleLowerCase().replaceAll(" ",""):""}let tr={constrainSize:!0,placement:"left-start",portal:!0};function to(e){let t,n,i,l;let r=(0,s.c)(35),{disabled:d,isAfterGroup:c,node:u}=e,p=(0,m.sr_)("i18n"in u?u:void 0);if("divider"===u.type){let e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(a.R,{}),r[0]=e):e=r[0],e}r[1]!==p||r[2]!==u?(t=p(u),r[1]=p,r[2]=u,r[3]=t):t=r[3];let{title:h}=t;if("group"===u.type){let e,t,n,i;if(0===u.children.length)return null;if(u.expanded){let e,t,n;return r[4]!==c?(e=c&&(0,o.jsx)(a.R,{}),r[4]=c,r[5]=e):e=r[5],r[6]!==d||r[7]!==u.children||r[8]!==u.disabled?(t=u.children.map((e,t)=>(0,o.jsx)(to,{disabled:d||!!u.disabled,isAfterGroup:u.children[t-1]?.type==="group",node:e},e.key)),r[6]=d,r[7]=u.children,r[8]=u.disabled,r[9]=t):t=r[9],r[10]!==e||r[11]!==t?(n=(0,o.jsxs)(o.Fragment,{children:[e,t]}),r[10]=e,r[11]=t,r[12]=n):n=r[12],n}r[13]!==c?(e=c&&(0,o.jsx)(a.R,{}),r[13]=c,r[14]=e):e=r[14];let l=u.icon;return r[15]!==d||r[16]!==u.children||r[17]!==u.disabled?(t=u.children.map((e,t)=>(0,o.jsx)(to,{disabled:d||!!u.disabled,isAfterGroup:u.children[t-1]?.type==="group",node:e},e.key)),r[15]=d,r[16]=u.children,r[17]=u.disabled,r[18]=t):t=r[18],r[19]!==d||r[20]!==u.icon||r[21]!==t||r[22]!==h?(n=(0,o.jsx)(ek.k,{disabled:d,icon:l,popover:tr,text:h,children:t}),r[19]=d,r[20]=u.icon,r[21]=t,r[22]=h,r[23]=n):n=r[23],r[24]!==e||r[25]!==n?(i=(0,o.jsxs)(o.Fragment,{children:[e,n]}),r[24]=e,r[25]=n,r[26]=i):i=r[26],i}return r[27]!==c?(n=c&&(0,o.jsx)(a.R,{}),r[27]=c,r[28]=n):n=r[28],r[29]!==d||r[30]!==u?(i=(0,o.jsx)(ts,{disabled:d,node:u}),r[29]=d,r[30]=u,r[31]=i):i=r[31],r[32]!==n||r[33]!==i?(l=(0,o.jsxs)(o.Fragment,{children:[n,i]}),r[32]=n,r[33]=i,r[34]=l):l=r[34],l}function ts(e){let t;let n=(0,s.c)(5),{node:i}=e;if(i.intent){let t;return n[0]!==i.intent||n[1]!==e?(t=(0,o.jsx)(td,{...e,intent:i.intent}),n[0]=i.intent,n[1]=e,n[2]=t):t=n[2],t}return n[3]!==e?(t=(0,o.jsx)(ta,{...e}),n[3]=e,n[4]=t):t=n[4],t}function ta(e){let t,n,i,l;let d=(0,s.c)(17),{disabled:c,node:u}=e;d[0]!==u.disabled?(t="object"==typeof u.disabled&&(0,o.jsx)(a.xv,{size:1,children:u.disabled.reason}),d[0]=u.disabled,d[1]=t):t=d[1];let h=t,{title:f}=(0,m.v0Z)(u),x=c||!!u.disabled;d[2]!==u.hotkey?(n=u.hotkey?.split("+"),d[2]=u.hotkey,d[3]=n):n=d[3];let g=u.iconRight||u.selected&&p.KML,b=`action-${tl(u.title)}`;return d[4]!==u.icon||d[5]!==u.onAction||d[6]!==u.selected||d[7]!==u.tone||d[8]!==x||d[9]!==n||d[10]!==g||d[11]!==b||d[12]!==f?(i=(0,o.jsx)(r.sN,{disabled:x,hotkeys:n,icon:u.icon,iconRight:g,onClick:u.onAction,pressed:u.selected,text:f,tone:u.tone,"data-testid":b}),d[4]=u.icon,d[5]=u.onAction,d[6]=u.selected,d[7]=u.tone,d[8]=x,d[9]=n,d[10]=g,d[11]=b,d[12]=f,d[13]=i):i=d[13],d[14]!==i||d[15]!==h?(l=(0,o.jsx)(m.xMr,{content:h,placement:"left",children:i}),d[14]=i,d[15]=h,d[16]=l):l=d[16],l}function td(e){let t,n,i,l,d,c;let u=(0,s.c)(23),{disabled:h,intent:f,node:x}=e;u[0]!==x.disabled?(t="object"==typeof x.disabled&&(0,o.jsx)(a.xv,{size:1,children:x.disabled.reason}),u[0]=x.disabled,u[1]=t):t=u[1];let g=t;u[2]!==f.params||u[3]!==f.type?(n={intent:f.type,params:f.params},u[2]=f.params,u[3]=f.type,u[4]=n):n=u[4];let b=(0,j.PM)(n);u[5]!==b||u[6]!==x?(i=e=>{b.onClick(e),x.onAction()},u[5]=b,u[6]=x,u[7]=i):i=u[7];let y=i,{title:v}=(0,m.v0Z)(x),_=h||!!x.disabled;u[8]!==x.hotkey?(l=x.hotkey?.split("+"),u[8]=x.hotkey,u[9]=l):l=u[9];let w=x.selected?p.KML:void 0;return u[10]!==y||u[11]!==b.href||u[12]!==x.icon||u[13]!==x.selected||u[14]!==x.tone||u[15]!==_||u[16]!==l||u[17]!==w||u[18]!==v?(d=(0,o.jsx)(r.sN,{as:"a",disabled:_,hotkeys:l,href:b.href,icon:x.icon,iconRight:w,onClick:y,pressed:x.selected,text:v,tone:x.tone}),u[10]=y,u[11]=b.href,u[12]=x.icon,u[13]=x.selected,u[14]=x.tone,u[15]=_,u[16]=l,u[17]=w,u[18]=v,u[19]=d):d=u[19],u[20]!==d||u[21]!==g?(c=(0,o.jsx)(m.xMr,{content:g,placement:"left",children:d}),u[20]=d,u[21]=g,u[22]=c):c=u[22],c}let tc={constrainSize:!0,placement:"bottom",portal:!0};function tu(e,t){return e.some(e=>"item"===e.type&&e.tone===t||"group"===e.type&&tu(e.children,t))}function tp(e){let t,n,i,l,d;let u=(0,s.c)(13),{nodes:p,actionsNodes:h}=e,f=(0,c.useId)(),x=tu(p,"critical"),g=tu(p,"caution"),b=x?"critical":g?"caution":void 0;return u[0]!==b?(t=(0,o.jsx)(m.lXN,{tone:b,"data-testid":"pane-context-menu-button"}),u[0]=b,u[1]=t):t=u[1],u[2]!==h?(n=h&&(0,o.jsxs)(o.Fragment,{children:[h,(0,o.jsx)(a.R,{})]}),u[2]=h,u[3]=n):n=u[3],u[4]!==p?(i=p.map((e,t)=>{let n=p[t-1]?.type==="group";return(0,o.jsx)(to,{isAfterGroup:n,node:e},e.key)}),u[4]=p,u[5]=i):i=u[5],u[6]!==n||u[7]!==i?(l=(0,o.jsxs)(a.v2,{children:[n,i]}),u[6]=n,u[7]=i,u[8]=l):l=u[8],u[9]!==f||u[10]!==t||u[11]!==l?(d=(0,o.jsx)(r.j2,{button:t,id:f,menu:l,popover:tc}),u[9]=f,u[10]=t,u[11]=l,u[12]=d):d=u[12],d}let tm=(0,x.zo)(a.mh)`
  position: sticky;
  bottom: 0;
`,th=(0,x.zo)(a.Zb)`
  padding-bottom: env(safe-area-inset-bottom);
`,tf=(0,c.forwardRef)(function(e,t){let n,i;let l=(0,s.c)(7),{children:r,padding:d}=e,{collapsed:c}=tn();return l[0]!==r||l[1]!==d?(n=(0,o.jsx)(th,{tone:"inherit",children:(0,o.jsx)(a.xu,{padding:d,children:r})}),l[0]=r,l[1]=d,l[2]=n):n=l[2],l[3]!==c||l[4]!==t||l[5]!==n?(i=(0,o.jsx)(m.jr5,{zOffset:"paneFooter",children:(0,o.jsx)(tm,{"data-testid":"pane-footer",hidden:c,ref:t,children:n})}),l[3]=c,l[4]=t,l[5]=n,l[6]=i):i=l[6],i}),tx=(0,x.zo)(a.mh)(({$border:e})=>(0,x.iv)`
    line-height: 0;
    position: sticky;
    top: 0;

    &:not([data-collapsed]):after {
      content: '';
      display: block;
      position: absolute;
      left: 0;
      right: 0;
      bottom: -1px;
      border-bottom: 1px solid ${e?"var(--card-border-color)":"transparent"};
      opacity: 1;
    }
  `),tg=(0,x.zo)(a.kC)`
  transform-origin: calc(51px / 2);

  [data-collapsed] > div > & {
    transform: rotate(90deg);
  }
`,tb=(0,x.zo)(a.Zb)(({theme:e})=>{let{fg:t,bg:n}=e.sanity.color.card.enabled;return(0,x.iv)`
    background-color: ${n};

    [data-ui='Text'] {
      color: ${t};
    }
  `}),ty=(0,x.zo)(d.Qr)`
  width: 66%;
  max-width: 175px;
`,tv=(0,x.zo)(a.xv)`
  cursor: default;
  outline: none;
`,tj=(0,c.forwardRef)(function(e,t){let n,i,l,r,c,u,p,h,f,x,g,b,y,v;let j=(0,s.c)(48),{actions:_,backButton:w,border:k,contentAfter:C,loading:S,subActions:z,tabs:E,tabIndex:I,title:$,appendTitle:P}=e,{collapse:A,collapsed:T,expand:R,rootElement:M}=tn(),D=(0,d.XL)(M||null),L=T?D?.height||window.innerHeight:void 0;j[0]!==L?(i={width:L},j[0]=L,j[1]=i):i=j[1],n=i,j[2]!==A||j[3]!==T?(l=()=>{T||A()},j[2]=A,j[3]=T,j[4]=l):l=j[4];let N=l;j[5]!==T||j[6]!==R?(r=()=>{T&&R()},j[5]=T,j[6]=R,j[7]=r):r=j[7];let O=r,U=!!(!T&&(E||z)),B=T?"":void 0,V=T?"":void 0;j[8]!==w?(c=w&&(0,o.jsx)(a.xu,{flex:"none",children:w}),j[8]=w,j[9]=c):c=j[9];let G=w?1:2;j[10]!==S?(u=S&&(0,o.jsx)(a.xu,{children:(0,o.jsx)(ty,{animated:!0,radius:1,size:1})}),j[10]=S,j[11]=u):u=j[11],j[12]!==P||j[13]!==S||j[14]!==$?(p=!S&&(0,o.jsxs)(a.kC,{align:"center",gap:1,children:[(0,o.jsx)(tv,{size:1,textOverflow:"ellipsis",weight:"semibold",children:$}),P]}),j[12]=P,j[13]=S,j[14]=$,j[15]=p):p=j[15],j[16]!==N||j[17]!==p||j[18]!==G||j[19]!==u||j[20]!==I?(h=(0,o.jsxs)(tb,{__unstable_focusRing:!0,flex:1,onClick:N,paddingLeft:G,padding:2,tabIndex:I,children:[u,p]}),j[16]=N,j[17]=p,j[18]=G,j[19]=u,j[20]=I,j[21]=h):h=j[21],j[22]!==_||j[23]!==T?(f=_&&(0,o.jsx)(a.xu,{hidden:T,children:(0,o.jsx)(m.jr5,{zOffset:"paneHeader",children:_})}),j[22]=_,j[23]=T,j[24]=f):f=j[24],j[25]!==h||j[26]!==f||j[27]!==c?(x=(0,o.jsxs)(a.kC,{align:"flex-start",gap:3,children:[c,h,f]}),j[25]=h,j[26]=f,j[27]=c,j[28]=x):x=j[28],j[29]!==T||j[30]!==U||j[31]!==z||j[32]!==E?(g=U&&(0,o.jsxs)(a.kC,{align:"center",hidden:T,overflow:"auto",children:[(0,o.jsx)(a.xu,{flex:1,marginRight:z?3:0,children:E}),z]}),j[29]=T,j[30]=U,j[31]=z,j[32]=E,j[33]=g):g=j[33],j[34]!==O||j[35]!==n||j[36]!==x||j[37]!==g?(b=(0,o.jsxs)(tg,{direction:"column",gap:3,onClick:O,padding:3,sizing:"border",style:n,children:[x,g]}),j[34]=O,j[35]=n,j[36]=x,j[37]=g,j[38]=b):b=j[38];let F=!T&&C;return j[39]!==b||j[40]!==F||j[41]!==V?(y=(0,o.jsx)(m.jr5,{zOffset:"paneHeader",children:(0,o.jsxs)(a.Zb,{"data-collapsed":V,tone:"inherit",children:[b,F]})}),j[39]=b,j[40]=F,j[41]=V,j[42]=y):y=j[42],j[43]!==k||j[44]!==t||j[45]!==y||j[46]!==B?(v=(0,o.jsx)(a.li,{zOffset:100,children:(0,o.jsx)(tx,{$border:k,"data-collapsed":B,"data-testid":"pane-header",ref:t,children:y})}),j[43]=k,j[44]=t,j[45]=y,j[46]=B,j[47]=v):v=j[47],v});function t_(e){return e.disabled?{disabledReason:"object"==typeof e.disabled?e.disabled.reason:void 0,ariaLabel:"object"==typeof e.disabled&&"string"==typeof e.disabled?.reason?e.disabled.reason:"This is disabled",isDisabled:!!e.disabled}:{disabledReason:void 0,ariaLabel:void 0,isDisabled:!1}}function tw(e){let t=(0,s.c)(4),{node:n}=e;if("item"===n.type){let e;return t[0]!==n?(e=(0,o.jsx)(tk,{node:n}),t[0]=n,t[1]=e):e=t[1],e}if("group"===n.type){let e;return t[2]!==n?(e=(0,o.jsx)(tS,{node:n}),t[2]=n,t[3]=e):e=t[3],e}return console.warn('unknown menu node (expected `type: "item" | "group"`):',n),null}function tk(e){let t,n,i,l,r;let a=(0,s.c)(23),{node:d}=e,{title:c}=(0,m.v0Z)(d),{t:u}=(0,m.$G7)();if(d.intent){let t;return a[0]!==d.intent||a[1]!==e?(t=(0,o.jsx)(tC,{...e,intent:d.intent}),a[0]=d.intent,a[1]=e,a[2]=t):t=a[2],t}a[3]!==d?(t=t_(d),a[3]=d,a[4]=t):t=a[4];let{disabledReason:p,ariaLabel:h,isDisabled:f}=t;a[5]!==h||a[6]!==u||a[7]!==c?(n=h||c||u("status-button.aria-label"),a[5]=h,a[6]=u,a[7]=c,a[8]=n):n=a[8],a[9]!==f||a[10]!==d.hotkey?(i=!f&&d.hotkey?d.hotkey.split("+"):void 0,a[9]=f,a[10]=d.hotkey,a[11]=i):i=a[11];let x=f?p:c;return a[12]!==i||a[13]!==x?(l={hotkeys:i,content:x},a[12]=i,a[13]=x,a[14]=l):l=a[14],a[15]!==f||a[16]!==d.icon||a[17]!==d.onAction||a[18]!==d.selected||a[19]!==d.tone||a[20]!==n||a[21]!==l?(r=(0,o.jsx)(m.YG6,{disabled:f,icon:d.icon,onClick:d.onAction,selected:d.selected,tone:d.tone,"aria-label":n,tooltipProps:l}),a[15]=f,a[16]=d.icon,a[17]=d.onAction,a[18]=d.selected,a[19]=d.tone,a[20]=n,a[21]=l,a[22]=r):r=a[22],r}function tC(e){let t,n,i,l,r,a,d;let c=(0,s.c)(27),{intent:u,node:p}=e;c[0]!==u.params||c[1]!==u.type?(t={intent:u.type,params:u.params},c[0]=u.params,c[1]=u.type,c[2]=t):t=c[2];let h=(0,j.PM)(t),{t:f}=(0,m.$G7)();c[3]!==h||c[4]!==p?(n=e=>{h.onClick(e),p.onAction()},c[3]=h,c[4]=p,c[5]=n):n=c[5];let x=n;c[6]!==p?(i=t_(p),c[6]=p,c[7]=i):i=c[7];let{disabledReason:g,ariaLabel:b,isDisabled:y}=i;c[8]!==b||c[9]!==p.title||c[10]!==f?(l=b||p.title||f("status-button.aria-label"),c[8]=b,c[9]=p.title,c[10]=f,c[11]=l):l=c[11],c[12]!==y||c[13]!==p.hotkey?(r=!y&&p.hotkey?p.hotkey.split("+"):void 0,c[12]=y,c[13]=p.hotkey,c[14]=r):r=c[14];let v=y?g:p.title;return c[15]!==r||c[16]!==v?(a={hotkeys:r,content:v,placement:"bottom",portal:!0},c[15]=r,c[16]=v,c[17]=a):a=c[17],c[18]!==x||c[19]!==h.href||c[20]!==y||c[21]!==p.icon||c[22]!==p.selected||c[23]!==p.tone||c[24]!==l||c[25]!==a?(d=(0,o.jsx)(m.YG6,{forwardedAs:"a",disabled:y,href:h.href,icon:p.icon,onClick:x,selected:p.selected,tone:p.tone,"aria-label":l,tooltipProps:a}),c[18]=x,c[19]=h.href,c[20]=y,c[21]=p.icon,c[22]=p.selected,c[23]=p.tone,c[24]=l,c[25]=a,c[26]=d):d=c[26],d}function tS(e){let t,n,i,l,d;let u=(0,s.c)(16),{node:h}=e,{title:f}=(0,m.v0Z)(h),x=!!h.disabled,g=h.icon??p.Tzq;u[0]!==h.title?(t={content:h.title,portal:!0},u[0]=h.title,u[1]=t):t=u[1],u[2]!==x||u[3]!==g||u[4]!==t||u[5]!==f?(n=(0,o.jsx)(r.zx,{disabled:x,icon:g,label:f,mode:"bleed",tooltipProps:t}),u[2]=x,u[3]=g,u[4]=t,u[5]=f,u[6]=n):n=u[6];let b=(0,c.useId)();return u[7]!==h.children||u[8]!==h.disabled?(i=h.children.map((e,t)=>(0,o.jsx)(to,{disabled:!!h.disabled,isAfterGroup:h.children[t-1]?.type==="group",node:e},e.key)),u[7]=h.children,u[8]=h.disabled,u[9]=i):i=u[9],u[10]!==i?(l=(0,o.jsx)(a.v2,{children:i}),u[10]=i,u[11]=l):l=u[11],u[12]!==n||u[13]!==b||u[14]!==l?(d=(0,o.jsx)(r.j2,{button:n,id:b,menu:l}),u[12]=n,u[13]=b,u[14]=l,u[15]=d):d=u[15],d}let tz=(0,x.zo)(a.Zb)`
  transition: opacity 200ms;
  position: relative;
  z-index: 1;
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
  opacity: 0;

  &:not([hidden]) {
    display: flex;
  }

  &:not([data-collapsed]) {
    overflow: auto;
  }

  &[data-mounted] {
    opacity: 1;
  }

  &[data-resizing] {
    pointer-events: none;
  }
`,tE=[];function tI(e){let t,n,i,l,r,a,p,m,h,f,x,g,b,y,v,j,_,w;let k=(0,s.c)(41);k[0]!==e?({children:t,minWidth:n,onCollapse:i,onExpand:l,...r}=e,k[0]=e,k[1]=t,k[2]=n,k[3]=i,k[4]=l,k[5]=r):(t=k[1],n=k[2],i=k[3],l=k[4],r=k[5]);let[C]=(0,c.useState)(t$),[S,z]=(0,c.useState)(null),E=d.XL(S)?.width||0,I=void 0!==E&&n?E<n:void 0;k[6]===Symbol.for("react.memo_cache_sentinel")?(a={expandedElement:null,panes:[],resizing:!1},k[6]=a):a=k[6];let[$,P]=(0,c.useState)(a);k[7]!==C||k[8]!==S?(p=()=>C.setRootElement(S),m=[C,S],k[7]=C,k[8]=S,k[9]=p,k[10]=m):(p=k[9],m=k[10]),(0,c.useEffect)(p,m),k[11]!==C||k[12]!==E?(h=()=>C.setRootWidth(E),f=[C,E],k[11]=C,k[12]=E,k[13]=h,k[14]=f):(h=k[13],f=k[14]),(0,c.useEffect)(h,f),k[15]!==C?(x=()=>C.subscribe(P),g=[C],k[15]=C,k[16]=x,k[17]=g):(x=k[16],g=k[17]),(0,c.useEffect)(x,g),k[18]!==I||k[19]!==i||k[20]!==l?(b=()=>{void 0!==I&&(I&&i&&i(),!I&&l&&l())},y=[I,i,l],k[18]=I,k[19]=i,k[20]=l,k[21]=b,k[22]=y):(b=k[21],y=k[22]),(0,c.useEffect)(b,y),k[23]!==I||k[24]!==C.collapse||k[25]!==C.expand||k[26]!==C.mount||k[27]!==C.resize||k[28]!==$.expandedElement||k[29]!==$.panes||k[30]!==$.resizing?(j={collapse:C.collapse,collapsed:I,expand:C.expand,expandedElement:$.expandedElement,mount:C.mount,panes:$.panes,resize:C.resize,resizing:$.resizing},k[23]=I,k[24]=C.collapse,k[25]=C.expand,k[26]=C.mount,k[27]=C.resize,k[28]=$.expandedElement,k[29]=$.panes,k[30]=$.resizing,k[31]=j):j=k[31],v=j;let A=I?"":void 0,T=$.resizing?"":void 0,R=E?"":void 0;return k[32]!==t||k[33]!==r||k[34]!==A||k[35]!==T||k[36]!==R?(_=(0,o.jsx)(tz,{"data-ui":"PaneLayout",...r,"data-collapsed":A,"data-resizing":T,"data-mounted":R,ref:z,children:t}),k[32]=t,k[33]=r,k[34]=A,k[35]=T,k[36]=R,k[37]=_):_=k[37],k[38]!==v||k[39]!==_?(w=(0,o.jsx)(u.yq.Provider,{value:v,children:_}),k[38]=v,k[39]=_,k[40]=w):w=k[40],w}function t$(){return function(){let e=[],t=[],n=new WeakMap,i=new Set,l={},r=null,o=0,s=null,a=new Map,d=!1;function c(e){i.delete(e),s=e,u()}return{collapse:function(e){i.add(e),s===e&&(s=null),u()},expand:c,mount:function(e,i){return n.set(e,{...i,original:i}),t.push(e),r&&function(e,t){let n=new WeakMap;for(let i of t)n.set(i,function(e,t){let n=[],i=t;for(;i!==e;){let t=i.parentElement;if(!t)break;let l=Array.from(t.childNodes).indexOf(i);if(n.unshift(l),t===e)break;i=t}return n}(e,i));t.sort((e,t)=>{let i=n.get(e)||tE,l=n.get(t)||tE,r=Math.max(i.length,l.length);for(let e=0;e<r;e+=1){let t=i[e]||-1,n=l[e]||-1;if(t!==n)return t-n}return 0})}(r,t),c(e),()=>{let i=t.indexOf(e);i>-1&&t.splice(i,1),n.delete(e),u()}},resize:function(e,i,r){let o=t.indexOf(i),s=n.get(i);if(!s)return;let c=t[o+1],p=n.get(c);if(p){if("start"===e&&(d=!0,l.left={element:i,flex:s.flex||1,width:i.offsetWidth},l.right={element:c,flex:p.flex||1,width:c.offsetWidth},u()),"move"===e&&l.left&&l.right){a=new Map;let{leftW:e,rightW:t,leftFlex:n,rightFlex:o}=function(e,t,n,i){let l={flex:e.left.flex+e.right.flex,width:e.left.width+e.right.width},r=t.minWidth??204,o=n.minWidth??204,s=Math.min(t.maxWidth||1/0,l.width-o),a=Math.min(n.maxWidth||1/0,l.width-r),d=r-e.left.width,c=e.right.width-a;d<c&&(d=c);let u=e.right.width-o,p=s-e.left.width;u>p&&(u=p);let m=Math.min(Math.max(i,d),u),h=e.left.width+m,f=e.right.width-m;return{leftFlex:h/l.width*l.flex,leftW:h,rightFlex:f/l.width*l.flex,rightW:f}}(l,s,p,r);a.set(i,{flex:n,width:e}),a.set(c,{flex:o,width:t}),u()}if("end"===e){d=!1;let e=a.get(i),t=a.get(c);n.set(i,{...s,currentMinWidth:0,currentMaxWidth:s.maxWidth??1/0,flex:e?.flex??s.flex}),n.set(c,{...p,currentMinWidth:0,currentMaxWidth:s.maxWidth??1/0,flex:t?.flex??p.flex}),a=new Map,delete l.left,delete l.right,u()}}},setRootElement:function(e){r=e},setRootWidth:function(e){o=e,u()},subscribe:function(t){return e.push(t),()=>{let n=e.push(t);n>-1&&e.splice(n,1)}}};function u(){if(!o)return;let l=[];for(let e of t)e!==s&&l.unshift(e);s&&l.unshift(s);let r=new WeakMap,c=l.length,u=l[0],p=o-(c-1)*51;for(let e of l){let t=n.get(e);if(!t)continue;let l=t.currentMinWidth||t.minWidth||204,o=e===u,s=i.has(e),d=l>p,c=!o&&(s||d),m=a.get(e);r.set(e,{element:e,collapsed:c,currentMinWidth:m?.width??t.currentMinWidth,currentMaxWidth:m?.width??t.currentMaxWidth,flex:m?.flex??t.flex??1}),c?p-=51:p-=l-51}let m=[];for(let e of t){let t=r.get(e);t&&m.push(t)}for(let n of e)n({expandedElement:s||t[t.length-1]||null,panes:m,resizing:d})}}()}function tP(e){return("item"===e.type||"group"===e.type)&&e.renderAsButton}let tA=ew(tP);function tT(e){let{fieldActions:t=[],menuItems:n,menuItemGroups:i}=e,l=[],r=0;for(let e=0;e<t.length;e+=1){let n=t[e];l.push(function e(t,n){return"divider"===t.type?{type:"divider",key:n}:"group"===t.type?{type:"group",key:n,children:t.children.map((t,i)=>e(t,`${n}-${i}-${t.type}`)),disabled:t.disabled,expanded:t.expanded??!0,icon:t.icon,title:t.title,i18n:t.i18n,renderAsButton:t.renderAsButton??!1}:{type:"item",key:n,intent:t.intent,disabled:t.disabled,icon:t.icon,iconRight:t.iconRight,onAction:t.onAction,renderAsButton:t.renderAsButton??!1,selected:t.selected,title:t.title,i18n:t.i18n,tone:t.tone}}(n,`${e}-${n.type}`))}r+=l.length;let o=[];for(let e of i)o.find(t=>t.key===e.id)||o.push({type:"group",key:e.id,children:[],expanded:!0,renderAsButton:!1,title:e.title,i18n:e.i18n});let s=[];for(let t=0;t<n.length;t+=1){let i=n[t],l=i.group&&o.find(e=>e.key===i.group),a="string"==typeof i.disabled?{reason:i.disabled}:i.disabled;i.group&&!l&&(l={type:"group",key:i.group,disabled:a,expanded:!0,icon:i.icon,title:i.group,children:[],renderAsButton:!1},o.push(l)),l?l.children.push({type:"item",key:`${r+t}-item`,hotkey:i.shortcut,icon:i.icon,intent:i.intent,disabled:a,onAction:()=>e.actionHandler(i),renderAsButton:i.showAsAction??!1,selected:i.selected,title:i.title,i18n:i.i18n,tone:i.tone}):s.push({type:"item",key:`${r+t}-item`,hotkey:i.shortcut,icon:i.icon,intent:i.intent,disabled:a,onAction:()=>e.actionHandler(i),renderAsButton:i.showAsAction??!1,selected:i.selected,title:i.title,i18n:i.i18n,tone:i.tone})}return[...s,...o,...l]}let tR=(0,c.forwardRef)(function(e,t){let n,i,l,a,d;let u=(0,s.c)(10);return u[0]!==e?({intent:n,...i}=e,u[0]=e,u[1]=n,u[2]=i):(n=u[1],i=u[2]),u[3]!==n?(a=(0,c.forwardRef)(function(e,t){return(0,o.jsx)(j.nR,{...e,intent:n.type,params:n.params,ref:t,searchParams:n.searchParams})}),u[3]=n,u[4]=a):a=u[4],l=a,u[5]!==l||u[6]!==e.disabled||u[7]!==t||u[8]!==i?(d=e.disabled?(0,o.jsx)(r.zx,{...i,as:"a",role:"link","aria-disabled":"true"}):(0,o.jsx)(r.zx,{...i,as:l,"data-as":"a",ref:t}),u[5]=l,u[6]=e.disabled,u[7]=t,u[8]=i,u[9]=d):d=u[9],d});function tM(e){let t,n,i;let a=(0,s.c)(12),{reveal:d,context:c,loading:u,children:p}=e,h=(0,m.xJ)(),{t:f}=(0,m.$G7)(l.UA);if(!d){let e;return a[0]!==p?(e=(0,o.jsx)(o.Fragment,{children:p}),a[0]=p,a[1]=e):e=a[1],e}return a[2]!==c||a[3]!==h||a[4]!==u||a[5]!==f?(t=u?f("insufficient-permissions-message-tooltip.loading-text"):(0,o.jsx)(m.FMn,{context:c,currentUser:h}),a[2]=c,a[3]=h,a[4]=u,a[5]=f,a[6]=t):t=a[6],a[7]!==p?(n=(0,o.jsx)("div",{children:p}),a[7]=p,a[8]=n):n=a[8],a[9]!==t||a[10]!==n?(i=(0,o.jsx)(r.u,{content:t,portal:!0,children:n}),a[9]=t,a[10]=n,a[11]=i):i=a[11],i}let tD={constrainSize:!0,placement:"bottom",portal:!0},tL=(e,t,n)=>{let i=e.find(e=>e.id===t.templateId)?.schemaType;if(!i)return null;let l={template:t.templateId,type:i,version:n,id:t.initialDocumentId};return{type:"create",params:t.parameters?[l,t.parameters]:l,searchParams:n?[["perspective",n]]:void 0}};function tN(e){let t,n,i,d,u,h,f,x,g;let b=(0,s.c)(60),{templateItems:y}=e,v=(0,m.zEW)(),{selectedReleaseId:_}=(0,m.Wc0)(),{t:w}=(0,m.$G7)(l.UA);b[0]!==y||b[1]!==v?(t=[...y,...v],b[0]=y,b[1]=v,b[2]=t):t=b[2];let k=(0,m.sr_)(t);b[3]!==y?(n={templateItems:y},b[3]=y,b[4]=n):n=b[4];let[C,S]=(0,m.UMU)(n);i=!S&&C?.length!==0&&C?.every(tU);e:{let e;if(!C){let e;b[5]===Symbol.for("react.memo_cache_sentinel")?(e={},b[5]=e):e=b[5],d=e;break e}b[6]!==C?(e=C.reduce(tO,{}),b[6]=C,b[7]=e):e=b[7],d=e}let z=d;if(0===y.length)return null;if(i){let e,t,n;return b[8]!==w?(e=w("pane-header.disabled-created-button.aria-label"),b[8]=w,b[9]=e):e=b[9],b[10]!==e?(t=(0,o.jsx)(r.zx,{"aria-label":e,icon:p.dtP,"data-testid":"action-intent-button",disabled:!0,mode:"bleed",tooltipProps:null}),b[10]=e,b[11]=t):t=b[11],b[12]!==S||b[13]!==t?(n=(0,o.jsx)(tM,{context:"create-document-type",reveal:!0,loading:S,children:t}),b[12]=S,b[13]=t,b[14]=n):n=b[14],n}if(1===y.length){let e,t,n,i,l,r;let s=y[0],a=!z[s.id]?.granted;b[15]!==s||b[16]!==_||b[17]!==v?(e=tL(v,s,_),b[15]=s,b[16]=_,b[17]=v,b[18]=e):e=b[18];let d=e;if(!d)return null;b[19]!==s||b[20]!==k?(t=k(s),b[19]=s,b[20]=k,b[21]=t):t=b[21];let c=t.title,u=s.icon||p.dtP;return b[22]!==w?(n=w("pane-header.create-new-button.tooltip"),b[22]=w,b[23]=n):n=b[23],b[24]!==n?(i={content:n},b[24]=n,b[25]=i):i=b[25],b[26]!==a||b[27]!==d||b[28]!==i||b[29]!==t.title||b[30]!==u?(l=(0,o.jsx)(tR,{"aria-label":c,icon:u,intent:d,mode:"bleed",disabled:a,"data-testid":"action-intent-button",tooltipProps:i}),b[26]=a,b[27]=d,b[28]=i,b[29]=t.title,b[30]=u,b[31]=l):l=b[31],b[32]!==a||b[33]!==S||b[34]!==l?(r=(0,o.jsx)(tM,{reveal:a,loading:S,context:"create-document-type",children:l}),b[32]=a,b[33]=S,b[34]=l,b[35]=r):r=b[35],r}if(b[36]!==w?(u=w("pane-header.create-new-button.tooltip"),b[36]=w,b[37]=u):u=b[37],b[38]!==u?(h=(0,o.jsx)(r.zx,{icon:p.dtP,mode:"bleed","data-testid":"multi-action-intent-button",tooltipProps:{content:u}}),b[38]=u,b[39]=h):h=b[39],b[40]!==k||b[41]!==S||b[42]!==z||b[43]!==_||b[44]!==w||b[45]!==y||b[46]!==v){let e;b[48]!==k||b[49]!==S||b[50]!==z||b[51]!==_||b[52]!==w||b[53]!==v?(e=(e,t)=>{let n=!z[e.id]?.granted,i=tL(v,e,_),l=v.find(t=>t.id===e.templateId);if(!l||!i)return null;let s=(0,c.forwardRef)((e,t)=>n?(0,o.jsx)("button",{type:"button",disabled:!0,...e,ref:t}):(0,o.jsx)(j.nR,{...e,intent:i.type,params:i.params,searchParams:i.searchParams,ref:t}));s.displayName="Link";let{title:a}=k({...e,title:e.title||k(l).title});return(0,o.jsx)(tM,{context:"create-document-type",reveal:n,loading:S,children:(0,o.jsx)(r.sN,{as:s,"data-as":n?"button":"a",text:a,"aria-label":n?w("pane-header.disabled-created-button.aria-label"):a,disabled:n,"data-testid":`action-intent-button-${t}`})},e.id)},b[48]=k,b[49]=S,b[50]=z,b[51]=_,b[52]=w,b[53]=v,b[54]=e):e=b[54],f=y.map(e),b[40]=k,b[41]=S,b[42]=z,b[43]=_,b[44]=w,b[45]=y,b[46]=v,b[47]=f}else f=b[47];return b[55]!==f?(x=(0,o.jsx)(a.v2,{children:f}),b[55]=f,b[56]=x):x=b[56],b[57]!==h||b[58]!==x?(g=(0,o.jsx)(r.j2,{button:h,id:"create-menu",menu:x,popover:tD}),b[57]=h,b[58]=x,b[59]=g):g=b[59],g}function tO(e,t){return e[t.id]=t,e}function tU(e){return!e.granted}function tB(e){return null!=e}let tV=e=>{let t=e=>"object"==typeof e&&e?Array.isArray(e)?e.map(t):Object.entries(e).sort(([e],[t])=>e.localeCompare(t,"en")):e;return JSON.stringify(t(JSON.parse(JSON.stringify(e))))},tG=(0,c.memo)(function(e){let{initialValueTemplateItems:t=m.LZ8,menuItems:n=m.LZ8,menuItemGroups:i=m.LZ8,actionHandlers:l=m.NuZ}=e,r=(0,m.zEW)(),s=(0,c.useCallback)(e=>{if("string"==typeof e.action&&!(e.action in l))return console.warn("No handler for action:",e.action),!1;let t="function"==typeof e.action?e.action:"string"==typeof e.action?l[e.action]:null;return!!t&&(t(e.params),!0)},[l]),d=(0,c.useMemo)(()=>tT({actionHandler:s,menuItemGroups:i,menuItems:n.filter(e=>e.intent?.type!=="create")}),[s,i,n]),u=(0,c.useMemo)(()=>d.filter(tP),[d]),p=(0,c.useMemo)(()=>d.filter(tA),[d]),h=(0,c.useMemo)(()=>n.map((e,t)=>{if(e.intent?.type!=="create")return null;let{params:n}=e.intent;if(!n)return null;let i=Array.isArray(n)?n[0]:n,l=Array.isArray(n)?n[1]:void 0,o=i.template||i.type;if(!o)return null;let s=r.find(e=>e.id===o);return s?{item:e,template:s,templateParams:l,menuItemIndex:t,initialDocumentId:i.id}:null}).filter(tB).map(({initialDocumentId:e,item:t,template:n,menuItemIndex:i,templateParams:l})=>({id:`menuItem${i}`,initialDocumentId:e,templateId:n.id,type:"initialValueTemplateItem",title:t.title||n.title,i18n:t.i18n||n.i18n,icon:t.icon,description:n.description,parameters:l,schemaType:n.schemaType})),[n,r]),f=(0,c.useMemo)(()=>e_([...h,...t],e=>tV([e.initialDocumentId,e.templateId,e.parameters])),[h,t]);return(0,o.jsxs)(a.kC,{gap:1,children:[(0,o.jsx)(tN,{templateItems:f}),u.map(e=>(0,o.jsx)(tw,{node:e},e.key)),p.length>0&&(0,o.jsx)(tp,{nodes:p})]})});function tF(e){let t,n,i,r,a,d,c;let u=(0,s.c)(16),{t:p}=(0,m.$G7)(l.UA),{layout:h,value:f}=e;return u[0]===Symbol.for("react.memo_cache_sentinel")?(t={Code:"code"},u[0]=t):t=u[0],u[1]!==f._type?(n={documentType:f._type},u[1]=f._type,u[2]=n):n=u[2],u[3]!==p||u[4]!==n?(i=(0,o.jsx)("em",{children:(0,o.jsx)(m.vNl,{t:p,i18nKey:"pane-item.missing-schema-type.title",components:t,values:n})}),u[3]=p,u[4]=n,u[5]=i):i=u[5],u[6]===Symbol.for("react.memo_cache_sentinel")?(r={Code:"code"},u[6]=r):r=u[6],u[7]!==f._id?(a={documentId:f._id},u[7]=f._id,u[8]=a):a=u[8],u[9]!==p||u[10]!==a?(d=(0,o.jsx)(m.vNl,{t:p,i18nKey:"pane-item.missing-schema-type.subtitle",components:r,values:a}),u[9]=p,u[10]=a,u[11]=d):d=u[11],u[12]!==h||u[13]!==i||u[14]!==d?(c=(0,o.jsx)(m.ogX,{title:i,subtitle:d,media:tK,layout:h}),u[12]=h,u[13]=i,u[14]=d,u[15]=c):c=u[15],c}function tK(){return(0,o.jsx)(p.foC,{})}function tW(e,t,n){return!1!==e&&(e||t&&t.icon||n||!1)}function tX(e){let t,n,i,l,r,d,u,f;let x=(0,s.c)(42),{icon:g,id:b,layout:y,pressed:v,schemaType:j,selected:_,title:w,value:k,margin:C,marginBottom:S,marginTop:z}=e,E=void 0===y?"default":y,I=(0,m.I_y)(),$=(0,m.rq_)(),{ChildLink:P}=eF(),A=(0,m.Dqo)(b),T=!!(j&&j.name&&I.get(j.name)),[R,M]=(0,c.useState)(!1);e:{let e,n,i,l;if(k&&(0,h.Si)(k)){let e,n;if(!j||!T){let e;x[0]!==k?(e=(0,o.jsx)(tF,{value:k}),x[0]=k,x[1]=e):e=x[1],t=e;break e}x[2]!==g||x[3]!==j?(e=tW(g,j,p.$lS),x[2]=g,x[3]=j,x[4]=e):e=x[4],x[5]!==A||x[6]!==$||x[7]!==E||x[8]!==j||x[9]!==e||x[10]!==k?(n=(0,o.jsx)(eN,{documentPreviewStore:$,icon:e,layout:E,schemaType:j,value:k,presence:A}),x[5]=A,x[6]=$,x[7]=E,x[8]=j,x[9]=e,x[10]=k,x[11]=n):n=x[11],t=n;break e}x[12]===Symbol.for("react.memo_cache_sentinel")?(e={opacity:.5},x[12]=e):e=x[12],x[13]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o.jsx)(a.xu,{style:e,children:(0,o.jsx)(a.xv,{muted:!0,size:1,children:(0,o.jsx)(p.XCv,{})})}),x[13]=n):n=x[13],x[14]!==g||x[15]!==j?(i=tW(g,j,p.ROc),x[14]=g,x[15]=j,x[16]=i):i=x[16],x[17]!==i||x[18]!==w?(l=(0,o.jsx)(m.ogX,{status:n,icon:i,layout:"compact",title:w}),x[17]=i,x[18]=w,x[19]=l):l=x[19],t=l}let D=t;x[20]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{if(e.metaKey){M(!1);return}M(!0)},x[20]=n):n=x[20];let L=n;x[21]===Symbol.for("react.memo_cache_sentinel")?(i=()=>M(!1),x[21]=i):i=x[21],x[22]!==_?(l=[_],x[22]=_,x[23]=l):l=x[23],(0,c.useEffect)(i,l);let[N,O]=(0,c.useState)(!1),U=(0,c.useRef)(null);x[24]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{U.current=setTimeout(()=>(0,c.startTransition)(()=>O(!0)),400)},x[24]=r):r=x[24];let B=r;x[25]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{U.current&&clearTimeout(U.current),(0,c.startTransition)(()=>O(!1))},x[25]=d):d=x[25];let V=d,G=`pane-item-${w}`,F=_||R;return x[26]!==b||x[27]!==N||x[28]!==j||x[29]!==k?(u=N&&j?.name&&k&&(0,h.Si)(k)&&(0,o.jsx)(tH,{documentId:b,documentType:j.name}),x[26]=b,x[27]=N,x[28]=j,x[29]=k,x[30]=u):u=x[30],x[31]!==b||x[32]!==C||x[33]!==S||x[34]!==z||x[35]!==v||x[36]!==D||x[37]!==u||x[38]!==G||x[39]!==P||x[40]!==F?(f=(0,o.jsxs)(m.oUE,{"data-testid":G,__unstable_focusRing:!0,as:P,childId:b,"data-as":"a",margin:C,marginBottom:S,marginTop:z,onClick:L,onMouseEnter:B,onMouseLeave:V,pressed:v,radius:2,selected:F,sizing:"border",tabIndex:-1,tone:"inherit",children:[D,u]}),x[31]=b,x[32]=C,x[33]=S,x[34]=z,x[35]=v,x[36]=D,x[37]=u,x[38]=G,x[39]=P,x[40]=F,x[41]=f):f=x[41],f}function tH(e){let t;let n=(0,s.c)(2),{documentId:i,documentType:l}=e;return n[0]!==i?(t=(0,m.vsM)(i),n[0]=i,n[1]=t):t=n[1],(0,m.iav)(t,l),null}tH.displayName="PreloadDocumentPane";let tq=(0,c.memo)(e=>{let t,n;let i=(0,s.c)(10),{actions:l,children:r,actionProps:a,onActionComplete:d,group:c}=e;return i[0]!==a.id||i[1]!==a.liveEditSchemaType||i[2]!==r?(t=e=>{let{states:t}=e;return(0,o.jsx)(tZ,{states:t,documentId:a.liveEditSchemaType?(0,m.vsM)(a.id):(0,m.qyu)(a.id),children:r})},i[0]=a.id,i[1]=a.liveEditSchemaType,i[2]=r,i[3]=t):t=i[3],i[4]!==a||i[5]!==l||i[6]!==c||i[7]!==d||i[8]!==t?(n=(0,o.jsx)(m.duV,{onReset:d,hooks:l,args:a,group:c,children:t}),i[4]=a,i[5]=l,i[6]=c,i[7]=d,i[8]=t,i[9]=n):n=i[9],n});tq.displayName="Memo(RenderActionCollectionState)";let tY=["delete","duplicate","publish","unpublish","unlinkFromCanvas","editInCanvas","linkToCanvas","schedule"],tZ=e=>{let t;let n=(0,s.c)(9),{states:i,children:r,documentId:o}=e,{t:a}=(0,m.$G7)(l.UA),{isLinked:d}=(0,m.Kp1)(o);e:{let e;if(d){let e;if(n[0]!==r||n[1]!==i||n[2]!==a){let t;n[4]!==a?(t=e=>e.action&&tY.includes(e.action)?e:{...e,disabled:!0,title:a("action.disabled-by-canvas.tooltip")},n[4]=a,n[5]=t):t=n[5],e=r({states:i.map(t)}),n[0]=r,n[1]=i,n[2]=a,n[3]=e}else e=n[3];t=e;break e}n[6]!==r||n[7]!==i?(e=r({states:i}),n[6]=r,n[7]=i,n[8]=e):e=n[8],t=e}return t},tJ=(0,c.memo)(e=>{let t;let n=(0,s.c)(4),{badges:i,children:l,badgeProps:r}=e;return n[0]!==r||n[1]!==i||n[2]!==l?(t=(0,o.jsx)(m.duV,{hooks:i,args:r,children:l}),n[0]=r,n[1]=i,n[2]=l,n[3]=t):t=n[3],t});tJ.displayName="Memo(RenderBadgeCollectionState)";let tQ="diffView",t0="previousDocument",t1="nextDocument";function t2(){let e,t,n;let i=(0,s.c)(9),{navigate:l,state:r}=(0,j.tv)();i[0]!==l||i[1]!==r?(e=e=>{let{mode:t,previousDocument:n,nextDocument:i}=e,o={...q(r._searchParams),...t?{[tQ]:t}:{},...n?{[t0]:[n.type,n.id].join(",")}:{},...i?{[t1]:[i.type,i.id].join(",")}:{}};l({...r,_searchParams:Y(o)})},i[0]=l,i[1]=r,i[2]=e):e=i[2];let o=e;i[3]!==l||i[4]!==r?(t=()=>{l({...r,_searchParams:(r._searchParams??[]).filter(t3)})},i[3]=l,i[4]=r,i[5]=t):t=i[5];let a=t;return i[6]!==a||i[7]!==o?(n={navigateDiffView:o,exitDiffView:a},i[6]=a,i[7]=o,i[8]=n):n=i[8],n}function t3(e){let[t]=e;return![tQ,t0,t1].includes(t)}let t4=["version"];function t5({onParamsError:e}={}){let{state:t}=(0,j.tv)(),n=new URLSearchParams(t._searchParams),i=n.get(t0),l=n.get(t1),r=n.get(tQ),o=[i,l,r].some(e=>null!==e),s=(0,c.useMemo)(()=>(function({previousDocument:e,nextDocument:t,mode:n}){let i=[],[l,r]=e.split(",").filter(Boolean),[o,s]=t.split(",").filter(Boolean);return t4.includes(n)||i.push(["invalidModeParam",n]),(typeof l>"u"||typeof r>"u")&&i.push(["invalidPreviousDocumentParam",e]),(typeof o>"u"||typeof s>"u")&&i.push(["invalidNextDocumentParam",t]),0!==i.length?{result:"error",errors:i}:{result:"success",params:{mode:n,documents:{previous:{type:l,id:r},next:{type:o,id:s}}}}})({previousDocument:i??"",nextDocument:l??"",mode:r??""}),[r,l,i]);return(0,c.useEffect)(()=>{"error"===s.result&&o&&e?.(s.errors)},[o,e,s]),"error"===s.result?{isActive:!1}:{state:"ready",isActive:!0,...s.params}}function t6(e){return null!==e}let t7=x.zo.header`
  display: grid;
  grid-area: header;
  grid-template-columns: 1fr min-content 1fr;
  border-block-end: 1px solid var(--card-border-color);
`,t8=x.zo.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
`,t9=({documentId:e,state:t})=>{let{t:n}=(0,m.$G7)(l.UA),{data:i}=(0,m.vUZ)({documentId:e}),{exitDiffView:r,navigateDiffView:s}=t2(),{documents:d}=t5(),u=(0,m.F6R)(),h=i.flatMap(e=>(0,m.eBk)(e)??[]),f=(0,c.useMemo)(()=>u.data.filter(e=>{let t=(0,m.QXs)(e._id);return"u">typeof t&&h.includes(t)}),[u.data,h]),x=(0,c.useCallback)(e=>{"u">typeof d?.previous&&s({previousDocument:{...d.previous,id:e}})},[d?.previous,s]),g=(0,c.useCallback)(e=>{"u">typeof d?.next&&s({nextDocument:{...d.next,id:e}})},[d?.next,s]);return(0,o.jsxs)(t7,{children:[(0,o.jsxs)(t8,{children:[(0,o.jsx)(a.xu,{padding:4,children:(0,o.jsx)(a.xv,{as:"h1",size:1,muted:!0,children:n("compare-versions.title")})}),"u">typeof d?.previous&&(0,o.jsx)(ne,{releases:f,onSelectRelease:x,role:"previous",documentId:e,state:t,document:d.previous})]}),(0,o.jsx)(a.kC,{align:"center",paddingX:3,children:(0,o.jsx)(a.xv,{size:1,children:(0,o.jsx)(p.lAt,{})})}),(0,o.jsxs)(t8,{children:["u">typeof d?.next&&(0,o.jsx)(ne,{releases:f,onSelectRelease:g,role:"next",documentId:e,state:t,document:d.next}),(0,o.jsx)(a.xu,{padding:3,style:{justifySelf:"end"},children:(0,o.jsx)(a.zx,{icon:p.Two,mode:"bleed",onClick:r,padding:2})})]})]})},ne=({releases:e=[],onSelectRelease:t,role:n,documentId:i,document:s})=>{let{published:d,draft:u}=(0,m.iav)((0,m.vsM)(s.id),s.type),h=(0,c.useMemo)(()=>{var t;return t=s.id,(0,m.aEi)(t)?"published":(0,m.Cb2)(t)?"draft":e.find(({_id:e})=>(0,m.QXs)(e)===(0,m.eBk)(t))},[s.id,e]),{t:f}=(0,m.$G7)(l.UA),{t:x}=(0,m.$G7)(),{document:{drafts:{enabled:g}}}=(0,m.cFj)();return(0,o.jsx)(r.j2,{id:n,button:(0,o.jsx)(a.zx,{type:"button",mode:"bleed",padding:2,paddingRight:3,radius:"full",selected:!0,...function({selected:e,tCore:t,tStructure:n}){if(typeof e>"u")return{text:t("common.loading"),tone:"neutral",disabled:!0};if((0,m._wt)(e)){let n=e?(0,m.Ydd)(e):"neutral";return{text:e?.metadata.title||t("release.placeholder-untitled-release"),icon:(0,o.jsx)(m.yXi,{padding:1,tone:n}),iconRight:e&&(0,m.$NU)(e)?(0,o.jsx)(p.mBM,{}):void 0,tone:n}}let i="published"===e?"positive":"caution";return{text:n(["compare-versions.status",e].join(".")),icon:(0,o.jsx)(m.yXi,{padding:1,tone:i}),tone:i}}({selected:h,tCore:x,tStructure:f})}),menu:(0,o.jsxs)(a.v2,{children:[d&&(0,o.jsx)(nt,{type:"published",onSelect:t,isSelected:"published"===h,documentId:i}),g&&u&&(0,o.jsx)(nt,{type:"draft",onSelect:t,isSelected:"draft"===h,documentId:i}),e.map(e=>(0,o.jsx)(nt,{release:e,onSelect:t,isSelected:"string"!=typeof h&&h?._id===e._id,documentId:i},e._id))]})})},nt=({type:e,release:t,onSelect:n,isSelected:i,documentId:r})=>{let{t:s}=(0,m.$G7)(),{t:d}=(0,m.$G7)(l.UA),u=(0,c.useCallback)(()=>{if("draft"===e){n((0,m.qyu)(r));return}if("published"===e){n((0,m.vsM)(r));return}"u">typeof t?._id&&n((0,m.XLS)(r,(0,m.QXs)(t._id)))},[e,n,r,t?._id]);if(e)return(0,o.jsx)(a.sN,{padding:1,paddingRight:3,onClick:u,pressed:i,children:(0,o.jsxs)(a.kC,{gap:1,children:[(0,o.jsx)(m.yXi,{padding:2,tone:"published"===e?"positive":"caution"}),(0,o.jsx)(a.xu,{paddingY:2,children:(0,o.jsx)(a.xv,{size:1,weight:"medium",children:d(["compare-versions.status",e].join("."))})})]})});let h=t?(0,m.Ydd)(t):"neutral";return(0,o.jsx)(a.sN,{padding:1,paddingRight:3,onClick:u,pressed:i,children:(0,o.jsxs)(a.kC,{gap:1,children:[(0,o.jsx)(m.yXi,{padding:2,tone:h}),(0,o.jsxs)(a.Kq,{flex:1,paddingY:2,paddingRight:2,space:2,children:[(0,o.jsx)(a.xv,{size:1,weight:"medium",children:t.metadata.title||s("release.placeholder-untitled-release")}),["asap","undecided"].includes(t.metadata.releaseType)&&(0,o.jsx)(a.xv,{muted:!0,size:1,children:s(`release.type.${t.metadata.releaseType}`)}),"scheduled"===t.metadata.releaseType&&(0,o.jsx)(a.xv,{muted:!0,size:1,children:(0,m.Bwd)(t)})]}),(0,o.jsx)(a.kC,{flex:"none",children:(0,m.$NU)(t)&&(0,o.jsx)(a.xu,{padding:2,children:(0,o.jsx)(a.xv,{size:1,children:(0,o.jsx)(p.mBM,{})})})})]})})},nn=x.zo.div`
  --offset-block: 40px;
  display: grid;
  height: calc(100vh - var(--offset-block));
  min-height: 0;
  overflow: hidden;
  grid-template-areas:
    'header header'
    'previous-document next-document';
  grid-template-columns: 1fr 1fr;
  grid-template-rows: min-content minmax(0, 1fr);
`;function ni(e){return e.document?.components?.unstable_layout}function nl(e){return e.path}function nr(e,t){return Q(e.path,t.path)}let no=x.zo.div`
  position: relative;
  height: 100%;
  overflow: auto;
  scroll-behavior: smooth;
  scrollbar-width: var(--scrollbar-width);
  overscroll-behavior: contain;
  will-change: scroll-position;
`,ns=(0,x.zo)(a.Zb)`
  position: relative;
  grid-area: var(--grid-area);
`,na=(0,x.zo)(a.W2)`
  width: auto;
`,nd=(0,c.forwardRef)(function(e,t){let n,i,l,r,p,h,f,x,g,b,y,v;let j=(0,s.c)(36),{role:_,documentType:w,documentId:k,scrollElement:C,syncChannel:S,compareDocument:z}=e,E=(0,c.useRef)(null),[I,$]=(0,c.useState)(null),[P,A]=(0,c.useState)(null);j[0]!==z||j[1]!==k||j[2]!==w||j[3]!==_||j[4]!==C||j[5]!==S?(n=()=>(0,o.jsx)(nc,{compareDocument:z,documentId:k,documentType:w,role:_,scrollElement:C,syncChannel:S}),j[0]=z,j[1]=k,j[2]=w,j[3]=_,j[4]=C,j[5]=S,j[6]=n):n=j[6];let T=n;j[7]!==T?(i={pick:ni,defaultComponent:T},j[7]=T,j[8]=i):i=j[8];let R=(0,m.uwK)(i);j[9]===Symbol.for("react.memo_cache_sentinel")?(l={isInteractive:!1,onOpenReviewChanges:J,onSetFocus:J,isReviewChangesOpen:!1},j[9]=l):l=j[9];let M=`${_}-document`;j[10]!==M?(r={"--grid-area":M},j[10]=M,j[11]=r):r=j[11];let D=r,L="next"===_,N="next"!==_&&"none";j[12]!==N?(p={"--scrollbar-width":N},j[12]=N,j[13]=p):p=j[13];let O=p;return j[14]!==R||j[15]!==k||j[16]!==w?(h=(0,o.jsx)(d.Tu,{position:"absolute",children:(0,o.jsx)(na,{ref:E,padding:4,width:1,children:(0,o.jsx)(R,{documentId:k,documentType:w})})}),j[14]=R,j[15]=k,j[16]=w,j[17]=h):h=j[17],j[18]!==I||j[19]!==h?(f=(0,o.jsx)(a.Xp,{element:I,children:h}),j[18]=I,j[19]=h,j[20]=f):f=j[20],j[21]!==t||j[22]!==O||j[23]!==f?(x=(0,o.jsx)(no,{ref:t,style:O,children:f}),j[21]=t,j[22]=O,j[23]=f,j[24]=x):x=j[24],j[25]===Symbol.for("react.memo_cache_sentinel")?(g=(0,o.jsx)("div",{"data-testid":"diffView-document-panel-portal",ref:$}),j[25]=g):g=j[25],j[26]!==x||j[27]!==D||j[28]!==L?(b=(0,o.jsxs)(ns,{ref:A,style:D,borderLeft:L,children:[x,g]}),j[26]=x,j[27]=D,j[28]=L,j[29]=b):b=j[29],j[30]!==P||j[31]!==b?(y=(0,o.jsx)(a.NM,{element:P,children:b}),j[30]=P,j[31]=b,j[32]=y):y=j[32],j[33]!==C||j[34]!==y?(v=(0,o.jsx)(u.CV.Provider,{value:l,children:(0,o.jsx)(m.h3c,{children:(0,o.jsx)(m.Ahg,{scrollElement:C,containerElement:E,children:y})})}),j[33]=C,j[34]=y,j[35]=v):v=j[35],v}),nc=e=>{let t,n,i,l,r,a,d,p,h,f,x,g,b,y,v,j,_,w,k,C,S,z,E,A;let T=(0,s.c)(56),{role:R,documentType:M,documentId:D,syncChannel:L,compareDocument:N}=e;T[0]!==N?(t={compareDocument:N},T[0]=N,T[1]=t):t=T[1];let O=function(e){let t,n,i;let l=(0,s.c)(4),{compareDocument:r}=e;l[0]!==r.id?(t=(0,m.vsM)(r.id),l[0]=r.id,l[1]=t):t=l[1];let o=r.type;l[2]!==r.id?(n=(0,m.eBk)(r.id),l[2]=r.id,l[3]=n):n=l[3];let a=(0,m.iav)(t,o,"low",n);e:{if((0,m.Y_j)(r.id)){i=a.version??void 0;break e}if((0,m.Cb2)(r.id)){i=a.draft??void 0;break e}if((0,m.aEi)(r.id)){i=a.published??void 0;break e}i=void 0}return i}(t),[U]=(0,c.useState)(nu);T[2]!==D?(n=(0,m.vsM)(D),T[2]=D,T[3]=n):n=T[3],T[4]!==D?(i=(0,m.Y_j)(D)?(0,m.eBk)(D):(0,m.aEi)(D)?"published":void 0,T[4]=D,T[5]=i):i=T[5],T[6]!==D?(l=(0,m.eBk)(D),T[6]=D,T[7]=l):l=T[7],T[8]!==O||T[9]!==M||T[10]!==n||T[11]!==i||T[12]!==l?(r={documentId:n,documentType:M,selectedPerspectiveName:i,releaseId:l,comparisonValue:O},T[8]=O,T[9]=M,T[10]=n,T[11]=i,T[12]=l,T[13]=r):r=T[13];let B=(0,m.izb)(r);T[14]!==B?({formState:h,onChange:x,onFocus:g,onBlur:f,onSetActiveFieldGroup:y,onSetCollapsedFieldSet:v,onSetCollapsedPath:j,collapsedFieldSets:a,ready:_,collapsedPaths:d,schemaType:w,value:k,onProgrammaticFocus:b,...p}=B,T[14]=B,T[15]=a,T[16]=d,T[17]=p,T[18]=h,T[19]=f,T[20]=x,T[21]=g,T[22]=b,T[23]=y,T[24]=v,T[25]=j,T[26]=_,T[27]=w,T[28]=k):(a=T[15],d=T[16],p=T[17],h=T[18],f=T[19],x=T[20],g=T[21],b=T[22],y=T[23],v=T[24],j=T[25],_=T[26],w=T[27],k=T[28]);let V=null===h||!_;T[29]!==R||T[30]!==L?(C={id:R,syncChannel:L},T[29]=R,T[30]=L,T[31]=C):C=T[31];let G=function(e){let t,n,i,l;let r=(0,s.c)(11),{syncChannel:o,id:a}=e;r[0]!==a||r[1]!==o?(t=e=>o.next({...e,source:a}),r[0]=a,r[1]=o,r[2]=t):t=r[2];let d=t;if(r[3]!==a||r[4]!==o){let e;r[6]!==a?(e=e=>{let{source:t}=e;return t!==a},r[6]=a,r[7]=e):e=r[7],i=o.pipe((0,I.x)(nr),(0,$.h)(e),(0,P.U)(nl)),r[3]=a,r[4]=o,r[5]=i}else i=r[5];return n=i,r[8]!==n||r[9]!==d?(l={path:n,push:d},r[8]=n,r[9]=d,r[10]=l):l=r[10],l}(C);T[32]!==p||T[33]!==G||T[34]!==R?(S=e=>{p.onPathOpen(e),G.push({source:R,path:e})},T[32]=p,T[33]=G,T[34]=R,T[35]=S):S=T[35];let F=S;return T[36]!==b||T[37]!==G.path?(E=()=>{let e=G.path.subscribe(b);return()=>e.unsubscribe()},z=[b,G.path],T[36]=b,T[37]=G.path,T[38]=z,T[39]=E):(z=T[38],E=T[39]),(0,c.useEffect)(E,z),T[40]!==a||T[41]!==d||T[42]!==h||T[43]!==V||T[44]!==f||T[45]!==x||T[46]!==g||T[47]!==F||T[48]!==y||T[49]!==v||T[50]!==j||T[51]!==U||T[52]!==R||T[53]!==w||T[54]!==k?(A=V?(0,o.jsx)(m.Bwn,{showText:!0}):(0,o.jsx)(u.zW.Provider,{value:{enabled:!1,mode:null},children:(0,o.jsx)(m.quP,{__internal_patchChannel:U,id:`diffView-pane-${R}`,onChange:x,onPathFocus:g,onPathOpen:F,onPathBlur:f,onFieldGroupSelect:y,onSetFieldSetCollapsed:v,onSetPathCollapsed:j,collapsedPaths:d,collapsedFieldSets:a,focusPath:h.focusPath,changed:h.changed,focused:h.focused,groups:h.groups,validation:h.validation,members:h.members,presence:h.presence,schemaType:w,value:k})}),T[40]=a,T[41]=d,T[42]=h,T[43]=V,T[44]=f,T[45]=x,T[46]=g,T[47]=F,T[48]=y,T[49]=v,T[50]=j,T[51]=U,T[52]=R,T[53]=w,T[54]=k,T[55]=A):A=T[55],A};function nu(){return(0,m.fm0)()}let np=x.zo.a`
  flex: 1;
  text-decoration: none;
  color: inherit;
`,nm=e=>{let t,n;let i=(0,s.c)(6),{children:l,documentId:r,documentType:a}=e;i[0]!==r||i[1]!==a?(t={intent:"edit",params:{id:r,type:a}},i[0]=r,i[1]=a,i[2]=t):t=i[2];let{href:d}=(0,j.PM)(t);return i[3]!==l||i[4]!==d?(n=(0,o.jsx)(np,{href:d,target:"_blank",rel:"noopener noreferrer",children:l}),i[3]=l,i[4]=d,i[5]=n):n=i[5],n},nh=e=>{let t,n,i,l,a,d,p,m;let h=(0,s.c)(24),{documentId:f}=e,{documents:x,state:g,mode:b}=t5(),{exitDiffView:y}=t2(),v=function(){let e;let t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=new E.x,t[0]=e):e=t[0],e}(),[j,_]=(0,c.useState)(null),[w,k]=(0,c.useState)(null),C=(0,c.useContext)(u.kp);return h[0]!==C?(n={...C,disableNew:!0,EditReferenceLinkComponent:nm},h[0]=C,h[1]=n):n=h[1],t=n,h[2]!==w||h[3]!==j?(i=[j,w],h[2]=w,h[3]=j,h[4]=i):i=h[4],function(e){let t,n;let i=(0,s.c)(3);i[0]!==e?(t=()=>{let t=e.filter(t6);if(0===t.length)return;let n=new Z.ZP(t);return()=>n.destroy()},n=[e],i[0]=e,i[1]=t,i[2]=n):(t=i[1],n=i[2]),(0,c.useEffect)(t,n)}(i),h[5]!==f||h[6]!==b||h[7]!==g?(l="version"===b&&(0,o.jsx)(t9,{documentId:f,state:g}),h[5]=f,h[6]=b,h[7]=g,h[8]=l):l=h[8],h[9]!==x||h[10]!==w||h[11]!==j||h[12]!==g||h[13]!==v?(a="ready"===g&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(nd,{documentType:x.previous.type,documentId:x.previous.id,role:"previous",ref:_,scrollElement:j,syncChannel:v,compareDocument:x.previous}),(0,o.jsx)(nd,{documentType:x.next.type,documentId:x.next.id,role:"next",ref:k,scrollElement:w,syncChannel:v,compareDocument:x.previous})]}),h[9]=x,h[10]=w,h[11]=j,h[12]=g,h[13]=v,h[14]=a):a=h[14],h[15]!==l||h[16]!==a?(d=(0,o.jsxs)(nn,{children:[l,a]}),h[15]=l,h[16]=a,h[17]=d):d=h[17],h[18]!==y||h[19]!==d?(p=(0,o.jsx)(r.Vq,{id:"diffView",width:"auto",onClose:y,padding:!1,__unstable_hideCloseButton:!0,children:d}),h[18]=y,h[19]=d,h[20]=p):p=h[20],h[21]!==t||h[22]!==p?(m=(0,o.jsx)(u.kp.Provider,{value:t,children:p}),h[21]=t,h[22]=p,h[23]=m):m=h[23],m},nf=e=>{let t,n,i;let r=(0,s.c)(9),{children:a,documentId:c}=e,u=(0,d.pm)(),{t:p}=(0,m.$G7)(l.UA);r[0]!==p||r[1]!==u?(t={onParamsError:e=>{u.push({id:"diffViewParamsParsingError",status:"error",title:p("compare-version.error.invalidParams.title"),description:(0,o.jsx)("ul",{children:e.map(e=>{let[t,n]=e;return(0,o.jsx)("li",{children:p(`compare-version.error.${t}`,{input:n})},t)})})})}},r[0]=p,r[1]=u,r[2]=t):t=r[2];let{isActive:h}=t5(t);return r[3]!==c||r[4]!==h?(n=h&&(0,o.jsx)(nh,{documentId:c}),r[3]=c,r[4]=h,r[5]=n):n=r[5],r[6]!==a||r[7]!==n?(i=(0,o.jsxs)(o.Fragment,{children:[a,n]}),r[6]=a,r[7]=n,r[8]=i):i=r[8],i};function nx(e){let t,n,i;let l=(0,s.c)(12),{children:r,currentMinWidth:d,flex:c,minWidth:u,paneKey:p,title:m,tone:h}=e,f=void 0===m?"Error":m,x=void 0===h?"critical":h;return l[0]!==f?(t=(0,o.jsx)(tj,{title:f}),l[0]=f,l[1]=t):t=l[1],l[2]!==r?(n=(0,o.jsx)(ti,{overflow:"auto",children:(0,o.jsx)(a.xu,{paddingX:4,paddingY:5,children:r})}),l[2]=r,l[3]=n):n=l[3],l[4]!==d||l[5]!==c||l[6]!==u||l[7]!==p||l[8]!==t||l[9]!==n||l[10]!==x?(i=(0,o.jsxs)(te,{currentMinWidth:d,flex:c,id:p,minWidth:u,tone:x,children:[t,n]}),l[4]=d,l[5]=c,l[6]=u,l[7]=p,l[8]=t,l[9]=n,l[10]=x,l[11]=i):i=l[11],i}function ng(e){let t=[{ms:300,messageKey:"panes.resolving.default-message"},{ms:5e3,messageKey:"panes.resolving.slow-resolve-message"}];if(m.r8Q){let n=["Check console for errors?","Is your observable/promise resolving?",e.length>0?`Structure path: ${e.join("  ")}`:""];t.push({ms:1e4,message:n.join(`
`)})}let n=(0,z.of)(null);return(0,A.T)(...t.map(e=>n.pipe((0,en.h)("messageKey"in e?{messageKey:e.messageKey}:{message:e.message}),(0,ei.g)(e.ms))))}let nb=(0,x.zo)(a.kC)`
  opacity: 0;
  transition: opacity 200ms;

  &[data-mounted] {
    opacity: 1;
  }
`,ny=(0,c.memo)(e=>{let t,n,i,r,a,u,p,h,f,x;let g=(0,s.c)(28),{delay:b,flex:y,message:v,minWidth:j,paneKey:_,path:w,selected:k,title:C,tone:S}=e,z=void 0===b?300:b,E=void 0===v?ng:v,{t:I}=(0,m.$G7)(l.UA);e:{if("function"==typeof E){let e;g[0]!==E||g[1]!==w?(e=E(w?w.split(";"):[]),g[0]=E,g[1]=w,g[2]=e):e=g[2],t=e;break e}t=E}let $=t;g[3]!==$||g[4]!==I?(n=()=>"string"==typeof $?$:I("panes.resolving.default-message"),g[3]=$,g[4]=I,g[5]=n):n=g[5];let[P,A]=(0,c.useState)(n);g[6]!==$||g[7]!==I?(i=()=>{if("object"!=typeof $||"function"!=typeof $.subscribe)return;let e=$.subscribe(e=>{A("messageKey"in e?I(e.messageKey):e.message)});return()=>e.unsubscribe()},r=[$,I],g[6]=$,g[7]=I,g[8]=i,g[9]=r):(i=g[8],r=g[9]),(0,c.useEffect)(i,r);let[T,R]=(0,c.useState)(null),[M,D]=(0,c.useState)(!1);g[10]!==T?(a=()=>{if(T)return(0,d.RE)(()=>D(!0))},u=[T],g[10]=T,g[11]=a,g[12]=u):(a=g[11],u=g[12]),(0,c.useEffect)(a,u);let L=M?"":void 0,N=C||P;g[13]!==N?(p=(0,o.jsx)(m.Bwn,{showText:!0,title:N}),g[13]=N,g[14]=p):p=g[14],g[15]!==p||g[16]!==L?(h=(0,o.jsx)(nb,{align:"center","data-mounted":L,direction:"column",height:"fill",justify:"center",ref:R,children:p}),g[15]=p,g[16]=L,g[17]=h):h=g[17];let O=h;return g[18]!==O||g[19]!==z?(f=(0,o.jsx)(ti,{children:O}),g[18]=O,g[19]=z,g[20]=f):f=g[20],g[21]!==y||g[22]!==j||g[23]!==_||g[24]!==k||g[25]!==f||g[26]!==S?(x=(0,o.jsx)(te,{flex:y,id:_,minWidth:j,selected:k,tone:S,children:f}),g[21]=y,g[22]=j,g[23]=_,g[24]=k,g[25]=f,g[26]=S,g[27]=x):x=g[27],x});function nv(){let e=(0,c.useContext)(u.cO);if(!e)throw Error("DocumentPane: missing context value");return e}function nj(e){let t,n;let i=(0,s.c)(8),{children:l,documentId:r,documentType:a}=e;return i[0]!==l||i[1]!==r||i[2]!==a?(t=(0,o.jsx)(n_,{documentId:r,documentType:a,children:l}),i[0]=l,i[1]=r,i[2]=a,i[3]=t):t=i[3],i[4]!==r||i[5]!==a||i[6]!==t?(n=(0,o.jsx)(m.EM1,{documentId:r,documentType:a,children:t}),i[4]=r,i[5]=a,i[6]=t,i[7]=n):n=i[7],n}function n_(e){let t,n,i,l,r,a;let d=(0,s.c)(25),{children:u,documentId:p,documentType:h}=e,{enabled:f}=(0,m.g7N)(),{connectionState:x,onPathOpen:g,inspector:b,openInspector:y}=nv(),{selectedReleaseId:v}=(0,m.Wc0)(),{params:j,setParams:_,createPathWithParams:w}=eF(),{studioUrl:k}=(0,m.cx5)(window.location.origin),C=j?.comment,S=(0,c.useRef)(j);d[0]!==j?(t=()=>{S.current=j},n=[j],d[0]=j,d[1]=t,d[2]=n):(t=d[1],n=d[2]),(0,c.useLayoutEffect)(t,n),d[3]!==w||d[4]!==k?(i=e=>{let t=w({...S.current,comment:e,inspect:m.q$K});return`${k}${t}`},d[3]=w,d[4]=k,d[5]=i):i=d[5];let z=i;d[6]!==_?(l=()=>{_({...S.current,comment:void 0})},d[6]=_,d[7]=l):l=d[7];let E=l;d[8]!==b?.name||d[9]!==y?(r=()=>{b?.name!==m.q$K&&y(m.q$K)},d[8]=b?.name,d[9]=y,d[10]=r):r=d[10];let I=r;if(!f){let e;return d[11]!==u?(e=(0,o.jsx)(o.Fragment,{children:u}),d[11]=u,d[12]=e):e=d[12],e}let $=b?.name===m.q$K,P="connecting"===x;return d[13]!==u||d[14]!==p||d[15]!==h||d[16]!==z||d[17]!==E||d[18]!==I||d[19]!==g||d[20]!==C||d[21]!==v||d[22]!==$||d[23]!==P?(a=(0,o.jsx)(m.Cr6,{documentId:p,documentType:h,getCommentLink:z,isCommentsOpen:$,isConnecting:P,onClearSelectedComment:E,onCommentsOpen:I,onPathOpen:g,selectedCommentId:C,sortOrder:"desc",type:"field",releaseId:v,children:u}),d[13]=u,d[14]=p,d[15]=h,d[16]=z,d[17]=E,d[18]=I,d[19]=g,d[20]=C,d[21]=v,d[22]=$,d[23]=P,d[24]=a):a=d[24],a}function nw({displayed:e,documentId:t}){let{selectedReleaseId:n}=(0,m.Wc0)(),{data:i}=(0,m.F6R)(),{data:l}=(0,m.vlT)(),{data:r}=(0,m.vUZ)({documentId:t}),o=e&&!e._createdAt,{params:s}=eF();return(0,c.useMemo)(()=>{if(!r)return{notCurrentReleases:[],currentReleases:[],inCreation:null};let t=r.map(e=>(0,m.eBk)(e)),a=i.reduce((i,l)=>{let r=t.includes((0,m.QXs)(l._id)),s=(0,m.QXs)(l._id);return o&&s===(0,m.eBk)(e._id||"")&&s===n?i.inCreation=l:r?i.currentReleases.push(l):i.notCurrentReleases.push(l),i},{notCurrentReleases:[],currentReleases:[],inCreation:null});if(!s?.historyVersion)return a;let d=l.find(e=>(0,m.QXs)(e._id)===s?.historyVersion);return d?.state==="archived"&&a.currentReleases.push(d),a},[l,o,e?._id,r,s?.historyVersion,i,n])}function nk({displayed:e,documentId:t,editState:n}){let{document:{drafts:{enabled:i}}}=(0,m.cFj)(),l=nw({displayed:e,documentId:t}),r=[n?.published?._id,i?n?.draft?._id:[]].flat(),o=l.currentReleases.map(e=>n?.id&&(0,m.XLS)(n.id,(0,m.QXs)(e._id))),s=r.concat(o).filter(e=>"string"==typeof e),a=(0,c.useMemo)(()=>s.findIndex(t=>t===e?._id),[e?._id,s]),d=(0,c.useMemo)(()=>s[a-1]??void 0,[a,s]),u=(0,c.useMemo)(()=>s[a+1]??void 0,[a,s]);return{position:a,previousId:d,nextId:u,stack:s}}function nC(){let e=(0,c.useContext)(u.r1);if(!e)throw Error("StructureTool: missing context value");return e}ny.displayName="Memo(LoadingPane)";let nS={},nz="inspect:",nE=[{id:"inspectors"},{id:"links"}],nI="sanity/structure/history";function n$(e){let{documentId:t,documentType:n,inspectors:i,onMenuItems:l}=e,r=i.length,[a,d]=(0,c.useState)(()=>Array.from(Array(r)));(0,c.useEffect)(()=>{if(a.length!==r){let e=Array.from(Array(r));for(let t=0;t<r;t++)e[t]=a[t];d(e)}},[r,a]);let u=(0,c.useCallback)((e,t)=>{d(n=>{let i=[...n];return i[e]=t,i})},[]);(0,c.useEffect)(()=>{l(a.filter(Boolean))},[a,l]);let p=(0,c.useMemo)(()=>i.map((e,i)=>e.useMenuItem?[function({documentId:e,documentType:t,index:n,setMenuItem:i,useMenuItem:l}){return(0,c.memo)(function(){let r,o,a;let d=(0,s.c)(4);d[0]===Symbol.for("react.memo_cache_sentinel")?(r={documentId:e,documentType:t},d[0]=r):r=d[0];let u=l(r),p=(0,m.BoV)(u);return d[1]!==p?(o=()=>{i(n,p)},a=[p],d[1]=p,d[2]=o,d[3]=a):(o=d[2],a=d[3]),(0,c.useEffect)(o,a),null})}({documentId:t,documentType:n,index:i,setMenuItem:u,useMenuItem:e.useMenuItem}),e.name]:[()=>null,""]),[t,n,i,u]);return(0,o.jsx)(o.Fragment,{children:p.map(([e,t])=>t&&(0,o.jsx)(e,{},t))})}function nP(){let e,t;let n=(0,s.c)(19),{connectionState:i,schemaType:r,title:o,displayed:a}=nv(),{t:d}=(0,m.$G7)(l.UA),c=!!a;n[0]!==a||n[1]!==r||n[2]!==c?(e={enabled:c,schemaType:r,value:a},n[0]=a,n[1]=r,n[2]=c,n[3]=e):e=n[3];let{error:u,value:p}=(0,m._2T)(e);if("connecting"===i&&!c){let e;return n[4]===Symbol.for("react.memo_cache_sentinel")?(e={error:void 0,title:void 0},n[4]=e):e=n[4],e}if(o){let e;return n[5]!==o?(e={error:void 0,title:o},n[5]=o,n[6]=e):e=n[6],e}if(!a){let e,t;let i=r?.title||r?.name;return n[7]!==d||n[8]!==i?(e=d("panes.document-header-title.new.text",{schemaType:i}),n[7]=d,n[8]=i,n[9]=e):e=n[9],n[10]!==e?(t={error:void 0,title:e},n[10]=e,n[11]=t):t=n[11],t}if(u){let e,t;return n[12]!==u.message||n[13]!==d?(e=d("panes.document-list-pane.error.text",{error:u.message}),n[12]=u.message,n[13]=d,n[14]=e):e=n[14],n[15]!==e?(t={error:e,title:void 0},n[15]=e,n[16]=t):t=n[16],t}let h=p?.title;return n[17]!==h?(t={error:void 0,title:h},n[17]=h,n[18]=t):t=n[18],t}n$.displayName="DocumentInspectorMenuItemsResolver";let nA=["patch","commit"],nT=(0,c.memo)(function(){let e,t,n,i,r;let a=(0,s.c)(12),{push:u}=(0,d.pm)(),{documentId:p,documentType:h,value:f}=nv(),x=nP(),g=x.error,b=(0,m.E6V)(p,h),y=(0,c.useRef)(b),v=eF(),{t:j}=(0,m.$G7)(l.UA);e:{if(!x.title&&!g&&!nA.includes(b?.op)&&"string"==typeof f.title&&b?.type==="success"){e=f.title;break e}e=x.title}let _=e;a[0]!==j||a[1]!==_?(t=_||j("panes.document-operation-results.operation-undefined-title"),a[0]=j,a[1]=_,a[2]=t):t=a[2];let w=t;a[3]!==w?(n=w.length>25?`${w.slice(0,25)}...`:w,a[3]=w,a[4]=n):n=a[4];let k=n;return a[5]!==k||a[6]!==b||a[7]!==v||a[8]!==u||a[9]!==j?(i=()=>{let e;if(b&&b!==y.current)return"error"===b.type&&u({closable:!0,duration:3e4,status:"error",title:j("panes.document-operation-results.operation-error",{context:b.op}),description:(0,o.jsxs)("details",{children:[(0,o.jsx)("summary",{children:j("panes.document-operation-results.error.summary.title")}),b.error.message]})}),"success"!==b.type||nA.includes(b.op)||u({closable:!0,status:"success",title:(0,o.jsx)(m.vNl,{context:b.op,i18nKey:"panes.document-operation-results.operation-success",t:j,values:{op:b.op,title:k},components:{Strong:"strong"}})}),"success"===b.type&&"delete"===b.op&&(e=setTimeout(()=>v.closeCurrentAndAfter(),0)),y.current=b,()=>clearTimeout(e)},r=[b,v,u,j,k],a[5]=k,a[6]=b,a[7]=v,a[8]=u,a[9]=j,a[10]=i,a[11]=r):(i=a[10],r=a[11]),(0,c.useEffect)(i,r),null}),nR=e=>!0===e.liveEdit,nM=(0,x.zo)(a.Zb)({position:"relative",zIndex:1,lineHeight:0});function nD(e){let t,n,i,d,c,u,h,f,x,g,b,y;let v=(0,s.c)(25);v[0]!==e?({as:i,children:t,closeButtonLabel:n,onClose:d,title:u,...c}=e,v[0]=e,v[1]=t,v[2]=n,v[3]=i,v[4]=d,v[5]=c,v[6]=u):(t=v[1],n=v[2],i=v[3],d=v[4],c=v[5],u=v[6]);let{t:j}=(0,m.$G7)(l.UA);return v[7]!==u?(h=(0,o.jsx)(a.xu,{flex:1,padding:3,children:(0,o.jsx)(a.xv,{as:"h1",size:1,weight:"medium",children:u})}),v[7]=u,v[8]=h):h=v[8],v[9]!==j?(f=j("document-inspector.close-button.tooltip"),v[9]=j,v[10]=f):f=v[10],v[11]!==f?(x={content:f},v[11]=f,v[12]=x):x=v[12],v[13]!==n||v[14]!==d||v[15]!==x?(g=(0,o.jsx)(a.xu,{flex:"none",padding:1,children:(0,o.jsx)(r.zx,{"aria-label":n,icon:p.Two,mode:"bleed",onClick:d,tooltipProps:x})}),v[13]=n,v[14]=d,v[15]=x,v[16]=g):g=v[16],v[17]!==h||v[18]!==g?(b=(0,o.jsxs)(a.kC,{padding:2,children:[h,g]}),v[17]=h,v[18]=g,v[19]=b):b=v[19],v[20]!==t||v[21]!==i||v[22]!==c||v[23]!==b?(y=(0,o.jsxs)(nM,{...c,as:i,children:[b,t]}),v[20]=t,v[21]=i,v[22]=c,v[23]=b,v[24]=y):y=v[24],y}function nL(e){let t,n,i;let l=(0,s.c)(14),{documentId:r,documentType:d,flex:c}=e,{collapsed:u}=tn(),{closeInspector:p,inspector:h}=nv(),{features:f}=nC();l[0]!==p||l[1]!==h?(t=()=>{h&&p(h.name)},l[0]=p,l[1]=h,l[2]=t):t=l[2];let x=t;if(u||!h)return null;let g=h.component;l[3]!==g||l[4]!==r||l[5]!==d||l[6]!==x?(n=(0,o.jsx)(g,{onClose:x,documentId:r,documentType:d}),l[3]=g,l[4]=r,l[5]=d,l[6]=x,l[7]=n):n=l[7];let b=n;if(f.resizablePanes){let e;return l[8]!==b||l[9]!==c?(e=(0,o.jsx)(m.ezf,{as:"aside","data-ui":"DocumentInspectorPanel",flex:c,resizerPosition:"left",maxWidth:540,minWidth:320,children:b}),l[8]=b,l[9]=c,l[10]=e):e=l[10],e}return l[11]!==b||l[12]!==c?(i=(0,o.jsx)(a.xu,{as:"aside","data-ui":"DocumentInspectorPanel",flex:c,children:b}),l[11]=b,l[12]=c,l[13]=i):i=l[13],i}function nN(e,t,n){let i,l,r,o,a;let d=(0,s.c)(16),c=(0,m.tJW)();d[0]!==t||d[1]!==e?(i=["studio.structure-tool",e,t].filter(Boolean),d[0]=t,d[1]=e,d[2]=i):i=d[2];let u=i.join(".");if(d[3]!==n||d[4]!==c||d[5]!==u){let e;d[7]!==n?(e=e=>null===e?n:e,d[7]=n,d[8]=e):e=d[8],r=c.getKey(u).pipe((0,P.U)(e)),d[3]=n,d[4]=c,d[5]=u,d[6]=r}else r=d[6];l=r;let p=(0,v.m)(l,n);d[9]!==c||d[10]!==u||d[11]!==p?(o=e=>{e!==p&&c.setKey(u,e)},d[9]=c,d[10]=u,d[11]=p,d[12]=o):o=d[12];let h=o;return d[13]!==h||d[14]!==p?(a=[p,h],d[13]=h,d[14]=p,d[15]=a):a=d[15],a}let nO={id:"parsed",title:"document-inspector.view-mode.parsed"},nU={id:"raw",title:"document-inspector.view-mode.raw-json"},nB=[nO,nU],nV=new eu({maxSize:1e3});function nG(e){let{path:t}=e,n=nV.get(t);void 0!==n&&nV.set(t,!n)}function nF(e){let t=window.getSelection();if(t){let n=document.createRange();t.removeAllRanges(),n.selectNodeContents(e),t.addRange(n)}}function nK(e){nF(e.currentTarget)}function nW(e){65===e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),nF(e.currentTarget))}let nX=x.zo.div(({theme:e})=>{let{color:t,fonts:n,space:i}=e.sanity;return(0,x.iv)`
    & .json-inspector,
    & .json-inspector .json-inspector__selection {
      font-family: ${n.code.family};
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
      color: var(--card-code-fg-color);
    }

    & .json-inspector .json-inspector__leaf {
      padding-left: ${(0,a.hO)(i[4])};
    }

    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {
      padding-top: ${(0,a.hO)(i[3])};
      padding-left: 0;
    }

    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {
      display: none;
    }

    & .json-inspector .json-inspector__line {
      display: block;
      position: relative;
      cursor: default;
    }

    & .json-inspector .json-inspector__line::after {
      content: '';
      position: absolute;
      top: 0;
      left: -200px;
      right: -50px;
      bottom: 0;
      z-index: -1;
      pointer-events: none;
    }

    & .json-inspector .json-inspector__line:hover::after {
      background: var(--card-code-bg-color);
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {
      cursor: pointer;
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {
      content: ' ';
      margin-left: calc(0 - ${(0,a.hO)(i[4])} + 3px);
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
    }

    &
      .json-inspector
      .json-inspector__leaf_expanded.json-inspector__leaf_composite
      > .json-inspector__line::before {
      content: ' ';
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
    }

    & .json-inspector .json-inspector__radio,
    & .json-inspector .json-inspector__flatpath {
      display: none;
    }

    & .json-inspector .json-inspector__value {
      margin-left: ${(0,a.hO)(i[4]/2)};
    }

    &
      .json-inspector
      > .json-inspector__leaf_root
      > .json-inspector__line
      > .json-inspector__key
      + .json-inspector__value {
      margin: 0;
    }

    & .json-inspector .json-inspector__key {
      color: ${t.syntax.property};
    }

    & .json-inspector .json-inspector__value_helper,
    & .json-inspector .json-inspector__value_null {
      color: ${t.syntax.constant};
    }

    & .json-inspector .json-inspector__not-found {
      padding-top: ${(0,a.hO)(i[3])};
    }

    & .json-inspector .json-inspector__value_string {
      color: ${t.syntax.string};
    }

    & .json-inspector .json-inspector__value_boolean {
      color: ${t.syntax.boolean};
    }

    & .json-inspector .json-inspector__value_number {
      color: ${t.syntax.number};
    }

    & .json-inspector .json-inspector__show-original {
      display: inline-block;
      padding: 0 6px;
      cursor: pointer;
    }

    & .json-inspector .json-inspector__show-original:hover {
      color: inherit;
    }

    & .json-inspector .json-inspector__show-original::before {
      content: '';
    }

    & .json-inspector .json-inspector__show-original:hover::after {
      content: ' expand';
    }
  `});function nH(e){let t,n,i;let r=(0,s.c)(8),{onChange:d,query:c}=e;r[0]!==d?(t=e=>d(e.target.value),r[0]=d,r[1]=t):t=r[1];let u=t,{t:h}=(0,m.$G7)(l.UA);r[2]!==h?(n=h("document-inspector.search.placeholder"),r[2]=h,r[3]=n):n=r[3];let f=c||"";return r[4]!==u||r[5]!==n||r[6]!==f?(i=(0,o.jsx)(a.oi,{icon:p.W1M,onChange:u,placeholder:n,radius:2,value:f}),r[4]=u,r[5]=n,r[6]=f,r[7]=i):i=r[7],i}function nq(e){let t,n,i,c,u,p,h,f,x,g,b,y,v,j,_,w;let k=(0,s.c)(49),{value:C}=e,{onInspectClose:S,paneKey:z}=nv(),E=`${z}_inspect_`,[I,$]=nN("inspect-view-mode",null,"parsed");k[0]!==I?(t=nB.find(e=>e.id===I),k[0]=I,k[1]=t):t=k[1];let P=t;k[2]!==$?(n=()=>{$(nO.id)},k[2]=$,k[3]=n):n=k[3];let A=n;k[4]!==$?(i=()=>{$(nU.id)},k[4]=$,k[5]=i):i=k[5];let T=i,{t:R}=(0,m.$G7)(l.UA),M=`${E}dialog`;k[6]!==R||k[7]!==C?(c=(0,m.Uy$)(C)&&(0,m.HD0)(C._id)&&(0,m.HD0)(C._type)?(0,o.jsx)(m.vNl,{t:R,i18nKey:"document-inspector.dialog.title",components:{DocumentTitle:()=>(0,o.jsx)("em",{children:(0,o.jsx)(eP,{document:C})})}}):(0,o.jsx)("em",{children:R("document-inspector.dialog.title-no-value")}),k[6]=R,k[7]=C,k[8]=c):c=k[8],k[9]===Symbol.for("react.memo_cache_sentinel")?(u={position:"sticky",bottom:0,zIndex:3},k[9]=u):u=k[9];let D=`${E}tabpanel`,L=`${E}tab-${nO.id}`;k[10]!==R?(p=R(nO.title),k[10]=R,k[11]=p):p=k[11];let N=P===nO;k[12]!==A||k[13]!==D||k[14]!==L||k[15]!==p||k[16]!==N?(h=(0,o.jsx)(r.OK,{"aria-controls":D,id:L,label:p,onClick:A,selected:N}),k[12]=A,k[13]=D,k[14]=L,k[15]=p,k[16]=N,k[17]=h):h=k[17];let O=`${E}tabpanel`,U=`${E}tab-${nU.id}`;k[18]!==R?(f=R(nU.title),k[18]=R,k[19]=f):f=k[19];let B=P===nU;k[20]!==T||k[21]!==O||k[22]!==U||k[23]!==f||k[24]!==B?(x=(0,o.jsx)(r.OK,{"aria-controls":O,id:U,label:f,onClick:T,selected:B}),k[20]=T,k[21]=O,k[22]=U,k[23]=f,k[24]=B,k[25]=x):x=k[25],k[26]!==h||k[27]!==x?(g=(0,o.jsx)(a.Zb,{padding:3,paddingTop:0,shadow:1,style:u,children:(0,o.jsxs)(a.td,{space:1,children:[h,x]})}),k[26]=h,k[27]=x,k[28]=g):g=k[28];let V=`${E}tab-${I}`,G=`${E}tabpanel`;return k[29]===Symbol.for("react.memo_cache_sentinel")?(b={outline:"none"},k[29]=b):b=k[29],k[30]!==C||k[31]!==P?(y=P===nO&&(0,o.jsx)(nX,{children:(0,o.jsx)(ec.P,{data:C,isExpanded:function e(t,n){let i=nV.get(t);return void 0===i?(nV.set(t,Array.isArray(n)||(0,m.Uy$)(n)),e(t,n)):i},onClick:nG,search:nH,filterOptions:{ignoreCase:!0}})}),k[30]=C,k[31]=P,k[32]=y):y=k[32],k[33]!==C||k[34]!==P?(v=P===nU&&(0,o.jsx)(a.EK,{language:"json",tabIndex:0,onKeyDown:nW,onDoubleClick:nK,onFocus:nK,size:1,children:JSON.stringify(C,null,2)}),k[33]=C,k[34]=P,k[35]=v):v=k[35],k[36]!==V||k[37]!==G||k[38]!==y||k[39]!==v?(j=(0,o.jsxs)(d.x4,{"aria-labelledby":V,flex:1,id:G,overflow:"auto",padding:4,style:b,children:[y,v]}),k[36]=V,k[37]=G,k[38]=y,k[39]=v,k[40]=j):j=k[40],k[41]!==g||k[42]!==j?(_=(0,o.jsxs)(a.kC,{direction:"column",height:"fill",children:[g,j]}),k[41]=g,k[42]=j,k[43]=_):_=k[43],k[44]!==S||k[45]!==_||k[46]!==M||k[47]!==c?(w=(0,o.jsx)(r.Vq,{bodyHeight:"fill",id:M,header:c,onClose:S,onClickOutside:S,padding:!1,width:2,children:_}),k[44]=S,k[45]=_,k[46]=M,k[47]=c,k[48]=w):w=k[48],w}function nY(e){let t,n,i,l,d,c,u,p,m,h,f;let x=(0,s.c)(22);x[0]!==e?({action:n,content:i,icon:t,tone:d,paddingY:c,...l}=e,x[0]=e,x[1]=t,x[2]=n,x[3]=i,x[4]=l,x[5]=d,x[6]=c):(t=x[1],n=x[2],i=x[3],l=x[4],d=x[5],c=x[6]);let g=void 0===d?"transparent":d,b=void 0===c?2:c;return x[7]!==t?(u=t&&(0,o.jsx)(a.xv,{size:0,children:(0,o.jsx)(t,{})}),x[7]=t,x[8]=u):u=x[8],x[9]!==i?(p=(0,o.jsx)(a.kC,{align:"center",flex:1,gap:2,paddingY:2,children:i}),x[9]=i,x[10]=p):p=x[10],x[11]!==n?(m=n&&(0,o.jsx)(r.zx,{...n,mode:n.mode||"ghost",tone:n.tone||"default"}),x[11]=n,x[12]=m):m=x[12],x[13]!==u||x[14]!==p||x[15]!==m?(h=(0,o.jsxs)(a.kC,{align:"center",gap:3,paddingX:2,children:[u,p,m]}),x[13]=u,x[14]=p,x[15]=m,x[16]=h):h=x[16],x[17]!==b||x[18]!==l||x[19]!==h||x[20]!==g?(f=(0,o.jsx)(a.xu,{padding:1,children:(0,o.jsx)(a.Zb,{radius:3,paddingX:2,paddingY:b,tone:g,...l,children:h})}),x[17]=b,x[18]=l,x[19]=h,x[20]=g,x[21]=f):f=x[21],f}function nZ(){let e=(0,s.c)(3),{isDeleted:t,isDeleting:n,ready:i}=nv(),{selectedPerspective:l}=(0,m.Wc0)();if(!i)return null;if(!(0,m.Vb0)(l)&&!(0,m.iTL)(l)&&"archived"===l.state){let t;return e[0]!==l?(t=(0,o.jsx)(nQ,{release:l}),e[0]=l,e[1]=t):t=e[1],t}if(t&&!n){let t;return e[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(nJ,{}),e[2]=t):t=e[2],t}}function nJ(){let e,t,n,i,r,d;let c=(0,s.c)(17),{documentId:u,documentType:h}=nv(),{restore:f}=(0,m.d9t)(u,h),{navigateIntent:x}=(0,j.tv)();c[0]!==u||c[1]!==h||c[2]!==x||c[3]!==f?(e=()=>{f.execute("lastRevision"),x("edit",{id:u,type:h})},c[0]=u,c[1]=h,c[2]=x,c[3]=f,c[4]=e):e=c[4];let g=e,{t:b}=(0,m.$G7)(l.UA);return c[5]!==b?(t=b("banners.deleted-document-banner.restore-button.text"),c[5]=b,c[6]=t):t=c[6],c[7]!==g||c[8]!==t?(n={onClick:g,text:t},c[7]=g,c[8]=t,c[9]=n):n=c[9],c[10]!==b?(i=b("banners.deleted-document-banner.text"),c[10]=b,c[11]=i):i=c[11],c[12]!==i?(r=(0,o.jsx)(a.xv,{size:1,weight:"medium",children:i}),c[12]=i,c[13]=r):r=c[13],c[14]!==n||c[15]!==r?(d=(0,o.jsx)(nY,{action:n,content:r,"data-testid":"deleted-document-banner",icon:p.CPA}),c[14]=n,c[15]=r,c[16]=d):d=c[16],d}let nQ=e=>{let t,n,i;let l=(0,s.c)(8),{release:r}=e,{t:d}=(0,m.$G7)();return l[0]!==r.metadata?.title||l[1]!==d?(t=r.metadata?.title||d("release.placeholder-untitled-release"),l[0]=r.metadata?.title,l[1]=d,l[2]=t):t=l[2],l[3]!==t?(n={title:t},l[3]=t,l[4]=n):n=l[4],l[5]!==d||l[6]!==n?(i=(0,o.jsx)(nY,{tone:"caution",content:(0,o.jsx)(a.xv,{size:1,weight:"medium",children:(0,o.jsx)(m.vNl,{t:d,i18nKey:"banners.deleted-release-banner.text",values:n})}),"data-testid":"deleted-release-banner",icon:p.yWI}),l[5]=d,l[6]=n,l[7]=i):i=l[7],i};function n0(){let e,t;let n=(0,s.c)(5),{schemaType:i}=nv(),{t:r}=(0,m.$G7)(l.UA);return(0,h.Ax)(i)?(n[0]!==r?(e=(0,o.jsx)(m.vNl,{t:r,i18nKey:"banners.deprecated-document-type-banner.text"}),n[0]=r,n[1]=e):e=n[1],n[2]!==i.deprecated.reason||n[3]!==e?(t=(0,o.jsx)(nY,{content:(0,o.jsxs)(a.xv,{size:1,weight:"medium",children:[e," ",i.deprecated.reason]}),"data-testid":"deprecated-document-type-banner",icon:p.uIy}),n[2]=i.deprecated.reason,n[3]=e,n[4]=t):t=n[4],t):null}let n1=(0,em.dS)({name:"Ask To Edit Dialog Opened",version:1,description:'User clicked the "Ask to edit" button in the document permissions banner'}),n2=(0,em.dS)({name:"Ask To Edit Request Sent",version:1,description:"User sent a role change request from the dialog"}),n3=(0,x.zo)(a.xu)`
  box-sizing: border-box;
`;function n4(e){let t,n,i,u,p,h,f,x,g,b,y,j,_,w,k;let C=(0,s.c)(56),{onClose:S,onRequestSubmitted:E}=e,{t:I}=(0,m.$G7)(l.UA),$=(0,ep.f1)(),A=`request-permissions-${(0,c.useId)()}`,M=(0,m.vpR)();C[0]===Symbol.for("react.memo_cache_sentinel")?(t={apiVersion:"2024-09-26"},C[0]=t):t=C[0];let D=(0,m.m85)(t),L=(0,d.pm)(),N=(0,m.Cnp)(),[O,U]=(0,c.useState)(!1),[B,V]=(0,c.useState)(""),[G,F]=(0,c.useState)(),[K,W]=(0,c.useState)(!1),[X,H]=(0,c.useState)(!1);e:{let e;let t="administrator";if(!M||!D){let e;C[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,z.of)(t),C[1]=e):e=C[1],n=e;break e}if(C[2]!==D.observable||C[3]!==M){let n,i;C[5]===Symbol.for("react.memo_cache_sentinel")?(n=e=>e.filter(n6).find(n5)?"editor":t,C[5]=n):n=C[5],C[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>(0,z.of)(t),C[6]=i):i=C[6],e=D.observable.request({url:`/projects/${M}/roles`}).pipe((0,P.U)(n),(0,T.O)(t),(0,R.K)(i)),C[2]=D.observable,C[3]=M,C[4]=e}else e=C[4];n=e}let q=(0,v.m)(n);C[7]!==D||C[8]!==B||C[9]!==E||C[10]!==M||C[11]!==q||C[12]!==$||C[13]!==L?(i=()=>{U(!0),D.request({url:`/access/project/${M}/requests`,method:"post",body:{note:B,requestUrl:window?.location.href,requestedRole:q,type:"role"}}).then(e=>{e&&(E&&E(),$.log(n2),L.push({title:"Edit access requested"}))}).catch(e=>{let t=e?.response?.statusCode,n=e?.response?.body?.message;429===t&&(W(!0),F(n)),409===t?(H(!0),F(n)):L.push({title:"There was a problem submitting your request.",status:"error"})}).finally(()=>{U(!1)})},C[7]=D,C[8]=B,C[9]=E,C[10]=M,C[11]=q,C[12]=$,C[13]=L,C[14]=i):i=C[14];let Y=i,Z=N.fullscreen;C[15]!==I?(u=I("request-permission-dialog.header.text"),C[15]=I,C[16]=u):u=C[16],C[17]!==I?(p=I("confirm-dialog.cancel-button.fallback-text"),C[17]=I,C[18]=p):p=C[18],C[19]!==S||C[20]!==p?(h={onClick:S,text:p},C[19]=S,C[20]=p,C[21]=h):h=C[21];let J=K||X;return C[22]!==I?(f=I("request-permission-dialog.confirm-button.text"),C[22]=I,C[23]=f):f=C[23],C[24]!==O||C[25]!==Y||C[26]!==J||C[27]!==f?(x={onClick:Y,loading:O,disabled:J,text:f,tone:"primary",type:"submit"},C[24]=O,C[25]=Y,C[26]=J,C[27]=f,C[28]=x):x=C[28],C[29]!==x||C[30]!==h?(g={cancelButton:h,confirmButton:x},C[29]=x,C[30]=h,C[31]=g):g=C[31],C[32]!==I?(b=I("request-permission-dialog.description.text"),C[32]=I,C[33]=b):b=C[33],C[34]!==b?(y=(0,o.jsx)(a.xv,{children:b}),C[34]=b,C[35]=y):y=C[35],C[36]!==X||C[37]!==K||C[38]!==O||C[39]!==G||C[40]!==B||C[41]!==Y||C[42]!==I?(j=K||X?(0,o.jsx)(a.Zb,{tone:"caution",padding:3,radius:2,shadow:1,children:(0,o.jsxs)(a.xv,{size:1,children:[K&&(0,o.jsx)(o.Fragment,{children:G??I("request-permission-dialog.warning.limit-reached.text")}),X&&(0,o.jsx)(o.Fragment,{children:G??I("request-permission-dialog.warning.denied.text")})]})}):(0,o.jsxs)(a.Kq,{space:3,paddingBottom:0,children:[(0,o.jsx)(a.oi,{placeholder:I("request-permission-dialog.note-input.placeholder.text"),disabled:O,onKeyDown:e=>{"Enter"===e.key&&Y()},maxLength:150,value:B,onChange:e=>{V(e.currentTarget.value)}}),(0,o.jsx)(a.xv,{align:"right",muted:!0,size:1,children:`${B.length}/150`})]}),C[36]=X,C[37]=K,C[38]=O,C[39]=G,C[40]=B,C[41]=Y,C[42]=I,C[43]=j):j=C[43],C[44]!==y||C[45]!==j?(_=(0,o.jsx)(n3,{children:(0,o.jsxs)(a.Kq,{space:4,children:[y,j]})}),C[44]=y,C[45]=j,C[46]=_):_=C[46],C[47]!==A||C[48]!==S||C[49]!==g||C[50]!==_||C[51]!==u?(w=(0,o.jsx)(r.Vq,{width:1,id:A,header:u,footer:g,onClose:S,onClickOutside:S,children:_}),C[47]=A,C[48]=S,C[49]=g,C[50]=_,C[51]=u,C[52]=w):w=C[52],C[53]!==w||C[54]!==N.fullscreen?(k=(0,o.jsx)(d.Tu,{position:"fixed",zOffset:Z,children:w}),C[53]=w,C[54]=N.fullscreen,C[55]=k):k=C[55],k}function n5(e){return"editor"===e.name}function n6(e){return e?.appliesToUsers}(0,x.zo)(a.kC).attrs({align:"center",direction:"column",justify:"center"})`
  height: 110px;
`;let n7={loading:!0,error:!1,status:void 0},n8={loading:!1,error:!1,status:"none"},n9={loading:!1,error:!1,status:"declined"},ie={loading:!1,error:!1,status:"pending"},it={loading:!1,error:!1,status:"expired"},ii=()=>{let e,t,n;let i=(0,s.c)(9);i[0]===Symbol.for("react.memo_cache_sentinel")?(e={apiVersion:"2024-07-01"},i[0]=e):e=i[0];let l=(0,m.m85)(e),r=(0,m.vpR)();e:{let e;if(!l||!r){let e;i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,z.of)(n8),i[1]=e):e=i[1],t=e;break e}i[2]!==l||i[3]!==r?(e=l.observable.request({url:"/access/requests/me",tag:"use-role-requests-status"}).pipe((0,P.U)(e=>{if(!e||0===e.length)return n8;let t=e.filter(e=>e.resourceId===r&&"role"===e.type),n=t.find(e=>"declined"===e.status);return n&&(0,eh.Z)((0,ef.Z)(new Date(n.createdAt),2),new Date)?n9:t.find(e=>"pending"===e.status&&(0,eh.Z)((0,ef.Z)(new Date(e.createdAt),2),new Date))?ie:t.find(e=>"pending"===e.status&&(0,ex.Z)((0,ef.Z)(new Date(e.createdAt),2),new Date))?it:n8}),(0,R.K)(e=>(console.error("Failed to fetch access requests",e),(0,z.of)({loading:!1,error:!0,status:void 0}))),(0,T.O)(n7)),i[2]=l,i[3]=r,i[4]=e):e=i[4],t=e}let o=t,{loading:a,error:d,status:c}=(0,v.m)(o,n7);return i[5]!==d||i[6]!==a||i[7]!==c?(n={data:c,loading:a,error:d},i[5]=d,i[6]=a,i[7]=c,i[8]=n):n=i[8],n};function il(e){let t,n,i,r,d,u,h,f,x,g,b,y;let v=(0,s.c)(33),{requiredPermission:j}=e,_=(0,m.xJ)(),{data:w,loading:k,error:C}=ii(),[S,z]=(0,c.useState)(!1);t="pending"===w||"declined"===w||S,v[0]!==_?.roles?(n=_?.roles||[],v[0]=_?.roles,v[1]=n):n=v[1];let E=n,I=1===E.length&&"viewer"===E[0].name,[$,P]=(0,c.useState)(!1);v[2]===Symbol.for("react.memo_cache_sentinel")?(i={style:"short"},v[2]=i):i=v[2];let A=(0,m.WEl)(i),{t:T}=(0,m.$G7)(l.UA),R=(0,ep.f1)();v[3]!==E||v[4]!==A?(r=E.map(io),d=A.formatToParts(r).map(ir),v[3]=E,v[4]=A,v[5]=r,v[6]=d):(r=v[5],d=v[6]);let M=d;return v[7]!==M?(u={Roles:()=>(0,o.jsx)(o.Fragment,{children:M})},v[7]=M,v[8]=u):u=v[8],v[9]!==r||v[10]!==M.length?(h={count:M.length,roles:r},v[9]=r,v[10]=M.length,v[11]=h):h=v[11],v[12]!==j||v[13]!==T||v[14]!==u||v[15]!==h?(f=(0,o.jsx)(a.xv,{size:1,weight:"medium",children:(0,o.jsx)(m.vNl,{t:T,i18nKey:"banners.permission-check-banner.missing-permission",components:u,values:h,context:j})}),v[12]=j,v[13]=T,v[14]=u,v[15]=h,v[16]=f):f=v[16],v[17]!==I||v[18]!==t||v[19]!==C||v[20]!==k||v[21]!==w||v[22]!==T||v[23]!==R?(x=I&&w&&!C&&!k?{onClick:t?void 0:()=>{P(!0),R.log(n1)},text:T(t?"banners.permission-check-banner.request-permission-button.sent":"banners.permission-check-banner.request-permission-button.text"),tone:t?"default":"primary",disabled:t,mode:t?"bleed":void 0}:void 0,v[17]=I,v[18]=t,v[19]=C,v[20]=k,v[21]=w,v[22]=T,v[23]=R,v[24]=x):x=v[24],v[25]!==f||v[26]!==x?(g=(0,o.jsx)(nY,{content:f,action:x,"data-testid":"permission-check-banner",icon:p.CPA}),v[25]=f,v[26]=x,v[27]=g):g=v[27],v[28]!==$?(b=$&&(0,o.jsx)(n4,{onClose:()=>P(!1),onRequestSubmitted:()=>{z(!0),P(!1)}}),v[28]=$,v[29]=b):b=v[29],v[30]!==b||v[31]!==g?(y=(0,o.jsxs)(o.Fragment,{children:[g,b]}),v[30]=b,v[31]=g,v[32]=y):y=v[32],y}function ir(e){return"element"===e.type?(0,o.jsx)("code",{children:e.value},e.value):e.value}function io(e){return e.title}let is=(0,c.memo)(()=>{let e=(0,m.rq_)(),{selectedReleaseId:t}=(0,m.Wc0)(),{params:n,groupIndex:i,routerPanesState:r,replaceCurrent:s,BackLink:d}=eF(),u=r[i]?.[0].id,h=r[i-1]?.[0],f=h?.id,x=!!h?.params?.rev,g=(0,c.useMemo)(()=>n?.parentRefPath&&(0,w.mL)(n.parentRefPath)||null,[n?.parentRefPath]),{t:b}=(0,m.$G7)(l.UA),y=(0,c.useMemo)(()=>{let n=g?.[0];if(!f||!n||!g)return(0,z.of)({loading:!1});let i=(0,m.vsM)(f),l=(0,w.mL)(n),r=l.findIndex(e=>"object"==typeof e&&"_key"in e);return(0,M.z)((0,z.of)({loading:!0}),e.unstable_observePathsDocumentPair(i,-1===r?l:l.slice(0,r),{version:t}).pipe((0,el.b)(750),(0,P.U)(({draft:e,published:t,version:n})=>({loading:!1,result:{availability:{draft:e.availability,published:t.availability,...n?.availability?{version:n.availability}:{}},refValue:w.U2(n?.snapshot||e.snapshot||t.snapshot,g)?._ref}}))))},[t,e,f,g]),j=(0,v.m)(y,{loading:!0}),_=(0,c.useCallback)(()=>{j.loading||j.result?.refValue&&s({id:j.result.refValue,params:n})},[j.loading,j.result,s,n]);return f&&g&&!x&&!j.loading&&(j.result?.availability.draft.available||j.result?.availability.published.available)&&j.result?.refValue!==u?(0,o.jsx)(nY,{action:j.result?.refValue?{onClick:_,icon:p.bnu,text:b("banners.reference-changed-banner.reason-changed.reload-button.text")}:{as:d,icon:p.Two,text:b("banners.reference-changed-banner.reason-removed.close-button.text")},"data-testid":"reference-changed-banner",content:(0,o.jsx)(a.xv,{size:1,weight:"medium",children:b(j.result?.refValue?"banners.reference-changed-banner.reason-changed.text":"banners.reference-changed-banner.reason-removed.text")}),icon:p.foC,tone:"caution"}):null});function ia(){let{t:e}=(0,m.$G7)(l.UA),{t:t}=(0,m.$G7)(),{data:n}=(0,m.vlT)(),{params:i,setParams:r}=eF(),s=(0,c.useMemo)(()=>n.find(e=>(0,m.QXs)(e._id)===i?.historyVersion),[n,i?.historyVersion]),d=s?.state==="published"?"banners.published-release.description":"banners.archived-release.description",u=s?.metadata.title||t("release.placeholder-untitled-release");return(0,o.jsx)(nY,{tone:"caution",content:(0,o.jsx)(a.xv,{size:1,children:(0,o.jsx)(m.vNl,{t:e,i18nKey:d,values:{title:u},components:{VersionBadge:(0,m.yku)(s)}})}),action:i?.archivedRelease?void 0:{text:"Go back to published version",onClick:()=>{r({...i,rev:i?.historyEvent||void 0,since:void 0,historyVersion:void 0})}}})}is.displayName="Memo(ReferenceChangedBanner)";let id=x.zo.img`
  object-fit: cover;
  width: 100%;
  height: 100%;
  height: 180px;
  display: flex;
`,ic=e=>{let t,n,i,d,u,h,f,x,g,b,y,v;let j=(0,s.c)(22),{onClose:_}=e,{t:w}=(0,m.$G7)(l.UA),k=(0,c.useRef)(null);return j[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>[k.current],j[0]=t):t=j[0],(0,a.Of)(_,t),j[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o.jsx)(id,{src:"https://cdn.sanity.io/images/pyrmmpch/production/b47224e2f3a7d1747e43b9da1ac31739250e628b-632x376.png",alt:"Canvas"}),j[1]=n):n=j[1],j[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.jsx)(a.xv,{size:1,weight:"semibold",children:"Canvas"}),j[2]=i):i=j[2],j[3]===Symbol.for("react.memo_cache_sentinel")?(d=(0,o.jsxs)(a.kC,{paddingY:1,gap:2,children:[i,(0,o.jsx)(a.xv,{size:1,muted:!0,children:(0,o.jsx)(p.tUC,{})})]}),j[3]=d):d=j[3],j[4]!==w?(u=w("canvas.banner.popover-heading"),j[4]=w,j[5]=u):u=j[5],j[6]!==u?(h=(0,o.jsx)(a.xu,{paddingTop:3,children:(0,o.jsx)(a.X6,{size:1,children:u})}),j[6]=u,j[7]=h):h=j[7],j[8]!==w?(f=w("canvas.banner.popover-description"),j[8]=w,j[9]=f):f=j[9],j[10]!==f?(x=(0,o.jsx)(a.xu,{paddingTop:4,children:(0,o.jsx)(a.xv,{size:1,children:f})}),j[10]=f,j[11]=x):x=j[11],j[12]!==h||j[13]!==x?(g=(0,o.jsxs)(a.kC,{paddingX:4,paddingBottom:4,paddingTop:3,direction:"column",children:[d,h,x]}),j[12]=h,j[13]=x,j[14]=g):g=j[14],j[15]!==w?(b=w("canvas.banner.popover-button-text"),j[15]=w,j[16]=b):b=j[16],j[17]!==b?(y=(0,o.jsx)(a.kC,{width:"full",gap:3,justify:"flex-end",paddingX:4,paddingBottom:4,children:(0,o.jsx)(r.zx,{mode:"bleed",text:b,autoFocus:!0,tone:"primary",href:"https://snty.link/canvas-docs",target:"_blank",rel:"noopener noreferrer",as:"a",iconRight:p.buG})}),j[17]=b,j[18]=y):y=j[18],j[19]!==y||j[20]!==g?(v=(0,o.jsx)(a.Zb,{radius:3,overflow:"hidden",width:0,ref:k,children:(0,o.jsxs)(a.W2,{width:0,children:[n,g,y]})}),j[19]=y,j[20]=g,j[21]=v):v=j[21],v},iu=e=>{let t,n,i,d,u,h,f,x;let g=(0,s.c)(17),{documentId:b}=e,{t:y}=(0,m.$G7)(l.UA),[v,j]=(0,c.useState)(!1),_=(0,m.ljK)(b);e:{let e;if("published"===_){let e;g[0]!==y?(e=y("canvas.banner.linked-text.published"),g[0]=y,g[1]=e):e=g[1],t=e;break e}if("draft"===_){let e;g[2]!==y?(e=y("canvas.banner.linked-text.draft"),g[2]=y,g[3]=e):e=g[3],t=e;break e}g[4]!==y?(e=y("canvas.banner.linked-text.version"),g[4]=y,g[5]=e):e=g[5],t=e}let w=t;g[6]===Symbol.for("react.memo_cache_sentinel")?(n=()=>j(im),g[6]=n):n=g[6];let k=n;g[7]===Symbol.for("react.memo_cache_sentinel")?(i=()=>j(!1),g[7]=i):i=g[7];let C=i;return g[8]!==w?(d=(0,o.jsx)(a.xv,{size:1,weight:"medium",children:w}),g[8]=w,g[9]=d):d=g[9],g[10]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)(ic,{onClose:C}),h=(0,o.jsx)(r.zx,{tooltipProps:null,mode:"bleed",tone:"default",icon:p.hQ6,onClick:k}),g[10]=u,g[11]=h):(u=g[10],h=g[11]),g[12]!==v?(f=(0,o.jsx)(r.J2,{open:v,size:0,tone:"default",portal:!0,placement:"bottom-start",content:u,children:h}),g[12]=v,g[13]=f):f=g[13],g[14]!==d||g[15]!==f?(x=(0,o.jsxs)(a.kC,{align:"center",gap:2,children:[d,f]}),g[14]=d,g[15]=f,g[16]=x):x=g[16],x};function ip(){let e,t,n,i;let r=(0,s.c)(10),{documentId:a,displayed:d}=nv(),{t:c}=(0,m.$G7)(l.UA),u=d?._id||a,{companionDoc:p}=(0,m.Kp1)(u),h=(0,m.w1i)(p?.canvasDocumentId,"banner");return p?(r[0]!==u?(e=(0,o.jsx)(iu,{documentId:u}),r[0]=u,r[1]=e):e=r[1],r[2]!==c?(t=c("canvas.banner.edit-in-canvas-action"),r[2]=c,r[3]=t):t=r[3],r[4]!==h||r[5]!==t?(n={mode:"ghost",text:t,onClick:h},r[4]=h,r[5]=t,r[6]=n):n=r[6],r[7]!==e||r[8]!==n?(i=(0,o.jsx)(nY,{tone:"neutral","data-test-id":"canvas-linked-banner",paddingY:0,content:e,action:n}),r[7]=e,r[8]=n,r[9]=i):i=r[9],i):null}function im(e){return!e}let ih=e=>{let t,n,i,r,d,c,u,h,f;let x=(0,s.c)(27),{schemaType:g,selectedPerspective:b,reason:y}=e,{t:v}=(0,m.$G7)(l.UA),{document:j}=(0,m.cFj)(),{drafts:_}=j,{enabled:w}=_;x[0]!==w||x[1]!==g?(t=e=>{let{perspective:t}=e;return{disabled:!(0,m.Xje)({selectedPerspective:t,isDraftModelEnabled:w,schemaType:g}).result}},x[0]=w,x[1]=g,x[2]=t):t=x[2];let k=t;return x[3]!==y||x[4]!==v?(n="PUBLISHED_NOT_WRITEABLE"===y&&v("banners.choose-new-document-destination.cannot-create-published-document"),x[3]=y,x[4]=v,x[5]=n):n=x[5],x[6]!==y||x[7]!==v?(i="DRAFTS_NOT_WRITEABLE"===y&&v("banners.choose-new-document-destination.cannot-create-draft-document"),x[6]=y,x[7]=v,x[8]=i):i=x[8],x[9]!==y||x[10]!==b||x[11]!==v?(r="RELEASE_NOT_ACTIVE"===y&&(0,m._wt)(b)&&(0,o.jsx)(m.vNl,{t:v,i18nKey:"banners.choose-new-document-destination.release-inactive",values:{title:b.metadata.title},components:{VersionBadge:(0,m.yku)(b)}}),x[9]=y,x[10]=b,x[11]=v,x[12]=r):r=x[12],x[13]!==v?(d=v("banners.choose-new-document-destination.choose-destination"),x[13]=v,x[14]=d):d=x[14],x[15]!==d?(c=(0,o.jsxs)(o.Fragment,{children:[" ",d]}),x[15]=d,x[16]=c):c=x[16],x[17]!==n||x[18]!==i||x[19]!==r||x[20]!==c?(u=(0,o.jsxs)(a.xv,{size:1,children:[n,i,r,c]}),x[17]=n,x[18]=i,x[19]=r,x[20]=c,x[21]=u):u=x[21],x[22]!==k?(h=(0,o.jsx)(m.caY,{menuItemProps:k}),x[22]=k,x[23]=h):h=x[23],x[24]!==h||x[25]!==u?(f=(0,o.jsx)(nY,{tone:"caution",icon:p.foC,content:(0,o.jsxs)(a.kC,{align:"center",gap:2,children:[u,h]})}),x[24]=h,x[25]=u,x[26]=f):f=x[26],f};function ix(){let e,t;let n=(0,s.c)(5),{value:i}=nv(),{documentLinkedBannerContent:l}=(0,m.opE)().components??{};n[0]!==i?(e=(0,m.xaJ)(i),n[0]=i,n[1]=e):e=n[1];let r=e;return l&&r?(n[2]!==l||n[3]!==r?(t=(0,o.jsx)(nY,{tone:"transparent","data-test-id":"sanity-create-read-only-banner",content:(0,o.jsx)(l,{metadata:r})}),n[2]=l,n[3]=r,n[4]=t):t=n[4],t):null}function ig({documentId:e,currentRelease:t,value:n,isScheduledRelease:i}){let r=(0,m.Ydd)(t??m.y7d),{t:u}=(0,m.$G7)(l.UA),{t:p}=(0,m.$G7)(),{createVersion:h}=(0,m.BQ9)(),[f,x]=(0,c.useState)(),g=(0,d.pm)(),b=(0,c.useCallback)(async()=>{if(t._id){x({status:"creating",lastUpdate:new Date});try{await h((0,m.QXs)(t._id),e,n),x({status:"created",lastUpdate:new Date})}catch(e){g.push({status:"error",closable:!0,title:u("banners.release.error.title"),description:u("banners.release.error.description",{message:e.message})}),x(void 0)}}},[h,t._id,e,u,g,n]),y=function(e){let t,n,i;let l=(0,s.c)(4);l[0]===Symbol.for("react.memo_cache_sentinel")?(t=new Date,l[0]=t):t=l[0];let[r,o]=(0,c.useState)(t);return 200!==l[1]?(n=()=>{let e=setInterval(()=>{o(new Date)},200);return()=>clearInterval(e)},i=[e],l[1]=e,l[2]=n,l[3]=i):(n=l[2],i=l[3]),(0,c.useEffect)(n,i),r}(200);return(0,m.yt7)({status:"info",id:"add-document-to-release",enabled:f?.status==="created"&&y.getTime()-f.lastUpdate.getTime()>1e3,closable:!0,title:u("banners.release.waiting.title"),description:u("banners.release.waiting.description")}),(0,o.jsx)(nY,{tone:r,content:(0,o.jsx)(a.xv,{size:1,children:(0,o.jsx)(m.vNl,{i18nKey:"banners.release.not-in-release",t:u,values:{title:t?.metadata?.title||p("release.placeholder-untitled-release")},components:{VersionBadge:(0,m.yku)(t)}})}),action:i?void 0:{text:u("banners.release.action.add-to-release"),tone:r,disabled:!!f,onClick:b,mode:"default"}})}let ib=(0,em.dS)({name:"LiveEdit Draft Resolved",version:1,description:"User resolved a draft of a live edit document to continue editing"}),iy=e=>{let t,n,i,d,u,h,f,x,g,b,y,v,j,_,w;let k=(0,s.c)(47),{displayed:C,documentId:S,schemaType:z,i18nKey:E,isEditBlocking:I}=e,{t:$}=(0,m.$G7)(l.UA),[P,A]=(0,c.useState)(!1),[T,R]=(0,c.useState)(!1),M=(0,ep.f1)(),{publish:D,discardChanges:L}=(0,m.d9t)(S,C?._type||"");k[0]!==D||k[1]!==M?(t=()=>{D.execute(),A(!0),M.log(ib,{liveEditResolveType:"publish"})},k[0]=D,k[1]=M,k[2]=t):t=k[2];let N=t;k[3]!==L||k[4]!==M?(n=()=>{L.execute(),R(!0),M.log(ib,{liveEditResolveType:"discard"})},k[3]=L,k[4]=M,k[5]=n):n=k[5];let O=n;k[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>()=>{A(!1),R(!1)},k[6]=i):i=k[6],(0,c.useEffect)(i);let U=t2();k[7]!==U||k[8]!==C?._id||k[9]!==z.name?(d=()=>{typeof C?._id>"u"||U.navigateDiffView({mode:"version",previousDocument:{type:z.name,id:(0,m.vsM)(C?._id)},nextDocument:{type:z.name,id:(0,m.qyu)(C?._id)}})},k[7]=U,k[8]=C?._id,k[9]=z.name,k[10]=d):d=k[10];let B=d;return k[11]!==z.title?(u={schemaType:z.title},k[11]=z.title,k[12]=u):u=k[12],k[13]!==E||k[14]!==$||k[15]!==u?(h=(0,o.jsx)(a.xv,{size:1,weight:"medium",children:(0,o.jsx)(m.vNl,{t:$,i18nKey:E,values:u})}),k[13]=E,k[14]=$,k[15]=u,k[16]=h):h=k[16],k[17]!==$?(f=$("banners.obsolete-draft.actions.compare-draft.text"),k[17]=$,k[18]=f):f=k[18],k[19]!==B||k[20]!==f?(x=(0,o.jsx)(r.zx,{text:f,mode:"ghost",onClick:B}),k[19]=B,k[20]=f,k[21]=x):x=k[21],k[22]!==$?(g=$("banners.obsolete-draft.actions.publish-draft.text"),k[22]=$,k[23]=g):g=k[23],k[24]!==I||k[25]!==$?(b=I?{content:$("banners.live-edit-draft-banner.publish.tooltip")}:{},k[24]=I,k[25]=$,k[26]=b):b=k[26],k[27]!==N||k[28]!==P||k[29]!==b||k[30]!==g?(y=(0,o.jsx)(r.zx,{onClick:N,text:g,tooltipProps:b,loading:P,tone:"positive"}),k[27]=N,k[28]=P,k[29]=b,k[30]=g,k[31]=y):y=k[31],k[32]!==$?(v=$("banners.obsolete-draft.actions.discard-draft.text"),k[32]=$,k[33]=v):v=k[33],k[34]!==I||k[35]!==$?(j=I?{content:$("banners.live-edit-draft-banner.discard.tooltip")}:{},k[34]=I,k[35]=$,k[36]=j):j=k[36],k[37]!==O||k[38]!==T||k[39]!==v||k[40]!==j?(_=(0,o.jsx)(r.zx,{onClick:O,text:v,tooltipProps:j,loading:T,tone:"caution"}),k[37]=O,k[38]=T,k[39]=v,k[40]=j,k[41]=_):_=k[41],k[42]!==y||k[43]!==_||k[44]!==h||k[45]!==x?(w=(0,o.jsx)(nY,{content:(0,o.jsxs)(a.kC,{align:"center",justify:"space-between",gap:2,children:[h,x,y,_]}),"data-testid":"live-edit-type-banner",icon:p.uIy}),k[42]=y,k[43]=_,k[44]=h,k[45]=x,k[46]=w):w=k[46],w};function iv(e){let t,n;let i=(0,s.c)(4),{documentId:l,isPinnedDraftOrPublished:r}=e;i[0]!==l?(t={documentId:l},i[0]=l,i[1]=t):t=i[1];let a=(0,m.oiJ)(t);return(0,m.Y_j)(l)&&a&&r?(i[2]!==l?(n=(0,o.jsx)(ij,{documentId:l}),i[2]=l,i[3]=n):n=i[3],n):null}function ij({documentId:e}){let{data:t}=(0,m.F6R)(),n=(0,m.RQ8)(),i=(0,m.eBk)(e)??"",s=(0,c.useMemo)(()=>t.find(e=>e._id.includes(i)),[t,i]),{t:d}=(0,m.$G7)(),{data:u}=(0,m.vUZ)({documentId:e}),p=(0,c.useMemo)(()=>t.filter(e=>u.find(t=>{let n=(0,m.eBk)(t)??"";return(0,m.QXs)(e._id)===n})).map(e=>e.metadata.title||d("release.placeholder-untitled-release")),[t,u,d]),h=s&&(0,m.Ydd)(s),{t:f}=(0,m.$G7)(l.UA),x=(0,c.useCallback)(async()=>{n(i)},[i,n]);return(0,o.jsx)(nY,{tone:h,paddingY:0,"data-testid":"open-release-to-edit-banner",content:(0,o.jsxs)(a.kC,{direction:"row",align:"center",justify:"space-between",flex:1,children:[(0,o.jsx)(a.xv,{size:1,children:(0,o.jsx)(a.kC,{direction:"row",gap:1,children:p.length>1?(0,o.jsx)(m.vNl,{t:f,i18nKey:"banners.release.navigate-to-edit-description-multiple",components:{VersionBadge:()=>(0,o.jsxs)(m.Q3e,{children:[" ",p[0]]})},values:{count:p.length-1}}):(0,o.jsx)(m.vNl,{t:f,i18nKey:"banners.release.navigate-to-edit-description-single",components:{VersionBadge:()=>(0,o.jsxs)(m.Q3e,{children:[" ",p[0]]})}})})}),(0,o.jsx)(r.zx,{text:f("banners.release.action.open-to-edit"),tone:h,onClick:x})]})})}function i_(){let e,t;let n=(0,s.c)(4),{revisionNotFound:i}=nv(),{t:r}=(0,m.$G7)(l.UA);return i?(n[0]!==r?(e=r("banners.revision-not-found.description"),n[0]=r,n[1]=e):e=n[1],n[2]!==e?(t=(0,o.jsx)(nY,{tone:"caution","data-test-id":"revision-not-found-banner",icon:p.foC,content:(0,o.jsx)(a.xv,{size:1,children:e})}),n[2]=e,n[3]=t):t=n[3],t):null}function iw(e){let t,n,i,l,r;let d=(0,s.c)(12),{currentRelease:c}=e,u=c??m.y7d;d[0]!==u?(t=(0,m.Ydd)(u),d[0]=u,d[1]=t):t=d[1];let h=t,{t:f}=(0,m.$G7)();return d[2]!==c?(n=(0,m.Bwd)(c),d[2]=c,d[3]=n):n=d[3],d[4]!==n?(i={date:n},d[4]=n,d[5]=i):i=d[5],d[6]!==i||d[7]!==f?(l=(0,o.jsx)(a.xv,{size:1,children:(0,o.jsx)(m.vNl,{t:f,i18nKey:"release.banner.scheduled-for-publishing-on",values:i})}),d[6]=i,d[7]=f,d[8]=l):l=d[8],d[9]!==l||d[10]!==h?(r=(0,o.jsx)(nY,{tone:h,icon:p.mBM,content:l}),d[9]=l,d[10]=h,d[11]=r):r=d[11],r}function ik(){let e=(0,s.c)(13),{value:t}=nv(),{selectedPerspective:n}=(0,m.Wc0)(),i=(0,m.nOg)(t),{t:r}=(0,m.$G7)(l.UA),{t:d}=(0,m.$G7)();if((0,m._wt)(n)&&i){let t,i,l,s,c;e[0]!==n.metadata?.title||e[1]!==d?(t=n.metadata?.title||d("release.placeholder-untitled-release"),e[0]=n.metadata?.title,e[1]=d,e[2]=t):t=e[2];let u=t;return e[3]!==u?(i={title:u},e[3]=u,e[4]=i):i=e[4],e[5]!==n?(l=(0,m.yku)(n),e[5]=n,e[6]=l):l=e[6],e[7]!==l?(s={VersionBadge:l},e[7]=l,e[8]=s):s=e[8],e[9]!==r||e[10]!==i||e[11]!==s?(c=(0,o.jsx)(nY,{tone:"critical",content:(0,o.jsx)(a.xv,{size:1,children:(0,o.jsx)(m.vNl,{t:r,i18nKey:"banners.unpublished-release-banner.text",values:i,components:s})}),icon:p.xEY}),e[9]=r,e[10]=i,e[11]=s,e[12]=c):c=e[12],c}return null}let iC=(0,x.zo)(a.Kq)`
  ${({theme:e})=>(0,x.iv)`
      @supports not (container-type: inline-size) {
        display: none !important;
      }

      container-type: inline-size;

      [data-heading] {
        font-size: ${e.sanity.fonts.heading.sizes[4].fontSize}px;
        line-height: ${e.sanity.fonts.heading.sizes[4].lineHeight}px;
        overflow-wrap: break-word;
        text-wrap: pretty;
      }

      @container (max-width: 560px) {
        [data-heading] {
          font-size: ${e.sanity.fonts.heading.sizes[3].fontSize}px;
          line-height: ${e.sanity.fonts.heading.sizes[3].lineHeight}px;
        }
      }

      @container (max-width: 420px) {
        [data-heading] {
          font-size: ${e.sanity.fonts.heading.sizes[2].fontSize}px;
          line-height: ${e.sanity.fonts.heading.sizes[2].lineHeight}px;
        }
      }
    `}
`,iS=e=>{let t,n,i,d;let c=(0,s.c)(14),{documentId:u,schemaType:h,title:f}=e,x=u===h.name,g=h.description,{t:b}=(0,m.$G7)(l.UA);if(!1===h.__experimental_formPreviewTitle)return null;c[0]!==g||c[1]!==x||c[2]!==h.name||c[3]!==h.title?(t=!x&&(0,o.jsxs)(a.gF,{space:1,children:[(0,o.jsx)(a.xv,{muted:!0,size:1,children:h.title??h.name}),g&&(0,o.jsx)(r.u,{content:g,placement:"right",children:(0,o.jsx)(p.hQ6,{"data-testid":"schema-description-icon"})})]}),c[0]=g,c[1]=x,c[2]=h.name,c[3]=h.title,c[4]=t):t=c[4];let y=!f;return c[5]!==b||c[6]!==f?(n=f??b("document-view.form-view.form-title-fallback"),c[5]=b,c[6]=f,c[7]=n):n=c[7],c[8]!==y||c[9]!==n?(i=(0,o.jsx)(a.X6,{as:"h2","data-heading":!0,muted:y,"data-testid":"document-panel-document-title",children:n}),c[8]=y,c[9]=n,c[10]=i):i=c[10],c[11]!==t||c[12]!==i?(d=(0,o.jsxs)(iC,{marginBottom:6,space:4,children:[t,i]}),c[11]=t,c[12]=i,c[13]=d):d=c[13],d},iz=e=>e.preventDefault(),iE=(0,c.forwardRef)(function(e,t){let n,i,r,u,p,h,f,x,g,b,y,v,j,_,w,k;let C=(0,s.c)(74),{hidden:S,margins:z}=e,{collapsedFieldSets:E,collapsedPaths:I,displayed:$,editState:P,documentId:A,documentType:T,fieldActions:R,onChange:M,validation:D,ready:L,formState:N,onFocus:O,connectionState:U,onBlur:B,onSetCollapsedPath:V,onPathOpen:G,onSetCollapsedFieldSet:F,onSetActiveFieldGroup:K,openPath:W}=nv(),{selectedReleaseId:H}=(0,m.Wc0)(),q=(0,m.H__)(),Y=(0,m.Dqo)(A),{title:Z}=nP(),[J]=(0,c.useState)(iI),Q=P?.transactionSyncLock?.enabled,{t:ee}=(0,m.$G7)(l.UA);C[0]!==ee?(i=ee("document-view.form-view.sync-lock-toast.title"),C[0]=ee,C[1]=i):i=C[1],C[2]!==ee?(r=ee("document-view.form-view.sync-lock-toast.description"),C[2]=ee,C[3]=r):r=C[3],C[4]!==Q||C[5]!==i||C[6]!==r?(u={id:"sync-lock",status:"warning",enabled:Q,title:i,description:r,closable:!0},C[4]=Q,C[5]=i,C[6]=r,C[7]=u):u=C[7],n=u,(0,m.yt7)(n),C[8]!==A||C[9]!==q.pair||C[10]!==T||C[11]!==J||C[12]!==H?(p=()=>{let e=q.pair.documentEvents(A,T,H).pipe((0,X.b)(e=>{"mutation"===e.type&&J.publish(function(e){let t=e.mutations.map(e=>e.patch).filter(Boolean);return{type:"mutation",snapshot:e.document,patches:(0,m.Sis)(e.origin,t)}}(e)),"rebase"===e.type&&J.publish(function(e){let t=e.remoteMutations.map(e=>e.patch).filter(Boolean),n=e.localMutations.map(e=>e.patch).filter(Boolean);return{type:"rebase",snapshot:e.document,patches:(0,m.Sis)("remote",t).concat((0,m.Sis)("local",n))}}(e))})).subscribe();return()=>{e.unsubscribe()}},C[8]=A,C[9]=q.pair,C[10]=T,C[11]=J,C[12]=H,C[13]=p):p=C[13],C[14]!==A||C[15]!==q||C[16]!==T||C[17]!==J||C[18]!==H?(h=[A,q,T,J,H],C[14]=A,C[15]=q,C[16]=T,C[17]=J,C[18]=H,C[19]=h):h=C[19],(0,c.useEffect)(p,h);let et=!!$?._rev;C[20]!==J||C[21]!==$?(f=()=>{J.publish({type:"mutation",patches:[],snapshot:$})},C[20]=J,C[21]=$,C[22]=f):f=C[22];let en=(0,eb.i)(f);C[23]!==en||C[24]!==et?(x=()=>{et&&en()},C[23]=en,C[24]=et,C[25]=x):x=C[25],C[26]!==et?(g=[et],C[26]=et,C[27]=g):g=C[27],(0,c.useEffect)(x,g);let[ei,el]=(0,c.useState)(null),[er,eo]=(0,c.useState)(!1);C[28]!==er||C[29]!==ei||C[30]!==N?.focusPath.length||C[31]!==L?(b=()=>{!er&&L&&!N?.focusPath.length&&ei&&(eo(!0),(0,d.fo)(ei))},C[28]=er,C[29]=ei,C[30]=N?.focusPath.length,C[31]=L,C[32]=b):b=C[32];let es=N?.focusPath.length;C[33]!==er||C[34]!==ei||C[35]!==L||C[36]!==es?(y=[er,ei,es,L],C[33]=er,C[34]=ei,C[35]=L,C[36]=es,C[37]=y):y=C[37],(0,c.useEffect)(b,y),C[38]!==t?(v=e=>{el(e),"function"==typeof t?t(e):t&&(t.current=e)},C[38]=t,C[39]=v):v=C[39];let ea=v,ed="reconnecting"===U||N?.readOnly||!P?.ready,ec=ed?"true":void 0;return C[40]!==E||C[41]!==I||C[42]!==U||C[43]!==A||C[44]!==P?.draft||C[45]!==P?.published||C[46]!==R||C[47]!==N||C[48]!==S||C[49]!==ed||C[50]!==B||C[51]!==M||C[52]!==O||C[53]!==G||C[54]!==K||C[55]!==F||C[56]!==V||C[57]!==W||C[58]!==J||C[59]!==Y||C[60]!==ee||C[61]!==Z||C[62]!==D?(j="connecting"!==U||P?.draft||P?.published?null===N||S?(0,o.jsx)(a.xu,{padding:2,children:(0,o.jsx)(a.xv,{children:ee("document-view.form-view.form-hidden")})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(iS,{documentId:A,schemaType:N.schemaType,title:Z}),(0,o.jsx)(m.quP,{__internal_fieldActions:R,__internal_patchChannel:J,changed:N.changed,collapsedFieldSets:E,collapsedPaths:I,focused:N.focused,focusPath:N.focusPath,groups:N.groups,id:"root",members:N.members,onChange:M,onFieldGroupSelect:K,onPathBlur:B,onPathFocus:O,onPathOpen:G,onSetFieldSetCollapsed:F,onSetPathCollapsed:V,openPath:W,presence:Y,readOnly:ed,schemaType:N.schemaType,validation:D,value:N.value})]}):(0,o.jsx)(e6,{ms:300,children:(0,o.jsxs)(a.kC,{align:"center",direction:"column",height:"fill",justify:"center",children:[(0,o.jsx)(a.$j,{muted:!0}),(0,o.jsx)(a.xu,{marginTop:3,children:(0,o.jsx)(a.xv,{align:"center",muted:!0,size:1,children:ee("document-view.form-view.loading")})})]})}),C[40]=E,C[41]=I,C[42]=U,C[43]=A,C[44]=P?.draft,C[45]=P?.published,C[46]=R,C[47]=N,C[48]=S,C[49]=ed,C[50]=B,C[51]=M,C[52]=O,C[53]=G,C[54]=K,C[55]=F,C[56]=V,C[57]=W,C[58]=J,C[59]=Y,C[60]=ee,C[61]=Z,C[62]=D,C[63]=j):j=C[63],C[64]!==ea||C[65]!==ec||C[66]!==j?(_=(0,o.jsx)(a.xu,{as:"form",onSubmit:iz,ref:ea,"data-testid":"form-view","data-read-only":ec,children:j}),C[64]=ea,C[65]=ec,C[66]=j,C[67]=_):_=C[67],C[68]!==z||C[69]!==_?(w=(0,o.jsx)(m.$rW,{margins:z,children:_}),C[68]=z,C[69]=_,C[70]=w):w=C[70],C[71]!==S||C[72]!==w?(k=(0,o.jsx)(a.W2,{hidden:S,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:w}),C[71]=S,C[72]=w,C[73]=k):k=C[73],k});function iI(){return(0,m.fm0)()}function i$(){let e,t;let n=(0,s.c)(11),{activeViewId:i,paneKey:l,views:r}=nv(),d=`${l}tabpanel`;if(n[0]!==i||n[1]!==l||n[2]!==d||n[3]!==r){let t;n[5]!==i||n[6]!==l||n[7]!==d?(t=(e,t)=>(0,o.jsx)(iP,{icon:e.icon,id:`${l}tab-${e.id}`,isActive:i===e.id,label:e.title,tabPanelId:d,viewId:0===t?null:e.id??null},e.id),n[5]=i,n[6]=l,n[7]=d,n[8]=t):t=n[8],e=r.map(t),n[0]=i,n[1]=l,n[2]=d,n[3]=r,n[4]=e}else e=n[4];return n[9]!==e?(t=(0,o.jsx)(a.td,{space:1,children:e}),n[9]=e,n[10]=t):t=n[10],t}function iP(e){let t,n,i,l,a,d,c,u,p;let m=(0,s.c)(20);m[0]!==e?({icon:t,id:n,isActive:i,label:l,tabPanelId:d,viewId:c,...a}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=i,m[4]=l,m[5]=a,m[6]=d,m[7]=c):(t=m[1],n=m[2],i=m[3],l=m[4],a=m[5],d=m[6],c=m[7]);let{ready:h,editState:f}=nv(),{setView:x}=eF();m[8]!==x||m[9]!==c?(u=()=>x(c),m[8]=x,m[9]=c,m[10]=u):u=m[10];let g=u,b=!h&&!f?.draft&&!f?.published;return m[11]!==g||m[12]!==t||m[13]!==n||m[14]!==i||m[15]!==l||m[16]!==a||m[17]!==b||m[18]!==d?(p=(0,o.jsx)(r.OK,{...a,"aria-controls":d,disabled:b,icon:t,id:n,label:l,onClick:g,selected:i}),m[11]=g,m[12]=t,m[13]=n,m[14]=i,m[15]=l,m[16]=a,m[17]=b,m[18]=d,m[19]=p):p=m[19],p}function iA(){let e,t,n;let i=(0,s.c)(22),{connectionState:r,schemaType:a,title:d,value:c}=nv(),u=!!c;i[0]!==c||i[1]!==a||i[2]!==u?(e={enabled:u,schemaType:a,value:c},i[0]=c,i[1]=a,i[2]=u,i[3]=e):e=i[3];let{error:p,value:h}=(0,m._2T)(e),{t:f}=(0,m.$G7)(l.UA);if("connecting"===r&&!u){let e;return i[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(o.Fragment,{}),i[4]=e):e=i[4],e}if(d){let e;return i[5]!==d?(e=(0,o.jsx)(o.Fragment,{children:d}),i[5]=d,i[6]=e):e=i[6],e}if(!c){let e,t;let n=a?.title||a?.name;return i[7]!==f||i[8]!==n?(e=f("panes.document-header-title.new.text",{schemaType:n}),i[7]=f,i[8]=n,i[9]=e):e=i[9],i[10]!==e?(t=(0,o.jsx)(o.Fragment,{children:e}),i[10]=e,i[11]=t):t=i[11],t}if(p){let e,t;return i[12]!==p.message||i[13]!==f?(e=f("panes.document-header-title.error.text",{error:p.message}),i[12]=p.message,i[13]=f,i[14]=e):e=i[14],i[15]!==e?(t=(0,o.jsx)(o.Fragment,{children:e}),i[15]=e,i[16]=t):t=i[16],t}return i[17]!==f||i[18]!==h?.title?(t=h?.title||(0,o.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:f("panes.document-header-title.untitled.text")}),i[17]=f,i[18]=h?.title,i[19]=t):t=i[19],i[20]!==t?(n=(0,o.jsx)(o.Fragment,{children:t}),i[20]=t,i[21]=n):n=i[21],n}let iT=e=>{let t,n,i,d,c,u;let h=(0,s.c)(16);h[0]!==e?({documentExists:t,...n}=e,h[0]=e,h[1]=t,h[2]=n):(t=h[1],n=h[2]);let{isFavorited:f,isReady:x,favorite:g,unfavorite:b}=(0,m.KXt)(n),{t:y}=(0,m.$G7)(l.UA),v=f?"document.favorites.remove-from-favorites":"document.favorites.add-to-favorites";h[3]!==y||h[4]!==v?(i=y(v),h[3]=y,h[4]=v,h[5]=i):i=h[5];let j=i,_=f?b:g,w=!x||!t;return h[6]!==j?(d={content:(0,o.jsx)(a.xv,{size:1,children:j}),placement:"right"},h[6]=j,h[7]=d):d=h[7],h[8]!==f?(c=(0,o.jsx)(a.xv,{size:1,children:f?(0,o.jsx)(p.e0l,{}):(0,o.jsx)(p.r7p,{})}),h[8]=f,h[9]=c):c=h[9],h[10]!==j||h[11]!==_||h[12]!==w||h[13]!==d||h[14]!==c?(u=(0,o.jsx)(r.zx,{mode:"bleed",onClick:_,disabled:w,"aria-label":j,"aria-live":"assertive",tooltipProps:d,children:c}),h[10]=j,h[11]=_,h[12]=w,h[13]=d,h[14]=c,h[15]=u):u=h[15],u},iR=(0,c.memo)(function(){let e,t,n,i,a,d,c,u,h,f;let x=(0,s.c)(26),{editState:g,connectionState:b,views:y,documentId:v,displayed:j}=nv(),{features:_}=nC(),{index:w,BackLink:k}=eF(),{activeWorkspace:C}=(0,m.AJ_)();x[0]!==v?(e=(0,m.vsM)(v),x[0]=v,x[1]=e):e=x[1];let S=e,z=y.length>1,{collapsed:E,isLast:I}=tn(),$=I&&!E?-1:0,P=_.backButton&&w>0,{t:A}=(0,m.$G7)(l.UA);x[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o.jsx)(iA,{}),x[2]=n):n=x[2],t=n,x[3]!==z?(a=z&&(0,o.jsx)(i$,{}),x[3]=z,x[4]=a):a=x[4],i=a,x[5]!==k||x[6]!==P||x[7]!==A?(c=P&&(0,o.jsx)(r.zx,{as:k,"data-as":"a",icon:p.Y4O,mode:"bleed",tooltipProps:{content:A("pane-header.back-button.text")}}),x[5]=k,x[6]=P,x[7]=A,x[8]=c):c=x[8],d=c;let T=j?._type??"";x[9]!==C.dataset||x[10]!==C.projectId?(u=[C.projectId,C.dataset],x[9]=C.dataset,x[10]=C.projectId,x[11]=u):u=x[11];let R=u.join("."),M=(g?.ready&&(g.version??g.draft??g.published)!==null)??!1;x[12]!==C.dataset||x[13]!==C.name||x[14]!==C.projectId||x[15]!==S||x[16]!==M||x[17]!==T||x[18]!==R?(h=(0,o.jsx)(m._qF,{capability:"comlink",condition:"available",children:(0,o.jsx)(iT,{resourceType:"studio",documentId:S,documentType:T,resourceId:R,schemaName:C.name,projectId:C.projectId,dataset:C.dataset,documentExists:M})}),x[12]=C.dataset,x[13]=C.name,x[14]=C.projectId,x[15]=S,x[16]=M,x[17]=T,x[18]=R,x[19]=h):h=x[19];let D=h,L="connecting"===b&&!g?.draft&&!g?.published;return x[20]!==d||x[21]!==D||x[22]!==L||x[23]!==$||x[24]!==i?(f=(0,o.jsx)(tj,{loading:L,title:t,tabs:i,tabIndex:$,backButton:d,appendTitle:D}),x[20]=d,x[21]=D,x[22]=L,x[23]=$,x[24]=i,x[25]=f):f=x[25],f}),iM=(0,x.zo)(a.xu)({position:"relative"}),iD=(0,x.zo)(m.l$t)(({$disabled:e})=>e?{height:"100%"}:(0,x.iv)`
    height: 100%;
    overflow: auto;
    position: relative;
    scroll-behavior: smooth;
    outline: none;
  `),iL=function(e){let t,n,i,l,r,d,u,p,h,f,x,g,b,y,v,j;let _=(0,s.c)(102),{footerHeight:w,headerHeight:k,isInspectOpen:C,rootElement:S,setDocumentPanelPortalElement:z,footer:E}=e,{activeViewId:I,displayed:$,documentId:P,editState:A,inspector:T,value:R,views:M,ready:D,schemaType:L,permissions:N,isPermissionsLoading:O}=nv();if(_[0]!==R){let e=(0,m.xaJ)(R);t=(0,m.EM_)(e),_[0]=R,_[1]=t}else t=_[1];let U=t,{params:B}=eF(),{collapsed:V}=eU(),{collapsed:G}=tn(),F=(0,a.vI)(),{features:K}=nC(),[W,X]=(0,c.useState)(null),[H,q]=(0,c.useState)(null),Y=(0,c.useRef)(null),Z=(0,m.cFj)(),J=R._createdAt?"update":"create";_[2]!==I||_[3]!==M?(i=M.find(e=>e.id===I)||M[0]||{type:"form"},_[2]=I,_[3]=M,_[4]=i):i=_[4],n=i;let Q=K.splitPanes&&W||F.element;e:{let e;if(V){let e;let t=k||0,n=w?w+2:2;_[5]!==t||_[6]!==n?(e=[t,0,n,0],_[5]=t,_[6]=n,_[7]=e):e=_[7],l=e;break e}_[8]===Symbol.for("react.memo_cache_sentinel")?(e=[0,0,2,0],_[8]=e):e=_[8],l=e}let ee=l,et="form"!==n.type;_[9]!==n.component||_[10]!==n.options||_[11]!==n.type||_[12]!==$||_[13]!==P||_[14]!==A?.draft||_[15]!==A?.published||_[16]!==L||_[17]!==R?(r=()=>{if("component"===n.type&&n.component){let e=n.component;return(0,o.jsx)(e,{document:{draft:A?.draft||null,displayed:$||R,historical:$,published:A?.published||null},documentId:P,options:n.options,schemaType:L})}return!1},_[9]=n.component,_[10]=n.options,_[11]=n.type,_[12]=$,_[13]=P,_[14]=A?.draft,_[15]=A?.published,_[16]=L,_[17]=R,_[18]=r):r=_[18],_[19]!==r?(d=r(),_[19]=r,_[20]=d):d=_[20];let en=d;_[21]!==H?(u=()=>{H?.scrollTo&&H.scrollTo(0,0)},_[21]=H,_[22]=u):u=_[22],_[23]!==P||_[24]!==H?(p=[P,H],_[23]=P,_[24]=H,_[25]=p):p=_[25],(0,c.useEffect)(u,p),_[26]!==Q||_[27]!==z?(h=()=>{Q&&z(Q)},f=[Q,z],_[26]=Q,_[27]=z,_[28]=h,_[29]=f):(h=_[28],f=_[29]),(0,c.useEffect)(h,f),_[30]!==$||_[31]!==C||_[32]!==R?(g=C?(0,o.jsx)(nq,{value:$||R}):null,_[30]=$,_[31]=C,_[32]=R,_[33]=g):g=_[33],x=g;let ei=!!(!G&&T),{selectedPerspective:el,selectedReleaseId:er}=(0,m.Wc0)();t:{let e,t,i,l,r,s,a,d,c,u,p,h,f,x;if(B?.historyVersion){let e;_[34]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(ia,{}),_[34]=e):e=_[34],b=e;break t}_[35]!==el?(e=(0,m._wt)(el)&&(0,m.$NU)(el),_[35]=el,_[36]=e):e=_[36];let g=e,y=!!(g&&$?._id&&(0,m.eBk)($?._id)===er);if(_[37]!==A||_[38]!==L||_[39]!==el||_[40]!==Z.document.drafts.enabled?(i=function({isSelectedPerspectiveWriteable:e,editState:t}){return(0,m.CXx)(t)&&!e.result}({isSelectedPerspectiveWriteable:t=(0,m.Xje)({selectedPerspective:el,isDraftModelEnabled:Z.document.drafts.enabled,schemaType:L}),editState:A}),_[37]=A,_[38]=L,_[39]=el,_[40]=Z.document.drafts.enabled,_[41]=t,_[42]=i):(t=_[41],i=_[42]),i){let e;_[43]!==t.reason||_[44]!==t.result||_[45]!==L||_[46]!==el?(e=!t.result&&(0,o.jsx)(ih,{schemaType:L,selectedPerspective:el,reason:t.reason}),_[43]=t.reason,_[44]=t.result,_[45]=L,_[46]=el,_[47]=e):e=_[47],b=e;break t}if(y){let e;_[48]!==el?(e=(0,o.jsx)(iw,{currentRelease:el}),_[48]=el,_[49]=e):e=_[49],b=e;break t}_[50]!==el?(l=(0,m.reX)(el),_[50]=el,_[51]=l):l=_[51];let v=l;if($?._id&&(0,m.eBk)($._id)!==er&&D&&!v&&!1===(0,m.CXx)(A)){let e;let t=$||void 0;_[52]!==g||_[53]!==el||_[54]!==t||_[55]!==R._id?(e=(0,o.jsx)(ig,{documentId:R._id,currentRelease:el,value:t,isScheduledRelease:g}),_[52]=g,_[53]=el,_[54]=t,_[55]=R._id,_[56]=e):e=_[56],b=e;break t}let j=function({editState:e,workspace:t,schemaType:n}){if(!e?.ready)return{result:void 0};let i=null!==e.draft,{document:{drafts:{enabled:l}}}=t;return!1===i?{result:!1}:l?nR(n)?{result:!0,reason:"LIVE_EDIT_ACTIVE"}:{result:!1}:{result:!0,reason:"DRAFT_MODEL_INACTIVE"}}({editState:A,workspace:Z,schemaType:L});if("form"===n.type&&!er&&j.result){if("DRAFT_MODEL_INACTIVE"===j.reason){let e;_[57]!==$||_[58]!==P||_[59]!==L?(e=(0,o.jsx)(iy,{displayed:$,documentId:P,schemaType:L,i18nKey:"banners.obsolete-draft.draft-model-inactive.text"}),_[57]=$,_[58]=P,_[59]=L,_[60]=e):e=_[60],b=e;break t}if("LIVE_EDIT_ACTIVE"===j.reason){let e;_[61]!==$||_[62]!==P||_[63]!==L?(e=(0,o.jsx)(iy,{displayed:$,documentId:P,schemaType:L,i18nKey:"banners.live-edit-draft-banner.text",isEditBlocking:!0}),_[61]=$,_[62]=P,_[63]=L,_[64]=e):e=_[64],b=e;break t}}if("form"!==n.type||O){b=null;break t}_[65]!==U?(r=U&&(0,o.jsx)(ix,{}),_[65]=U,_[66]=r):r=_[66],_[67]!==N?.granted||_[68]!==J?(s=!N?.granted&&(0,o.jsx)(il,{requiredPermission:J}),_[67]=N?.granted,_[68]=J,_[69]=s):s=_[69],_[70]===Symbol.for("react.memo_cache_sentinel")?(a=(0,o.jsx)(i_,{}),d=(0,o.jsx)(is,{}),c=(0,o.jsx)(n0,{}),u=(0,o.jsx)(ip,{}),p=(0,o.jsx)(nZ,{}),h=(0,o.jsx)(ik,{}),_[70]=a,_[71]=d,_[72]=c,_[73]=u,_[74]=p,_[75]=h):(a=_[70],d=_[71],c=_[72],u=_[73],p=_[74],h=_[75]);let w=$?._id??P;_[76]!==v||_[77]!==w?(f=(0,o.jsx)(iv,{documentId:w,isPinnedDraftOrPublished:v}),_[76]=v,_[77]=w,_[78]=f):f=_[78],_[79]!==r||_[80]!==s||_[81]!==f?(x=(0,o.jsxs)(o.Fragment,{children:[r,s,a,d,c,u,p,h,f]}),_[79]=r,_[80]=s,_[81]=f,_[82]=x):x=_[82],b=x}let eo=b,es=K.resizablePanes||!ei;return _[83]!==en||_[84]!==eo||_[85]!==H||_[86]!==E||_[87]!==et||_[88]!==x||_[89]!==V||_[90]!==ee||_[91]!==Q||_[92]!==es?(y=es&&(0,o.jsxs)(a.kC,{height:"fill",direction:"column",width:"fill",flex:2,children:[(0,o.jsxs)(m.jr5,{zOffset:"paneHeader",children:[eo,(0,o.jsx)(iR,{})]}),(0,o.jsx)(iM,{flex:2,overflow:"hidden",children:(0,o.jsx)(a.Xp,{element:Q,__unstable_elements:{documentScrollElement:H},children:(0,o.jsx)(a.NM,{element:H,children:(0,o.jsxs)(m.Ahg,{scrollElement:H,containerElement:Y,children:[(0,o.jsxs)(iD,{$disabled:V||!1,"data-testid":"document-panel-scroller",ref:q,children:[(0,o.jsx)(iE,{hidden:et,margins:ee,ref:Y}),en]}),x,(0,o.jsx)("div",{"data-testid":"document-panel-portal",ref:X})]})})})}),E]}),_[83]=en,_[84]=eo,_[85]=H,_[86]=E,_[87]=et,_[88]=x,_[89]=V,_[90]=ee,_[91]=Q,_[92]=es,_[93]=y):y=_[93],_[94]!==P||_[95]!==S||_[96]!==L||_[97]!==ei?(v=ei&&(0,o.jsx)(a.NM,{element:S,children:(0,o.jsx)(nL,{documentId:P,documentType:L.name,flex:1})}),_[94]=P,_[95]=S,_[96]=L,_[97]=ei,_[98]=v):v=_[98],_[99]!==y||_[100]!==v?(j=(0,o.jsx)(ti,{children:(0,o.jsxs)(a.kC,{height:"fill",children:[y,v]})}),_[99]=y,_[100]=v,_[101]=j):j=_[101],j};iL.displayName="DocumentPanel";let iN=!1,iO=Object.freeze({}),iU=Symbol("LOADING_PANE"),iB="documentPanelPortalElement",iV=["left","bottom"],iG={small:0,medium:1,large:2,full:"auto"};function iF(e){let t,n;let i=(0,s.c)(5),{dialog:l,referenceElement:r}=e;return i[0]!==l?(t=(0,o.jsx)(iK,{dialog:l}),i[0]=l,i[1]=t):t=i[1],i[2]!==r||i[3]!==t?(n=(0,o.jsx)(a.J2,{content:t,fallbackPlacements:iV,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:r}),i[2]=r,i[3]=t,i[4]=n):n=i[4],n}function iK(e){let t,n,i,r,d,u,p,h,f,x,g;let b=(0,s.c)(29),{dialog:y}=e,{cancelButtonIcon:v,cancelButtonText:j,confirmButtonIcon:_,confirmButtonText:w,message:k,onCancel:C,onConfirm:S,tone:z}=y,{t:E}=(0,m.$G7)(l.UA),{isTopLayer:I}=(0,a.sJ)(),$=(0,c.useRef)(null);return b[0]!==I||b[1]!==C?(t=e=>{"Escape"===e.key&&I&&C()},b[0]=I,b[1]=C,b[2]=t):t=b[2],(0,a.qh)(t),b[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>[$.current],b[3]=n):n=b[3],(0,a.Of)(I&&C,n),b[4]===Symbol.for("react.memo_cache_sentinel")?(i={minWidth:304,maxWidth:400},b[4]=i):i=b[4],b[5]!==k?(r=(0,o.jsx)(a.xu,{flex:1,overflow:"auto",padding:4,children:(0,o.jsx)(a.xv,{children:k})}),b[5]=k,b[6]=r):r=b[6],b[7]===Symbol.for("react.memo_cache_sentinel")?(d={borderTop:"1px solid var(--card-border-color)"},b[7]=d):d=b[7],b[8]!==j||b[9]!==E?(u=j||E("confirm-dialog.cancel-button.fallback-text"),b[8]=j,b[9]=E,b[10]=u):u=b[10],b[11]!==v||b[12]!==C||b[13]!==u?(p=(0,o.jsx)(a.zx,{"data-testid":"confirm-dialog-cancel-button",icon:v,onClick:C,mode:"ghost",text:u}),b[11]=v,b[12]=C,b[13]=u,b[14]=p):p=b[14],b[15]!==w||b[16]!==E?(h=w||E("confirm-dialog.confirm-button.fallback-text"),b[15]=w,b[16]=E,b[17]=h):h=b[17],b[18]!==_||b[19]!==S||b[20]!==h||b[21]!==z?(f=(0,o.jsx)(a.zx,{"data-testid":"confirm-dialog-confirm-button",icon:_,onClick:S,text:h,tone:z}),b[18]=_,b[19]=S,b[20]=h,b[21]=z,b[22]=f):f=b[22],b[23]!==p||b[24]!==f?(x=(0,o.jsx)(a.xu,{paddingX:4,paddingY:3,style:d,children:(0,o.jsxs)(a.rj,{columns:2,gap:2,children:[p,f]})}),b[23]=p,b[24]=f,b[25]=x):x=b[25],b[26]!==r||b[27]!==x?(g=(0,o.jsxs)(a.kC,{direction:"column",ref:$,style:i,children:[r,x]}),b[26]=r,b[27]=x,b[28]=g):g=b[28],g}function iW(e){let t,n,i;let l=(0,s.c)(12),{dialog:r}=e,u=(0,c.useId)();l[0]!==r.footer?(t=r.footer&&(0,o.jsx)(a.xu,{paddingX:4,paddingY:3,children:r.footer}),l[0]=r.footer,l[1]=t):t=l[1];let p=t,h=!1===r.showCloseButton,f=void 0===r.width?1:iG[r.width];return l[2]!==r.content?(n=(0,o.jsx)(a.xu,{padding:4,children:r.content}),l[2]=r.content,l[3]=n):n=l[3],l[4]!==r.header||l[5]!==r.onClose||l[6]!==u||l[7]!==p||l[8]!==h||l[9]!==f||l[10]!==n?(i=(0,o.jsx)(m.jr5,{zOffset:"fullscreen",children:(0,o.jsx)(d.Vq,{animate:!0,__unstable_hideCloseButton:h,footer:p,header:r.header,id:u,onClose:r.onClose,onClickOutside:r.onClose,width:f,children:n})}),l[4]=r.header,l[5]=r.onClose,l[6]=u,l[7]=p,l[8]=h,l[9]=f,l[10]=n,l[11]=i):i=l[11],i}function iX(e){let t,n;let i=(0,s.c)(5),{dialog:l,referenceElement:r}=e;return i[0]!==l?(t=(0,o.jsx)(iH,{dialog:l}),i[0]=l,i[1]=t):t=i[1],i[2]!==r||i[3]!==t?(n=(0,o.jsx)(a.J2,{content:t,fallbackPlacements:iV,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:r}),i[2]=r,i[3]=t,i[4]=n):n=i[4],n}function iH(e){let t,n,i;let l=(0,s.c)(6),{dialog:r}=e,{content:d,onClose:u}=r,{isTopLayer:p}=(0,a.sJ)(),m=(0,c.useRef)(null);return l[0]!==p||l[1]!==u?(t=e=>{"Escape"===e.key&&p&&u()},l[0]=p,l[1]=u,l[2]=t):t=l[2],(0,a.qh)(t),l[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>[m.current],l[3]=n):n=l[3],(0,a.Of)(p&&u,n),l[4]!==d?(i=(0,o.jsx)("div",{ref:m,children:d}),l[4]=d,l[5]=i):i=l[5],i}function iq(e){let t;let n=(0,s.c)(3),{children:i}=e,{element:l,elements:r}=(0,a.vI)(),d=r?.[iB]||l;return n[0]!==i||n[1]!==d?(t=(0,o.jsx)(a.Xp,{element:d,children:i}),n[0]=i,n[1]=d,n[2]=t):t=n[2],t}function iY(e){let t,n;let i=(0,s.c)(17),{dialog:l,referenceElement:d}=e,u=void 0===d?null:d,p=(0,c.useId)();if("confirm"===l.type){let e;return i[0]!==l||i[1]!==u?(e=(0,o.jsx)(iF,{dialog:l,referenceElement:u}),i[0]=l,i[1]=u,i[2]=e):e=i[2],e}if("popover"===l.type){let e;return i[3]!==l||i[4]!==u?(e=(0,o.jsx)(iX,{dialog:l,referenceElement:u}),i[3]=l,i[4]=u,i[5]=e):e=i[5],e}if("dialog"===l.type||!l.type){let e;return i[6]!==l?(e=(0,o.jsx)(iq,{children:(0,o.jsx)(iW,{dialog:l})}),i[6]=l,i[7]=e):e=i[7],e}if("custom"===l.type){let e;let t=l?.component;return i[8]!==t?(e=(0,o.jsx)(iq,{children:t}),i[8]=t,i[9]=e):e=i[9],e}return console.warn(`Unsupported modal type ${l.type}`),i[10]!==l.content||i[11]!==l.type?(t=l.content||(0,o.jsxs)(a.xv,{size:1,children:["Unexpected modal type (",(0,o.jsx)("code",{children:l.type}),")"]}),i[10]=l.content,i[11]=l.type,i[12]=t):t=i[12],i[13]!==p||i[14]!==t||i[15]!==l.onClose?(n=(0,o.jsx)(r.Vq,{id:p,onClose:l.onClose,onClickOutside:l.onClose,width:1,children:t}),i[13]=p,i[14]=t,i[15]=l.onClose,i[16]=n):n=i[16],n}let iZ=(0,c.memo)(function(e){let t,n,i,l,r,a;let d=(0,s.c)(9),{actionStates:u,children:p,referenceElement:h}=e,[f,x]=(0,c.useState)(-1);t=u[f],d[0]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{x(e)},d[0]=n):n=d[0];let g=n;return d[1]!==p?(l=p({handleAction:g}),d[1]=p,d[2]=l):l=d[2],i=l,d[3]!==t||d[4]!==h?(r=t&&t.dialog&&(0,o.jsx)(m.jr5,{zOffset:"paneFooter",children:(0,o.jsx)(iY,{dialog:t.dialog,referenceElement:h})}),d[3]=t,d[4]=h,d[5]=r):r=d[5],d[6]!==i||d[7]!==r?(a=(0,o.jsxs)(o.Fragment,{children:[r,i]}),d[6]=i,d[7]=r,d[8]=a):a=d[8],a});function iJ(e){let t,n,i,d;let u=(0,s.c)(10),{actionStates:p,disabled:h}=e,f=(0,c.useId)(),[x,g]=(0,c.useState)(null);u[0]===Symbol.for("react.memo_cache_sentinel")?(n={placement:"top-end",portal:!0,preventOverflow:!0},u[0]=n):n=u[0],t=n;let{t:b}=(0,m.$G7)(l.UA);u[1]!==p||u[2]!==h||u[3]!==f||u[4]!==b?(i=e=>{let{handleAction:n}=e;return(0,o.jsx)(r.j2,{id:`${f}-action-menu`,button:(0,o.jsx)(m.lXN,{"aria-label":b("buttons.action-menu-button.aria-label"),disabled:h,"data-testid":"action-menu-button",tooltipProps:{content:b("buttons.action-menu-button.tooltip")}}),menu:(0,o.jsx)(a.v2,{padding:1,children:p.map((e,t)=>(0,o.jsx)(iQ,{actionState:e,disabled:h,index:t,onAction:n},t))}),popover:t,ref:g})},u[1]=p,u[2]=h,u[3]=f,u[4]=b,u[5]=i):i=u[5];let y=i;return u[6]!==p||u[7]!==x||u[8]!==y?(d=(0,o.jsx)(iZ,{actionStates:p,referenceElement:x,children:y}),u[6]=p,u[7]=x,u[8]=y,u[9]=d):d=u[9],d}function iQ(e){let t,n,i,l,a;let d=(0,s.c)(18),{actionState:c,disabled:u,index:p,onAction:m}=e,{onHandle:h}=c;d[0]!==p||d[1]!==m||d[2]!==h?(t=()=>{m(p),h&&h()},d[0]=p,d[1]=m,d[2]=h,d[3]=t):t=d[3];let f=t;d[4]!==c.shortcut?(i=c.shortcut?String(c.shortcut).split("+").map(i0):void 0,d[4]=c.shortcut,d[5]=i):i=d[5],n=i;let x=`action-${c.label.replace(" ","")}`,g=u||!!c.disabled;return d[6]!==c.disabled||d[7]!==c.title?(l=c.disabled&&{tooltipProps:{content:c.title}},d[6]=c.disabled,d[7]=c.title,d[8]=l):l=d[8],d[9]!==c.icon||d[10]!==c.label||d[11]!==c.tone||d[12]!==f||d[13]!==n||d[14]!==x||d[15]!==g||d[16]!==l?(a=(0,o.jsx)(r.sN,{"data-testid":x,disabled:g,hotkeys:n,icon:c.icon,onClick:f,text:c.label,tone:c.tone,...l}),d[9]=c.icon,d[10]=c.label,d[11]=c.tone,d[12]=f,d[13]=n,d[14]=x,d[15]=g,d[16]=l,d[17]=a):a=d[17],a}function i0(e){return e.slice(0,1).toUpperCase()+e.slice(1)}let i1={NOTHING_TO_DELETE:"action.delete.disabled.nothing-to-delete",NOT_READY:"action.delete.disabled.not-ready"},i2=e=>{let t,n,i,r,a;let d=(0,s.c)(36),{id:u,type:h,draft:f,onComplete:x,release:g}=e,{setIsDeleting:b}=nv(),{delete:y}=(0,m.d9t)(u,h,g),[v,j]=(0,c.useState)(!1),[_,w]=(0,c.useState)(!1),{t:k}=(0,m.$G7)(l.UA);d[0]!==x?(t=()=>{w(!1),x()},d[0]=x,d[1]=t):t=d[1];let C=t;d[2]!==y||d[3]!==x||d[4]!==b?(n=()=>{j(!0),w(!1),b(!0),y.execute(),x()},d[2]=y,d[3]=x,d[4]=b,d[5]=n):n=d[5];let S=n;d[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{w(!0)},d[6]=i):i=d[6];let z=i;d[7]!==u||d[8]!==g||d[9]!==h?(r={id:u,type:h,version:g,permission:"delete"},d[7]=u,d[8]=g,d[9]=h,d[10]=r):r=d[10];let[E,I]=(0,m.hHf)(r),$=(0,m.xJ)();e:{let e,t,n,i;if(!I&&!E?.granted){let e,t,n;d[11]!==k?(e=k("action.delete.label"),d[11]=k,d[12]=e):e=d[12],d[13]!==$?(t=(0,o.jsx)(m.FMn,{context:"delete-document",currentUser:$}),d[13]=$,d[14]=t):t=d[14],d[15]!==e||d[16]!==t?(n={tone:"critical",icon:p.XHJ,disabled:!0,label:e,title:t},d[15]=e,d[16]=t,d[17]=n):n=d[17],a=n;break e}let l=v||!!y.disabled||I;d[18]!==y.disabled||d[19]!==k?(e=y.disabled&&k(i1[y.disabled])||"",d[18]=y.disabled,d[19]=k,d[20]=e):e=d[20],d[21]!==v||d[22]!==k?(t=k(v?"action.delete.running.label":"action.delete.label"),d[21]=v,d[22]=k,d[23]=t):t=d[23],d[24]!==f?._id||d[25]!==C||d[26]!==S||d[27]!==u||d[28]!==_||d[29]!==h?(n=_&&{type:"custom",component:(0,o.jsx)(e5,{action:"delete",id:f?._id||u,type:h,onCancel:C,onConfirm:S})},d[24]=f?._id,d[25]=C,d[26]=S,d[27]=u,d[28]=_,d[29]=h,d[30]=n):n=d[30],d[31]!==l||d[32]!==e||d[33]!==t||d[34]!==n?(i={tone:"critical",icon:p.XHJ,disabled:l,title:e,label:t,shortcut:"Ctrl+Alt+D",onHandle:z,dialog:n},d[31]=l,d[32]=e,d[33]=t,d[34]=n,d[35]=i):i=d[35],a=i}return a};i2.action="delete",i2.displayName="DeleteAction";let i3={NO_CHANGES:"action.discard-changes.disabled.no-change",NOT_PUBLISHED:"action.discard-changes.disabled.not-published",NOT_READY:"action.discard-changes.disabled.not-ready"},i4=({id:e,type:t,published:n,liveEdit:i,onComplete:r,release:s})=>{let{discardChanges:a}=(0,m.d9t)(e,t,s),[d,u]=(0,c.useState)(!1),[h,f]=(0,m.hHf)({id:e,type:t,version:s,permission:"discardDraft"}),x=(0,m.xJ)(),{displayed:g}=nv(),{t:b}=(0,m.$G7)(l.UA),y=g?._id&&(0,m.aEi)(g?._id),v=(0,c.useCallback)(()=>{a.execute(),r()},[a,r]),j=(0,c.useCallback)(()=>{u(!0)},[]),_=(0,c.useMemo)(()=>d&&{type:"confirm",tone:"critical",onCancel:r,onConfirm:v,message:b("action.discard-changes.confirm-dialog.confirm-discard-changes")},[v,d,r,b]);return(0,c.useMemo)(()=>!n||i||y?null:f||h?.granted?{tone:"critical",icon:p.X5P,disabled:!!a.disabled||f,title:b(a.disabled&&i3[a.disabled]||""),label:b("action.discard-changes.label"),onHandle:j,dialog:_}:{tone:"critical",icon:p.X5P,disabled:!0,label:b("action.discard-changes.label"),title:(0,o.jsx)(m.FMn,{context:"discard-changes",currentUser:x})},[x,_,a.disabled,j,f,y,i,h?.granted,n,b])};i4.action="discardChanges",i4.displayName="DiscardChangesAction";let i5={NOTHING_TO_DUPLICATE:"action.duplicate.disabled.nothing-to-duplicate",NOT_READY:"action.duplicate.disabled.not-ready"},i6=({id:e,type:t,onComplete:n,release:i,mapDocument:r})=>{let s=(0,m.H__)(),{duplicate:a}=(0,m.d9t)(e,t,i),{navigateIntent:d}=(0,j.tv)(),[u,h]=(0,c.useState)(!1),[x,g]=(0,m.hHf)({id:e,type:t,version:i,permission:"duplicate"}),{t:b}=(0,m.$G7)(l.UA),y=(0,m.xJ)(),v=(0,c.useCallback)(async()=>{let i=(0,f.Z)();h(!0);let l=(0,D.z)(s.pair.operationEvents(e,t).pipe((0,$.h)(e=>"duplicate"===e.op&&"success"===e.type)));a.execute(i,{mapDocument:r}),await l,d("edit",{id:i,type:t}),n()},[s.pair,a,e,r,d,n,t]);return(0,c.useMemo)(()=>g||x?.granted?{icon:p.TIy,disabled:u||!!a.disabled||g,label:b(u?"action.duplicate.running.label":"action.duplicate.label"),title:a.disabled?b(i5[a.disabled]):"",onHandle:v}:{icon:p.TIy,disabled:!0,label:b("action.duplicate.label"),title:(0,o.jsx)(m.FMn,{context:"duplicate-document",currentUser:y})},[y,a.disabled,v,u,g,x?.granted,b])};i6.action="duplicate",i6.displayName="DuplicateAction";let i7=e=>{let t,n,i,r,o,a;let d=(0,s.c)(27),{id:u,type:h,revision:f,onComplete:x,release:g}=e,{restore:b}=(0,m.d9t)(u,h,g),{revisionNotFound:y}=nv(),v=(0,m.E6V)(u,h),{navigateIntent:_}=(0,j.tv)(),w=(0,c.useRef)(v),[k,C]=(0,c.useState)(!1),{t:S}=(0,m.$G7)(l.UA);d[0]!==x||d[1]!==b||d[2]!==f?(t=()=>{b.execute(f),x()},d[0]=x,d[1]=b,d[2]=f,d[3]=t):t=d[3];let z=t;d[4]!==v||d[5]!==u||d[6]!==_||d[7]!==h?(n=()=>{v&&v!==w.current&&("success"===v.type&&"restore"===v.op&&_("edit",{id:u,type:h}),w.current=v)},i=[v,u,_,h],d[4]=v,d[5]=u,d[6]=_,d[7]=h,d[8]=n,d[9]=i):(n=d[8],i=d[9]),(0,c.useEffect)(n,i),d[10]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{C(!0)},d[10]=r):r=d[10];let E=r;e:{if(k){let e,t;d[11]!==S?(e=S("action.restore.confirm.message"),d[11]=S,d[12]=e):e=d[12],d[13]!==z||d[14]!==x||d[15]!==e?(t={type:"confirm",tone:"critical",onCancel:x,onConfirm:z,message:e},d[13]=z,d[14]=x,d[15]=e,d[16]=t):t=d[16],o=t;break e}o=null}let I=o,$="@initial"===f,P=void 0===f;t:{let e,t,n;if(P||y){a=null;break t}d[17]!==S?(e=S("action.restore.label"),d[17]=S,d[18]=e):e=d[18];let i=$?"action.restore.disabled.cannot-restore-initial":"action.restore.tooltip";d[19]!==S||d[20]!==i?(t=S(i),d[19]=S,d[20]=i,d[21]=t):t=d[21],d[22]!==I||d[23]!==$||d[24]!==e||d[25]!==t?(n={label:e,tone:"caution",onHandle:E,title:t,icon:p.V13,dialog:I,disabled:$},d[22]=I,d[23]=$,d[24]=e,d[25]=t,d[26]=n):n=d[26],a=n}return a};i7.action="restore",i7.displayName="HistoryRestoreAction";let i8=(0,em.dS)({name:"Document Published",version:1,description:'User clicked the "Publish" button in the document pane'}),i9={LIVE_EDIT_ENABLED:"action.publish.live-edit.publish-disabled",ALREADY_PUBLISHED:"action.publish.already-published.no-time-ago.tooltip",NO_CHANGES:"action.publish.no-changes.tooltip",NOT_READY:"action.publish.disabled.not-ready"};function le(e,t,n){return"ALREADY_PUBLISHED"===e&&t?(0,o.jsx)(lt,{publishedAt:t}):n(i9[e])}function lt(e){let t,n,i;let r=(0,s.c)(6),{publishedAt:a}=e,{t:d}=(0,m.$G7)(l.UA);r[0]===Symbol.for("react.memo_cache_sentinel")?(t={useTemporalPhrase:!0},r[0]=t):t=r[0];let c=(0,m.ofl)(a,t);return r[1]!==d||r[2]!==c?(n=d("action.publish.already-published.tooltip",{timeSincePublished:c}),r[1]=d,r[2]=c,r[3]=n):n=r[3],r[4]!==n?(i=(0,o.jsx)("span",{children:n}),r[4]=n,r[5]=i):i=r[5],i}let ln=e=>{let t,n,i,r,a,d,u,f,x,g,b;let y=(0,s.c)(78),{id:v,type:j,liveEdit:_,draft:w,published:k,release:C}=e,[S,z]=(0,c.useState)(null),{publish:E}=(0,m.d9t)(v,j),I=(0,m.a3k)(v,j),$=(0,m.nuD)(v,j),{changesOpen:P,documentId:A,documentType:T,value:R}=nv(),M=(0,m.iav)(A,T),{t:D}=(0,m.$G7)(l.UA);y[0]!==M?.draft||y[1]!==M?.published?(t=M?.draft||M?.published||{},y[0]=M?.draft,y[1]=M?.published,y[2]=t):t=y[2];let L=t._rev;y[3]!==I.validation?(n=I.validation.some(h.YN),y[3]=I.validation,y[4]=n):n=y[4];let N=n,[O,U]=(0,c.useState)(!1),B=$.isSyncing,V=I.isValidating;y[5]!==v||y[6]!==j?(i={id:v,type:j,permission:"publish"},y[5]=v,y[6]=j,y[7]=i):i=y[7];let[G,F]=(0,m.hHf)(i),K=(0,m.xJ)();y[8]!==N||y[9]!==E.disabled||y[10]!==k||y[11]!==D?(r=E.disabled?le(E.disabled,(k||{})._updatedAt,D)||"":N?D("action.publish.validation-issues.tooltip"):"",y[8]=N,y[9]=E.disabled,y[10]=k,y[11]=D,y[12]=r):r=y[12];let W=r,X=!!w;y[13]!==E?(a=()=>{E.execute(),z("publishing")},y[13]=E,y[14]=a):a=y[14];let H=a;y[15]!==H||y[16]!==N||y[17]!==B||y[18]!==O||y[19]!==L||y[20]!==I.isValidating||y[21]!==I.revision?(d=()=>{let e=!1===I.isValidating&&I.revision!==L;O&&!B&&e&&(N||H(),U(!1))},y[15]=H,y[16]=N,y[17]=B,y[18]=O,y[19]=L,y[20]=I.isValidating,y[21]=I.revision,y[22]=d):d=y[22],y[23]!==H||y[24]!==N||y[25]!==B||y[26]!==V||y[27]!==O||y[28]!==L||y[29]!==I.isValidating||y[30]!==I.revision?(u=[B,H,N,O,I.revision,L,V,I.isValidating],y[23]=H,y[24]=N,y[25]=B,y[26]=V,y[27]=O,y[28]=L,y[29]=I.isValidating,y[30]=I.revision,y[31]=u):u=y[31],(0,c.useEffect)(d,u),y[32]!==X||y[33]!==S?(f=()=>{let e="publishing"===S&&!X,t=e?"published":null,n=setTimeout(()=>{z(t)},e?200:4e3);return()=>clearTimeout(n)},y[32]=X,y[33]=S,y[34]=f):f=y[34],y[35]!==P||y[36]!==X||y[37]!==S?(x=[P,S,X],y[35]=P,y[36]=X,y[37]=S,y[38]=x):x=y[38],(0,c.useEffect)(f,x);let q=(0,ep.f1)();y[39]!==H||y[40]!==w?._createdAt||y[41]!==k||y[42]!==L||y[43]!==$.isSyncing||y[44]!==q||y[45]!==I.isValidating||y[46]!==I.revision?(g=()=>{q.log(i8,{publishedImmediately:!w?._createdAt,previouslyPublished:!!k}),$.isSyncing||I.isValidating||I.revision!==L?U(!0):H()},y[39]=H,y[40]=w?._createdAt,y[41]=k,y[42]=L,y[43]=$.isSyncing,y[44]=q,y[45]=I.isValidating,y[46]=I.revision,y[47]=g):g=y[47];let Y=g;e:{let e,t,n;if(C||_){b=null;break e}if((0,m.aEi)(R._id)&&null!==w){let e,t,n;y[48]!==D?(e=D("action.publish.label"),y[48]=D,y[49]=e):e=y[49];let i=k?._updatedAt;y[50]!==D||y[51]!==i?(t=le("ALREADY_PUBLISHED",i,D),y[50]=D,y[51]=i,y[52]=t):t=y[52],y[53]!==e||y[54]!==t?(n={tone:"default",icon:p.EI4,label:e,title:t,disabled:!0},y[53]=e,y[54]=t,y[55]=n):n=y[55],b=n;break e}if(!F&&!G?.granted){let e,t,n;y[56]!==D?(e=D("action.publish.label"),y[56]=D,y[57]=e):e=y[57],y[58]!==K?(t=(0,o.jsx)(m.FMn,{context:"publish-document",currentUser:K}),y[58]=K,y[59]=t):t=y[59],y[60]!==e||y[61]!==t?(n={tone:"default",icon:p.EI4,label:e,title:t,disabled:!0},y[60]=e,y[61]=t,y[62]=n):n=y[62],b=n;break e}let i=!!(O||M?.transactionSyncLock?.enabled||"publishing"===S||"published"===S||N||E.disabled),l=i||F;y[63]!==O||y[64]!==S||y[65]!==D?(e=D("published"===S?"action.publish.published.label":O||"publishing"===S?"action.publish.running.label":"action.publish.draft.label"),y[63]=O,y[64]=S,y[65]=D,y[66]=e):e=y[66],y[67]!==O||y[68]!==S||y[69]!==D||y[70]!==W?(t=O?D("action.publish.waiting"):"published"===S||"publishing"===S?null:W,y[67]=O,y[68]=S,y[69]=D,y[70]=W,y[71]=t):t=y[71];let r=i||O?null:"Ctrl+Alt+P";y[72]!==Y||y[73]!==l||y[74]!==e||y[75]!==t||y[76]!==r?(n={disabled:l,tone:"default",label:e,icon:p.EI4,title:t,shortcut:r,onHandle:Y},y[72]=Y,y[73]=l,y[74]=e,y[75]=t,y[76]=r,y[77]=n):n=y[77],b=n}return b};ln.action="publish",ln.displayName="PublishAction";let li={NOT_PUBLISHED:"action.unpublish.disabled.not-published",NOT_READY:"action.unpublish.disabled.not-ready",LIVE_EDIT_ENABLED:"action.unpublish.disabled.live-edit-enabled"},ll=({id:e,type:t,draft:n,onComplete:i,liveEdit:r,release:s})=>{let{unpublish:a}=(0,m.d9t)(e,t),[d,u]=(0,c.useState)(!1),[h,f]=(0,m.hHf)({id:e,type:t,permission:"unpublish"}),x=(0,m.xJ)(),{displayed:g}=nv(),{t:b}=(0,m.$G7)(l.UA),y=g?._id&&(0,m.Cb2)(g?._id),v=(0,c.useCallback)(()=>{u(!1),i()},[i]),j=(0,c.useCallback)(()=>{u(!1),a.execute(),i()},[i,a]),_=(0,c.useMemo)(()=>d?{type:"dialog",onClose:i,content:(0,o.jsx)(e5,{id:n?._id||e,type:t,action:"unpublish",onCancel:v,onConfirm:j})}:null,[n,e,v,j,d,i,t]);return(0,c.useMemo)(()=>s||y||r?null:f||h?.granted?{tone:"critical",icon:p.xEY,disabled:!!a.disabled||f,label:b("action.unpublish.label"),title:a.disabled?b(li[a.disabled]):"",onHandle:()=>u(!0),dialog:_}:{tone:"critical",icon:p.xEY,label:"Unpublish",title:(0,o.jsx)(m.FMn,{context:"unpublish-document",currentUser:x}),disabled:!0},[s,y,r,f,h?.granted,a.disabled,b,_,x])};ll.action="unpublish",ll.displayName="UnpublishAction";let lr=(0,c.memo)(function(e){let t,n,i,l,d,u,p,h,f;let x=(0,s.c)(33),{disabled:g,showMenu:b,states:y}=e,{__internal_tasks:v}=(0,m.Lky)(),{editState:j}=nv(),{selectedReleaseId:_}=(0,m.Wc0)();x[0]!==y?([t,...n]=y,x[0]=y,x[1]=t,x[2]=n):(t=x[1],n=x[2]);let[w,k]=(0,c.useState)(null);e:{let e,n,l,s;if(!t||!t.title&&!t.shortcut){i=null;break e}x[3]===Symbol.for("react.memo_cache_sentinel")?(e={maxWidth:300},x[3]=e):e=x[3],x[4]!==t.title?(n=t.title&&(0,o.jsx)(a.xv,{size:1,children:t.title}),x[4]=t.title,x[5]=n):n=x[5],x[6]!==t.shortcut?(l=t.shortcut&&(0,o.jsx)(r.p8,{"data-testid":"document-status-bar-hotkeys",fontSize:1,style:{marginTop:-4,marginBottom:-4},keys:String(t.shortcut).split("+").map(ld)}),x[6]=t.shortcut,x[7]=l):l=x[7],x[8]!==n||x[9]!==l?(s=(0,o.jsxs)(a.kC,{style:e,align:"center",gap:3,children:[n,l]}),x[8]=n,x[9]=l,x[10]=s):s=x[10],i=s}let C=i,S=_?t&&!(0,m.QTO)(t):t&&!j?.liveEdit;x[11]!==t||x[12]!==n||x[13]!==S?(d=S?n:[t,...n],x[11]=t,x[12]=n,x[13]=S,x[14]=d):d=x[14],l=d;let z=v&&v.footerAction;return x[15]!==g||x[16]!==t||x[17]!==S||x[18]!==C?(u=S&&(0,o.jsx)(a.li,{zOffset:200,children:(0,o.jsx)(r.u,{disabled:!C,content:C,placement:"top",children:(0,o.jsx)(a.Kq,{children:(0,o.jsx)(r.zx,{"data-testid":`action-${tl(t.label)}`,disabled:g||!!t.disabled,icon:t.icon,onClick:t.onHandle,ref:k,text:t.label,tone:t.tone||"primary"})})})}),x[15]=g,x[16]=t,x[17]=S,x[18]=C,x[19]=u):u=x[19],x[20]!==g||x[21]!==n||x[22]!==b||x[23]!==l?(p=b&&n.length>0&&(0,o.jsx)(iJ,{actionStates:l,disabled:g}),x[20]=g,x[21]=n,x[22]=b,x[23]=l,x[24]=p):p=x[24],x[25]!==w||x[26]!==t?(h=t&&t.dialog&&(0,o.jsx)(iY,{dialog:t.dialog,referenceElement:w}),x[25]=w,x[26]=t,x[27]=h):h=x[27],x[28]!==z||x[29]!==u||x[30]!==p||x[31]!==h?(f=(0,o.jsxs)(a.kC,{align:"center",gap:1,children:[z,u,p,h]}),x[28]=z,x[29]=u,x[30]=p,x[31]=h,x[32]=f):f=x[32],f}),lo=(0,c.memo)(function(){let e,t,n,i,l,r,a;let d=(0,s.c)(15),{actions:c,connectionState:u,documentId:p,editState:m,isInitialValueLoading:h}=nv();d[0]!==c?(t=c??[],d[0]=c,d[1]=t):t=d[1],d[2]!==t?(n=t.filter(lc),d[2]=t,d[3]=n):n=d[3],e=n,d[4]!==m||d[5]!==h?(l=m?{...m,initialValueResolved:!h}:null,d[4]=m,d[5]=h,d[6]=l):l=d[6],i=l,d[7]!==e.length||d[8]!==u||d[9]!==p?(r=t=>{let{states:n}=t;return(0,o.jsx)(lr,{disabled:"connected"!==u,showMenu:e.length>1,states:n},p)},d[7]=e.length,d[8]=u,d[9]=p,d[10]=r):r=d[10];let f=r;return 0!==e.length&&i?(d[11]!==i||d[12]!==e||d[13]!==f?(a=(0,o.jsx)(tq,{actions:e,actionProps:i,group:"default",children:f}),d[11]=i,d[12]=e,d[13]=f,d[14]=a):a=d[14],a):null}),ls=(0,c.memo)(function(){let e,t,n,i,l,r,a;let d=(0,s.c)(15),{actions:c,connectionState:u,editState:p,revisionId:m,isInitialValueLoading:h}=nv(),f=(p?.draft||p?.published||{})._rev===m;d[0]!==p||d[1]!==h||d[2]!==m?(t=p?{...p,revision:m||void 0,initialValueResolved:!h}:null,d[0]=p,d[1]=h,d[2]=m,d[3]=t):t=d[3],e=t,d[4]!==c?(i=c??[],d[4]=c,d[5]=i):i=d[5],d[6]!==i?(l=i.filter(la).slice(-1),d[6]=i,d[7]=l):l=d[7],n=l,d[8]!==u||d[9]!==f?(r=e=>{let{states:t}=e;return(0,o.jsx)(lr,{disabled:"connected"!==u||!!f,showMenu:!1,states:t})},d[8]=u,d[9]=f,d[10]=r):r=d[10];let x=r;return e?(d[11]!==e||d[12]!==n||d[13]!==x?(a=(0,o.jsx)(tq,{actions:n,actionProps:e,group:"default",children:x}),d[11]=e,d[12]=n,d[13]=x,d[14]=a):a=d[14],a):null});function la(e){return e.action===i7.action}function ld(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()}function lc(e){return!la(e)}let lu=e=>{let t=(0,s.c)(16),{release:n}=e,{t:i}=(0,m.$G7)();if("archived"===n.state){let e,n;return t[0]!==i?(e=i("release.chip.tooltip.archived"),t[0]=i,t[1]=e):e=t[1],t[2]!==e?(n=(0,o.jsx)(a.xv,{size:1,children:e}),t[2]=e,t[3]=n):n=t[3],n}if("asap"===n.metadata.releaseType){let e,n;return t[4]!==i?(e=i("release.type.asap"),t[4]=i,t[5]=e):e=t[5],t[6]!==e?(n=(0,o.jsx)(a.xv,{size:1,children:e}),t[6]=e,t[7]=n):n=t[7],n}if("scheduled"===n.metadata.releaseType){let e;let l="active"===n.state;return t[8]!==l||t[9]!==n||t[10]!==i?(e=n.metadata.intendedPublishAt&&(0,o.jsx)(a.xv,{size:1,children:l?(0,o.jsx)(m.vNl,{t:i,i18nKey:"release.chip.tooltip.intended-for-date",values:{date:(0,m.Bwd)(n)}}):(0,o.jsx)(m.vNl,{t:i,i18nKey:"release.chip.tooltip.scheduled-for-date",values:{date:(0,m.Bwd)(n)}})}),t[8]=l,t[9]=n,t[10]=i,t[11]=e):e=t[11],e}if("undecided"===n.metadata.releaseType){let e,n;return t[12]!==i?(e=i("release.type.undecided"),t[12]=i,t[13]=e):e=t[13],t[14]!==e?(n=(0,o.jsx)(a.xv,{size:1,children:e}),t[14]=e,t[15]=n):n=t[15],n}return null},lp={dateStyle:"medium",timeStyle:"short"},lm=(0,c.memo)(function(){let{selectedReleaseId:e,selectedPerspectiveName:t}=(0,m.Wc0)(),{t:n}=(0,m.$G7)(),i=(0,m.RQ8)(),{params:l,setParams:r}=eF(),s=(0,m.P9l)(lp),{loading:d}=(0,m.F6R)(),u=(0,m.I_y)(),{editState:p,displayed:h,documentType:f,documentId:x}=nv(),g=h&&!h._createdAt,b=nw({displayed:h,documentId:x}),y=(0,m.oiJ)({documentId:x}),v=(0,m.cFj)(),j=(0,c.useCallback)(e=>()=>{"published"===e&&l?.historyVersion&&r({...l,rev:l?.historyEvent||void 0,since:void 0,historyVersion:void 0}),i(e)},[i,r,l]),_=u.get(f),w=!!_&&nR(_),k=(0,c.useMemo)(()=>(!w||!!e)&&!p?.published,[w,e,p?.published]),C=(0,c.useCallback)(e=>{if(!l?.historyVersion)return{selected:(0,m.QXs)(e._id)===(0,m.eBk)(h?._id||"")};let t=(0,m.QXs)(e._id)===l.historyVersion;return{selected:t,disabled:t}},[h?._id,l?.historyVersion]),S=(0,c.useMemo)(()=>!!(w&&!p?.draft?._id&&!e||(0,m.aEi)(h?._id||"")&&(0,m.Vb0)(t||"")),[h?._id,p?.draft?._id,w,t,e]),z=(0,c.useMemo)(()=>{let e=h?._id||"";return!(S||l?.historyVersion||t||(0,m.Y_j)(e))&&(!!(0,m.Cb2)(e)||!((0,m.aEi)(e)&&p?.published&&(0,m.Vb0)(t||"")))},[h?._id,p?.published,S,l?.historyVersion,t]),E=(0,c.useMemo)(()=>!!y||!!g&&!!e||(!!p?.draft||!!w)&&!!(g&&e||w),[p?.draft,g,w,y,e]),I=v.document.drafts?.enabled;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(m.tyD,{tooltipContent:(0,o.jsx)(a.xv,{size:1,children:p?.published&&p?.published?._updatedAt?(0,o.jsx)(m.vNl,{t:n,i18nKey:"release.chip.tooltip.published-date",values:{date:s.format(new Date(p?.published._updatedAt))}}):(0,o.jsx)(o.Fragment,{children:n("release.chip.tooltip.not-published")})}),disabled:k,onClick:j("published"),selected:S,text:n("release.chip.published"),tone:"positive",contextValues:{documentId:p?.published?._id||p?.id||"",menuReleaseId:p?.published?._id||p?.id||"",releases:b.notCurrentReleases,releasesLoading:d,documentType:f,fromRelease:"published",isVersion:!1,disabled:!p?.published}}),I&&(0,o.jsx)(m.tyD,{tooltipContent:(0,o.jsx)(a.xv,{size:1,children:p?.draft?(0,o.jsx)(o.Fragment,{children:p?.draft._updatedAt?(0,o.jsx)(m.vNl,{t:n,i18nKey:"release.chip.tooltip.edited-date",values:{date:s.format(new Date(p?.draft._updatedAt))}}):(0,o.jsx)(m.vNl,{t:n,i18nKey:"release.chip.tooltip.created-date",values:{date:s.format(new Date(p?.draft._createdAt))}})}):(0,o.jsx)(o.Fragment,{children:n(w?"release.chip.tooltip.draft-disabled.live-edit":"release.chip.tooltip.no-edits")})}),selected:z,disabled:E,text:n("release.chip.draft"),tone:p?.draft?"caution":"neutral",onClick:j("drafts"),contextValues:{documentId:p?.draft?._id||p?.published?._id||p?.id||"",menuReleaseId:p?.draft?._id||p?.published?._id||p?.id||"",releases:b.notCurrentReleases,releasesLoading:d,documentType:f,fromRelease:"draft",isVersion:!1,disabled:!p?.draft}}),b.inCreation&&(0,o.jsx)(m.tyD,{tooltipContent:(0,o.jsx)(lu,{release:b.inCreation}),selected:!0,onClick:()=>{},locked:!1,tone:(0,m.Ydd)(b.inCreation),text:b.inCreation.metadata.title||n("release.placeholder-untitled-release"),contextValues:{disabled:!0,documentId:h?._id||"",menuReleaseId:b.inCreation._id,releases:b.notCurrentReleases,releasesLoading:d,documentType:f,fromRelease:(0,m.QXs)(b.inCreation._id),releaseState:b.inCreation.state,isVersion:!0}}),h&&b.currentReleases?.map(e=>o.jsx(m.tyD,{tooltipContent:o.jsx(lu,{release:e}),...C(e),onClick:j(m.QXs(e._id)),text:e.metadata.title||n("release.placeholder-untitled-release"),tone:m.Ydd(e),locked:m.$NU(e),contextValues:{documentId:h?._id||"",menuReleaseId:e._id,releases:b.notCurrentReleases,releasesLoading:d,documentType:f,fromRelease:m.QXs(e._id),releaseState:e.state,isVersion:!0}},e._id))]})}),lh=(0,x.zo)(a.Zb)(e=>{let t=(0,ey.aQ)(e.theme);return(0,x.iv)`
    scrollbar-width: none;
    z-index: 1;
    flex: 1;
    position: relative;
    > div {
      &::-webkit-scrollbar {
        width: 0;
        height: 0;
      }
    }

    ${e.$showGradient&&(0,x.iv)`
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        width: 150px;
        background: linear-gradient(to right, ${(0,ey.m4)(t.color.bg,0)}, var(--card-bg-color));
        transition: 'opacity 300ms ease-out';
        pointer-events: none;
      }
    `}
  `}),lf=(0,c.memo)((0,c.forwardRef)(function(e,t){let{menuItems:n}=e,{actions:i,editState:d,onMenuAction:u,isInitialValueLoading:h,onPaneClose:f,onPaneSplit:x,menuItemGroups:g,schemaType:b,connectionState:y,views:v,unstable_languageFilter:j}=nv(),{features:_}=nC(),{index:w,BackLink:k,hasGroupSiblings:C}=eF(),{actions:S}=(0,m.qGk)(),[z,E]=(0,c.useState)(null),I=(0,c.useRef)(null),$=function(e){let t,n;let i=(0,s.c)(4),[l,r]=(0,c.useState)(!1);return i[0]!==e.current?(t=()=>{let t=()=>{let t=e.current;if(!t)return;let{scrollWidth:n,clientWidth:i}=t;if(!(n>i)){r(!1);return}let{scrollLeft:l}=t;r(!(l+i>=n))},{intersectionObserver:n,mutationObserver:i}=function(){t();let n=e.current;if(!n)return{intersectionObserver:null,mutationObserver:null};let i=new IntersectionObserver(e=>{let t=e[0];t&&r(!t.isIntersecting)}),l=()=>{i.disconnect();let e=n.children[n.children.length-1];i.observe(e)};l();let o=new MutationObserver(()=>{l(),t()});return o.observe(n,{childList:!0,subtree:!1}),{intersectionObserver:i,mutationObserver:o}}();return()=>{n?.disconnect(),i?.disconnect()}},i[0]=e.current,i[1]=t):t=i[1],i[2]!==e?(n=[e],i[2]=e,i[3]=n):n=i[3],(0,c.useEffect)(t,n),l}(I),P=(0,c.useMemo)(()=>(i??[]).filter(e=>!la(e)),[i]),A=(0,c.useMemo)(()=>tT({actionHandler:u,fieldActions:S,menuItems:n,menuItemGroups:g}),[u,S,g,n]),T=(0,c.useMemo)(()=>A.filter(tP),[A]),R=(0,c.useMemo)(()=>A.filter(tA),[A]),{collapsed:M,isLast:D}=tn(),L=_.splitViews&&x&&v.length>1,N=L&&C,O=_.backButton&&w>0,U=!N&&!O&&!!k,{t:B}=(0,m.$G7)(l.UA),V=(0,c.useCallback)(({states:e})=>(0,o.jsx)(lx,{contextMenuNodes:R,setReferenceElement:E,referenceElement:z,states:e}),[R,z]),G=(0,c.useMemo)(()=>(0,o.jsx)(iA,{}),[]),F=(0,c.useMemo)(()=>O&&(0,o.jsx)(r.zx,{as:k,"data-as":"a",icon:p.Y4O,mode:"bleed",tooltipProps:{content:B("pane-header.back-button.text")}}),[k,O,B]),K=(0,c.useMemo)(()=>(0,o.jsxs)(a.kC,{align:"center",gap:1,children:[j.length>0&&(0,o.jsx)(o.Fragment,{children:j.map((e,t)=>(0,o.jsx)(e,{schemaType:b},`language-filter-${t}`))}),T.map(e=>(0,o.jsx)(tw,{node:e},e.key)),d&&(0,o.jsx)(tq,{actions:P,actionProps:{...d,initialValueResolved:!h},group:"paneActions",children:V}),L&&(0,o.jsx)(r.zx,{"aria-label":B("buttons.split-pane-button.aria-label"),icon:p.iro,mode:"bleed",onClick:x,tooltipProps:{content:B("buttons.split-pane-button.tooltip")}},"split-pane-button"),N&&(0,o.jsx)(r.zx,{icon:p.Two,mode:"bleed",onClick:f,tooltipProps:{content:B("buttons.split-pane-close-button.title")}},"close-view-button"),U&&(0,o.jsx)(r.zx,{icon:p.Two,mode:"bleed",tooltipProps:{content:B("buttons.split-pane-close-group-button.title")},as:k},"close-view-button")]}),[k,P,d,h,T,f,x,V,b,U,L,N,B,j]);return(0,o.jsx)(r.uE,{children:M?(0,o.jsx)(tj,{border:!0,ref:t,loading:"connecting"===y&&!d?.draft&&!d?.published,title:G,tabIndex:D&&!M?-1:0,backButton:F}):(0,o.jsx)(a.Zb,{hidden:M,style:{lineHeight:0},borderBottom:!0,children:(0,o.jsxs)(a.kC,{gap:3,paddingY:3,children:[(0,o.jsx)(lh,{$showGradient:$,children:(0,o.jsx)(a.kC,{flex:1,gap:1,overflow:"auto",paddingX:3,"data-testid":"document-perspective-list",ref:I,children:(0,o.jsx)(lm,{})})}),(0,o.jsx)(a.xu,{flex:"none",paddingRight:3,children:K})]})})})})),lx=(0,c.memo)(function(e){let t;let n=(0,s.c)(5),{setReferenceElement:i,referenceElement:l,contextMenuNodes:r}=e,a=(0,c.useDeferredValue)(e.states);return n[0]!==r||n[1]!==l||n[2]!==i||n[3]!==a?(t=(0,o.jsx)(lg,{setReferenceElement:i,referenceElement:l,contextMenuNodes:r,states:a}),n[0]=r,n[1]=l,n[2]=i,n[3]=a,n[4]=t):t=n[4],t}),lg=(0,c.memo)(function(e){let t,n;let i=(0,s.c)(8),{states:l,setReferenceElement:r,contextMenuNodes:a,referenceElement:d}=e;i[0]!==a||i[1]!==r||i[2]!==l?(t=e=>{let{handleAction:t}=e;return(0,o.jsx)("div",{ref:r,children:(0,o.jsx)(tp,{nodes:a,actionsNodes:l.length>0?l.map((e,n)=>(0,o.jsx)(iQ,{actionState:e,disabled:!!e.disabled,index:n,onAction:t},e.label)):void 0},"context-menu")})},i[0]=a,i[1]=r,i[2]=l,i[3]=t):t=i[3];let c=t;return i[4]!==d||i[5]!==c||i[6]!==l?(n=(0,o.jsx)(iZ,{actionStates:l,referenceElement:d,children:c}),i[4]=d,i[5]=c,i[6]=l,i[7]=n):n=i[7],n});function lb(e){let t,n;let i=(0,s.c)(3),{size:l}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={pointerEvents:"none",visibility:"hidden",width:0},i[0]=t):t=i[0],i[1]!==l?(n=(0,o.jsx)(r.zx,{"aria-hidden":!0,disabled:!0,size:l,style:t,text:"-"}),i[1]=l,i[2]=n):n=i[2],n}let ly={primary:"primary",success:"positive",warning:"caution",danger:"critical"},lv=(0,c.memo)(function(e){let t,n;let i=(0,s.c)(4),{states:l}=e;return 0===l.length?null:(i[0]!==l?(t=l.map(lk),i[0]=l,i[1]=t):t=i[1],i[2]!==t?(n=(0,o.jsx)(a.gF,{space:1,children:t}),i[2]=t,i[3]=n):n=i[3],n)}),lj=(0,c.memo)(function(e){let t;let n=(0,s.c)(2),i=(0,c.useDeferredValue)(e.states);return n[0]!==i?(t=(0,o.jsx)(lv,{states:i}),n[0]=i,n[1]=t):t=n[1],t});function l_(){let e;let t=(0,s.c)(3),{badges:n,editState:i}=nv();return i&&n?(t[0]!==n||t[1]!==i?(e=(0,o.jsx)(tJ,{badges:n,badgeProps:i,children:lw}),t[0]=n,t[1]=i,t[2]=e):e=t[2],e):null}function lw(e){let{states:t}=e;return(0,o.jsx)(lj,{states:t})}function lk(e,t){return(0,o.jsx)(r.u,{content:e.title,disabled:!e.title,placement:"top",portal:!0,children:(0,o.jsx)(a.Ct,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:e.color?ly[e.color]:void 0,style:{whiteSpace:"nowrap"},children:e.label})},`${e.label}-${t}`)}let lC={create:p.dtP,delete:p.XHJ,discardDraft:p.Two,initial:p.dtP,editDraft:p.dY8,editLive:p.dY8,publish:p.EI4,unpublish:p.xEY},lS=(0,x.zo)(p.wyc)`
  transition: transform 200ms;
  &[data-expanded='true'] {
    transform: rotate(-90deg);
  }
`;function lz(e){let t,n,i,a,d;let c=(0,s.c)(14),{isExpanded:u,onExpand:p}=e,{t:h}=(0,m.$G7)(l.UA);c[0]!==u||c[1]!==p?(t=e=>{e.stopPropagation(),function(e){if(e)return;let t=document.getElementById(lG);if(t){let e=t.children[0];if(!(e.scrollHeight>e.clientHeight)){let t=getComputedStyle(e).overflowY;e.style.overflowY="hidden",setTimeout(()=>{e.style.overflowY=t},0)}}}(u),p()},c[0]=u,c[1]=p,c[2]=t):t=c[2];let f=t;return c[3]!==u?(n=(0,o.jsx)(lS,{"data-expanded":u}),c[3]=u,c[4]=n):n=c[4],c[5]!==u||c[6]!==h?(i=h(u?"timeline-item.menu.action-collapse":"timeline-item.menu.action-expand"),c[5]=u,c[6]=h,c[7]=i):i=c[7],c[8]!==i?(a={content:i},c[8]=i,c[9]=a):a=c[9],c[10]!==f||c[11]!==n||c[12]!==a?(d=(0,o.jsx)(r.zx,{mode:"bleed",icon:n,tooltipProps:a,onClick:f}),c[10]=f,c[11]=n,c[12]=a,c[13]=d):d=c[13],d}let lE=(0,x.zo)(a.Kq)`
  max-width: 200px;
`,lI=(0,x.zo)(a.kC)`
  max-height: ${e=>e.$maxHeight};
  min-width: 244px;
`,l$=(0,x.zo)(a.xu)(({$visible:e})=>(0,x.iv)`
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;

    ${e&&(0,x.iv)`
      opacity: 1;
      pointer-events: auto;
    `}
  `),lP={initial:"timeline.operation.created-initial",create:"timeline.operation.created",publish:"timeline.operation.published",editLive:"timeline.operation.edited-live",editDraft:"timeline.operation.edited-draft",unpublish:"timeline.operation.unpublished",discardDraft:"timeline.operation.draft-discarded",delete:"timeline.operation.deleted"};function lA(e){let t,n;let i=(0,s.c)(9),{maxLength:l,userIds:r,size:d,withTooltip:c}=e,u=void 0===c||c;if(i[0]!==r||i[1]!==u){let e;i[3]!==u?(e=e=>(0,o.jsx)(m.YtX,{user:e,withTooltip:u},e),i[3]=u,i[4]=e):e=i[4],t=r.map(e),i[0]=r,i[1]=u,i[2]=t}else t=i[2];return i[5]!==l||i[6]!==d||i[7]!==t?(n=(0,o.jsx)(a.Jh,{maxLength:l,size:d,children:t}),i[5]=l,i[6]=d,i[7]=t,i[8]=n):n=i[8],n}let lT=(0,x.zo)(a.kC)(e=>{let t=(0,ey.aQ)(e.theme),n=e.$color;return(0,x.iv)`
    --card-icon-color: ${t.color.avatar[n].fg};
    background-color: ${t.color.avatar[n].bg};
    box-shadow: 0 0 0 1px var(--card-bg-color);

    position: absolute;
    width: ${t.avatar.sizes[0].size}px;
    height: ${t.avatar.sizes[0].size}px;
    right: -3px;
    bottom: -3px;
    border-radius: 50%;
  `}),lR={initial:"blue",create:"blue",publish:"green",editLive:"green",editDraft:"yellow",unpublish:"orange",discardDraft:"orange",delete:"red",withinSelection:"magenta"},lM={minimal:!0,useTemporalPhrase:!0},lD=(0,x.zo)(d.Od)(e=>{let t=(0,ey.aQ)(e.theme);return(0,x.iv)`
    width: 6ch;
    height: ${t.font.text.sizes[0].lineHeight}px;
  `}),lL=e=>{let t,n,i;let l=(0,s.c)(10),{userId:r}=e,[d,c]=(0,m.aFb)(r);return l[0]!==c||l[1]!==d?(t=(0,o.jsx)(a.xu,{children:c||!d?(0,o.jsx)(m.ZGG,{animated:!0}):(0,o.jsx)(m.YtX,{user:d})}),l[0]=c,l[1]=d,l[2]=t):t=l[2],l[3]!==c||l[4]!==d?(n=(0,o.jsx)(a.xu,{children:c||!d?.displayName?(0,o.jsx)(a.xv,{size:1,children:(0,o.jsx)(lD,{animated:!0})}):(0,o.jsx)(a.xv,{muted:!0,size:1,children:d.displayName})}),l[3]=c,l[4]=d,l[5]=n):n=l[5],l[6]!==t||l[7]!==n||l[8]!==r?(i=(0,o.jsxs)(a.kC,{align:"center",gap:2,padding:1,children:[t,n]},r),l[6]=t,l[7]=n,l[8]=r,l[9]=i):i=l[9],i},lN=e=>{let t,n,i,l;let r=(0,s.c)(9),{collaborators:d}=e,{t:c}=(0,m.$G7)("studio");return r[0]!==c?(t=c("timeline.changes.title"),r[0]=c,r[1]=t):t=r[1],r[2]!==t?(n=(0,o.jsx)(a.xu,{padding:1,paddingBottom:2,children:(0,o.jsx)(a.xv,{size:1,weight:"medium",children:t})}),r[2]=t,r[3]=n):n=r[3],r[4]!==d?(i=d.map(lU),r[4]=d,r[5]=i):i=r[5],r[6]!==n||r[7]!==i?(l=(0,o.jsxs)(a.Kq,{paddingBottom:1,children:[n,i]}),r[6]=n,r[7]=i,r[8]=l):l=r[8],l};function lO(e){let t,n,i,l,d,c,u,p,h,f,x,g,b,y,v,j,_,w,k,C,S,z;let E=(0,s.c)(55),{chunk:I,isSelected:$,onSelect:P,collaborators:A,optionsMenu:T}=e,{t:R}=(0,m.$G7)("studio"),{type:M,endTimestamp:D}=I;E[0]!==M?(t=lC[M],E[0]=M,E[1]=t):t=E[1];let L=t;E[2]!==I.authors?(n=Array.from(I.authors),E[2]=I.authors,E[3]=n):n=E[3];let N=n;E[4]!==A?(i=A?Array.from(A):[],E[4]=A,E[5]=i):i=E[5];let O=i,U="delete"!==M;E[6]===Symbol.for("react.memo_cache_sentinel")?(l={dateStyle:"medium",timeStyle:"short"},E[6]=l):l=E[6];let B=(0,m.P9l)(l);E[7]!==D?(d=new Date(D),E[7]=D,E[8]=d):d=E[8];let V=(0,m.ofl)(d||"",lM);if(E[9]!==B||E[10]!==D){let e=new Date(D);u=B.format(e),E[9]=B,E[10]=D,E[11]=u}else u=E[11];c=u,E[12]!==I||E[13]!==U||E[14]!==P?(p=e=>{e.preventDefault(),e.stopPropagation(),U&&P(I)},E[12]=I,E[13]=U,E[14]=P,E[15]=p):p=E[15];let G=p;E[16]===Symbol.for("react.memo_cache_sentinel")?(h={position:"relative"},E[16]=h):h=E[16],E[17]!==N?(f=(0,o.jsx)(lA,{maxLength:3,userIds:N,size:2}),E[17]=N,E[18]=f):f=E[18];let F=lR[M];return E[19]!==L?(x=L&&(0,o.jsx)(L,{}),E[19]=L,E[20]=x):x=E[20],E[21]!==x?(g=(0,o.jsx)(a.xv,{size:0,children:x}),E[21]=x,E[22]=g):g=E[22],E[23]!==F||E[24]!==g?(b=(0,o.jsx)(lT,{align:"center",justify:"center",$color:F,children:g}),E[23]=F,E[24]=g,E[25]=b):b=E[25],E[26]!==f||E[27]!==b?(y=(0,o.jsxs)("div",{style:h,children:[f,b]}),E[26]=f,E[27]=b,E[28]=y):y=E[28],E[29]!==R||E[30]!==M?(v=R(lP[M])||(0,o.jsx)("code",{children:M}),E[29]=R,E[30]=M,E[31]=v):v=E[31],E[32]!==v?(j=(0,o.jsx)(a.xv,{size:1,weight:"medium",children:v}),E[32]=v,E[33]=j):j=E[33],E[34]!==c||E[35]!==D||E[36]!==V?(_=(0,o.jsx)(a.xv,{as:"time",size:1,muted:!0,dateTime:D,title:c,children:V}),E[34]=c,E[35]=D,E[36]=V,E[37]=_):_=E[37],E[38]!==j||E[39]!==_?(w=(0,o.jsxs)(a.Kq,{space:2,children:[j,_]}),E[38]=j,E[39]=_,E[40]=w):w=E[40],E[41]!==O?(k=O.length>0&&(0,o.jsx)(a.kC,{flex:1,justify:"flex-end",align:"center",children:(0,o.jsx)(r.u,{placement:"top",content:(0,o.jsx)(lN,{collaborators:O}),portal:!0,children:(0,o.jsx)(a.xu,{paddingLeft:2,paddingY:2,children:(0,o.jsx)(lA,{maxLength:3,userIds:O,size:0,withTooltip:!1})})})}),E[41]=O,E[42]=k):k=E[42],E[43]!==y||E[44]!==w||E[45]!==k?(C=(0,o.jsxs)(a.kC,{align:"center",gap:3,children:[y,w,k]}),E[43]=y,E[44]=w,E[45]=k,E[46]=C):C=E[46],E[47]!==I.id||E[48]!==G||E[49]!==$||E[50]!==C?(S=(0,o.jsx)(a.Zb,{as:"button",onClick:G,padding:2,pressed:$,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-id":I.id,children:C}),E[47]=I.id,E[48]=G,E[49]=$,E[50]=C,E[51]=S):S=E[51],E[52]!==T||E[53]!==S?(z=(0,o.jsxs)(a.kC,{align:"center",gap:1,children:[S,T]}),E[52]=T,E[53]=S,E[54]=z):z=E[54],z}function lU(e){return(0,o.jsx)(lL,{userId:e},e)}let lB=e=>"publish"!==e.type,lV=e=>"publish"===e.type,lG="timeline-list-wrapper",lF=({chunks:e,hasMoreChunks:t,lastChunk:n,onLoadMore:i,onSelect:l,listMaxHeight:r="calc(100vh - 280px)"})=>{let[s,d]=(0,c.useState)(!1),{t:u}=(0,m.$G7)("studio"),p=n?.id,h=(0,c.useMemo)(()=>(function(e){let t=[];for(let n of e){if(lV(n)){t.push({...n,type:"publish",children:[],collaborators:new Set});continue}if(lB(n)){let e=function(e){let t=null;for(let n=e.length-1;n>=0;n--){let i=e[n];if(lV(i)){t=i;break}if("editDraft"!==i.type)break}return t}(t);if("editDraft"===n.type&&e?.type==="publish"){Array.from(n.authors).forEach(t=>{e.collaborators.add(t)}),e.children.push(n.id),t.push({...n,parentId:e.id});continue}}lB(n)&&t.push(n)}return t})(e),[e]),[f,x]=(0,c.useState)(()=>{if(p){let e=h.find(e=>e.id===p);if(e&&lB(e)&&e.parentId)return new Set([e.parentId])}return new Set});(0,c.useEffect)(()=>{if(p){let e=h.find(e=>e.id===p);if(e&&lB(e)&&e.parentId){let t=e.parentId;x(e=>{if(e.has(t))return e;let n=new Set(e);return n.add(t),n})}}},[h,p]);let g=(0,c.useMemo)(()=>h.filter(e=>!!lV(e)||!e.parentId||f.has(e.parentId)),[h,f]);(0,c.useEffect)(()=>{g.length<16&&t&&i()},[g,t,i]);let b=(0,c.useCallback)(e=>()=>x(t=>{let n=new Set(t);return t.has(e)?n.delete(e):n.add(e),n}),[]),y=(0,c.useMemo)(()=>p?g.findIndex(e=>e.id===p):-1,[p,g]),v=(0,c.useCallback)(t=>{let n=e.find(e=>e.id===t.id);n?l(n):(console.error("TimelineItem: chunk not found"),l(t))},[e,l]),j=(0,c.useCallback)((e,{activeIndex:n})=>(0,o.jsxs)(a.xu,{paddingBottom:1,paddingTop:0===n?1:0,paddingRight:1,paddingLeft:lB(e)&&e.parentId?4:1,children:[(0,o.jsx)(lO,{chunk:e,isSelected:p===e.id,onSelect:v,collaborators:lV(e)?e.collaborators:void 0,optionsMenu:lV(e)&&e.children.length>0?(0,o.jsx)(lz,{isExpanded:f.has(e.id),onExpand:b(e.id)}):null}),n===g.length-1&&t&&(0,o.jsx)(m.Bwn,{})]}),[f,g.length,b,v,t,p]);return(0,c.useEffect)(()=>d(!0),[]),(0,o.jsxs)(l$,{$visible:!y||s,"data-ui":"timeline",children:[0===g.length&&(0,o.jsxs)(lE,{padding:3,space:3,children:[(0,o.jsx)(a.xv,{size:1,weight:"medium",children:u("timeline.error.no-document-history-title")}),(0,o.jsx)(a.xv,{muted:!0,size:1,children:u("timeline.error.no-document-history-description")})]}),g.length>0&&(0,o.jsx)(lI,{direction:"column",$maxHeight:r,id:lG,children:(0,o.jsx)(m.e8h,{activeItemDataAttr:"data-hovered",ariaLabel:u("timeline.list.aria-label"),autoFocus:"list",initialIndex:y,initialScrollAlign:"center",itemHeight:57,items:g,onEndReached:i,onEndReachedIndexOffset:20,overscan:5,renderItem:j,wrapAround:!1})})]})};function lK(e){let t,n,i,l,r,d;let c=(0,s.c)(14),{versionError:u}=e,{t:h}=(0,m.$G7)("studio");return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(m.LPT,{tone:"critical",children:(0,o.jsx)(p.uIy,{})}),c[0]=t):t=c[0],c[1]!==h||c[2]!==u?(n=h(u?"timeline.error.load-document-changes-version-title":"timeline.error.load-document-changes-title"),c[1]=h,c[2]=u,c[3]=n):n=c[3],c[4]!==n?(i=(0,o.jsx)(m.LPT,{size:1,tone:"critical",weight:"medium",children:n}),c[4]=n,c[5]=i):i=c[5],c[6]!==h||c[7]!==u?(l=h(u?"timeline.error.load-document-changes-version-description":"timeline.error.load-document-changes-description"),c[6]=h,c[7]=u,c[8]=l):l=c[8],c[9]!==l?(r=(0,o.jsx)(m.LPT,{size:1,tone:"critical",children:l}),c[9]=l,c[10]=r):r=c[10],c[11]!==i||c[12]!==r?(d=(0,o.jsxs)(a.kC,{align:"flex-start",gap:3,padding:4,children:[t,(0,o.jsxs)(a.Kq,{space:4,children:[i,r]})]}),c[11]=i,c[12]=r,c[13]=d):d=c[13],d}lF.displayName="Timeline";let lW=(0,x.zo)(r.J2)`
  overflow: hidden;
  overflow: clip;
`,lX="timeline-menu";function lH({chunk:e,mode:t,placement:n}){let{setTimelineRange:i,timelineError:l,ready:s,timelineStore:u}=nv(),[h,f]=(0,c.useState)(!1),[x,g]=(0,c.useState)(null),[b,y]=(0,c.useState)(null),v=(0,d.pm)(),j=(0,m.P08)(u,e=>e.chunks),_=(0,m.P08)(u,e=>e.isLoading),w=(0,m.P08)(u,e=>e.hasMoreChunks),k=(0,m.P08)(u,e=>e.realRevChunk),C=(0,m.P08)(u,e=>e.sinceTime),{t:S}=(0,m.$G7)("studio"),z=(0,c.useCallback)(()=>{f(!0)},[]),E=(0,c.useCallback)(()=>{f(!1)},[]),I=(0,c.useCallback)(e=>{h&&("Escape"===e.key||"Tab"===e.key)&&(E(),x?.focus())},[x,E,h]);(0,a.qh)(I),(0,a.Of)(h&&E,()=>[x,b]);let $=(0,c.useCallback)(e=>{try{let[t,n]=u?.findRangeForRev(e)||[null,null];i(t,n)}catch(e){v.push({closable:!0,description:e.message,status:"error",title:S("timeline.error.unable-to-load-revision")})}},[i,S,u,v]),P=(0,c.useCallback)(e=>{try{let[t,n]=u?.findRangeForSince(e)||[null,null];i(t,n)}catch(e){v.push({closable:!0,description:e.message,status:"error",title:S("timeline.error.unable-to-load-revision")})}},[i,S,u,v]),A=(0,c.useCallback)(()=>{_||u?.loadMore()},[_,u]),T=(0,c.useMemo)(()=>{if(l)return(0,o.jsx)(lK,{});if("rev"===t)return(0,o.jsx)(lF,{chunks:j,hasMoreChunks:w,lastChunk:k,onLoadMore:A,onSelect:$});let e=k?j.filter(e=>e.index<k.index):j;return(0,o.jsx)(lF,{chunks:e,hasMoreChunks:w,lastChunk:C,onLoadMore:A,onSelect:P})},[j,A,w,t,k,$,P,C,l]),R={timestamp:{dateStyle:"medium",timeStyle:"short"}},M=e?S(lP[e.type],{context:"timestamp",timestamp:new Date(e?.endTimestamp),formatParams:R}):S("timeline.latest-revision"),D=e?S("timeline.since",{timestamp:new Date(e?.endTimestamp),formatParams:R}):S("timeline.since-version-missing"),L="rev"===t?M:D;return(0,o.jsx)(a.Xp,{__unstable_elements:{[lX]:b},children:(0,o.jsx)(lW,{"data-testid":"timeline-menu",constrainSize:!0,content:h&&T,"data-ui":"versionMenu",open:h,placement:n,matchReferenceWidth:!0,portal:!0,ref:y,children:(0,o.jsx)(a.kC,{width:"fill",children:(0,o.jsx)(r.zx,{"data-testid":h?"timeline-menu-close-button":"timeline-menu-open-button",disabled:!s,mode:"ghost",onClick:h?E:z,ref:g,selected:h,width:"fill",tooltipProps:null,justify:"space-between",style:{maxWidth:"100%"},iconRight:p.v4q,text:s?L:S("timeline.loading-history")})})})})}let lq=(0,x.zo)(b.E.path)`
  transform-origin: center;
`,lY=e=>{let t;let n=(0,s.c)(2);return n[0]!==e?(t=(0,o.jsx)(b.E.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...e}),n[0]=e,n[1]=t):t=n[1],t},lZ=e=>{let t;let n=(0,s.c)(2);return n[0]!==e?(t=(0,o.jsx)(lq,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...e}),n[0]=e,n[1]=t):t=n[1],t},lJ=e=>{let t;let n=(0,s.c)(2);return n[0]!==e?(t=(0,o.jsx)(b.E.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...e}),n[0]=e,n[1]=t):t=n[1],t},lQ=(0,x.F4)`
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(360deg);
  }
`,l0=x.zo.g`
  transform-origin: center;

  &[data-rotate] {
    animation: ${lQ} 1s ease-in-out infinite;
  }
`,l1={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},l2={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},l3={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},l4={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}};function l5(e){let t,n,i,l,r;let a=(0,s.c)(13),{status:d}=e;if(!d)return null;let c="changes"===d?void 0:"";return a[0]!==d?(t=(0,o.jsx)(lZ,{variants:l3,initial:d,animate:d}),n=(0,o.jsx)(lY,{variants:l2,initial:d,animate:d}),a[0]=d,a[1]=t,a[2]=n):(t=a[1],n=a[2]),a[3]!==c||a[4]!==t||a[5]!==n?(i=(0,o.jsxs)(l0,{"data-rotate":c,children:[t,n]}),a[3]=c,a[4]=t,a[5]=n,a[6]=i):i=a[6],a[7]!==d?(l=(0,o.jsx)(lJ,{variants:l4,initial:d,animate:d}),a[7]=d,a[8]=l):l=a[8],a[9]!==d||a[10]!==i||a[11]!==l?(r=(0,o.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"animated-status-icon",children:(0,o.jsxs)(b.E.g,{variants:l1,initial:d,animate:d,children:[i,l]})}),a[9]=d,a[10]=i,a[11]=l,a[12]=r):r=a[12],r}let l6={saved:{i18nKey:"status-bar.document-status-pulse.status.saved.text",tone:"positive"},syncing:{i18nKey:"status-bar.document-status-pulse.status.syncing.text",tone:"default"}},l7=e=>{let t,n,i,r,d;let c=(0,s.c)(13),{status:u}=e,{t:p}=(0,m.$G7)(l.UA);if("saved"!==u&&"syncing"!==u)return null;let h=l6[u];return c[0]!==u?(t=(0,o.jsx)(l5,{status:u}),c[0]=u,c[1]=t):t=c[1],c[2]!==h.tone||c[3]!==t?(n=(0,o.jsx)(m.LPT,{size:1,tone:h.tone,children:t}),c[2]=h.tone,c[3]=t,c[4]=n):n=c[4],c[5]!==h.i18nKey||c[6]!==p?(i=p(h.i18nKey),c[5]=h.i18nKey,c[6]=p,c[7]=i):i=c[7],c[8]!==i?(r=(0,o.jsx)(a.xv,{muted:!0,size:1,children:i}),c[8]=i,c[9]=r):r=c[9],c[10]!==n||c[11]!==r?(d=(0,o.jsxs)(a.kC,{align:"center",gap:2,"data-testid":"pane-footer-document-status-pulse",children:[n,r]}),c[10]=n,c[11]=r,c[12]=d):d=c[12],d},l8={minimal:!0,useTemporalPhrase:!0},l9=b.E.create(a.zx),re=b.E.create(a.xu),rt=()=>{let e,t;let n=(0,s.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)("div",{style:{margin:-5},children:(0,o.jsx)(m.ZGG,{$size:0,animated:!0})}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsxs)(a.kC,{align:"center",gap:3,paddingLeft:1,paddingRight:2,paddingY:2,children:[e,(0,o.jsx)(d.Od,{animated:!0,style:{width:"80px",height:"15px"},radius:2})]}),n[1]=t):t=n[1],t},rn=e=>{let t,n,i,l,r,d,c,u;let p=(0,s.c)(17),{author:h,translationKey:f,timestamp:x}=e,{onHistoryOpen:g,inspector:b,onHistoryClose:y}=nv(),{t:v}=(0,m.$G7)(),j=(0,m.ofl)(void 0===x?"":x,l8);p[0]===Symbol.for("react.memo_cache_sentinel")?(t={opacity:1},n={opacity:0},i={opacity:0},p[0]=t,p[1]=n,p[2]=i):(t=p[0],n=p[1],i=p[2]);let _=b?.name===nI?y:g;return p[3]!==h?(l=h&&(0,o.jsx)("div",{style:{margin:-5},children:(0,o.jsx)(m.YtX,{user:h,size:0})}),p[3]=h,p[4]=l):l=p[4],p[5]!==v||p[6]!==f?(r=v(f),p[5]=v,p[6]=f,p[7]=r):r=p[7],p[8]!==j||p[9]!==r?(d=(0,o.jsxs)(a.xv,{muted:!0,size:1,children:[r," ",j]}),p[8]=j,p[9]=r,p[10]=d):d=p[10],p[11]!==l||p[12]!==d?(c=(0,o.jsxs)(a.kC,{align:"center",flex:"none",gap:3,children:[l,d]}),p[11]=l,p[12]=d,p[13]=c):c=p[13],p[14]!==_||p[15]!==c?(u=(0,o.jsx)(l9,{"data-testid":"pane-footer-document-status",animate:t,initial:n,exit:i,mode:"bleed",onClick:_,padding:2,muted:!0,children:c}),p[14]=_,p[15]=c,p[16]=u):u=p[16],u},ri=()=>{let{editState:e}=nv(),{selectedPerspective:t}=(0,m.Wc0)(),n=(0,c.useMemo)(()=>(0,m.Vb0)(t)&&e?.published?._updatedAt?{translationKey:m.e9p.published.createDocumentVersion,timestamp:e.published._updatedAt}:e?.version?._updatedAt?{translationKey:e?.version?._updatedAt===e?.version?._createdAt?m.e9p.version.createDocumentVersion:m.e9p.version.editDocumentVersion,timestamp:e.version._updatedAt}:e?.draft?._updatedAt?{translationKey:e?.draft?._updatedAt===e?.draft?._createdAt?m.e9p.draft.createDocumentVersion:m.e9p.draft.editDocumentVersion,timestamp:e.draft._updatedAt}:null,[t,e?.published?._updatedAt,e?.version?._updatedAt,e?.version?._createdAt,e?.draft?._updatedAt,e?.draft?._createdAt]);return n?(0,o.jsx)(rn,{author:"",translationKey:n.translationKey,timestamp:n.timestamp}):null},rl=()=>{let e;let t=(0,s.c)(6),{events:n,loading:i}=(0,m.hIH)(),l=n?.[0];if(!l&&i){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(rt,{}),t[0]=e):e=t[0],e}if(!l){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(ri,{}),t[1]=e):e=t[1],e}let r=m.e9p[l.documentVariantType][l.type];return t[2]!==l.author||t[3]!==l.timestamp||t[4]!==r?(e=(0,o.jsx)(rn,{author:l.author,translationKey:r,timestamp:l.timestamp}),t[2]=l.author,t[3]=l.timestamp,t[4]=r,t[5]=e):e=t[5],e},rr=()=>{let e,t;let n=(0,s.c)(8),{timelineStore:i}=nv(),l=(0,m.P08)(i,rs),r=(0,m.P08)(i,ra),a=l?.[0];if(!a&&r){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(rt,{}),n[0]=e):e=n[0],e}if(!a){let e;return n[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(ri,{}),n[1]=e):e=n[1],e}n[2]!==a.authors?(e=Array.from(a.authors),n[2]=a.authors,n[3]=e):e=n[3];let d=e[0],c=lP[a.type];return n[4]!==d||n[5]!==a.endTimestamp||n[6]!==c?(t=(0,o.jsx)(rn,{author:d,translationKey:c,timestamp:a.endTimestamp}),n[4]=d,n[5]=a.endTimestamp,n[6]=c,n[7]=t):t=n[7],t};function ro(){let e,t,n,i,l,r,a;let d=(0,s.c)(18),{documentId:u,documentType:p,editState:h,value:f}=nv(),[x,g]=(0,c.useState)(null),b=m.Lky().beta?.eventsAPI?.documents,v=(0,m.nuD)(u,p,h?.release),j=f?._updatedAt;return d[0]!==x||d[1]!==v.isSyncing?(e=()=>{if("syncing"===x&&!v.isSyncing){let e=setTimeout(()=>g("saved"),1e3);return()=>clearTimeout(e)}if("saved"===x){let e=setTimeout(()=>g(null),3e3);return()=>clearTimeout(e)}},d[0]=x,d[1]=v.isSyncing,d[2]=e):e=d[2],d[3]!==j||d[4]!==x||d[5]!==v.isSyncing?(t=[x,j,v.isSyncing],d[3]=j,d[4]=x,d[5]=v.isSyncing,d[6]=t):t=d[6],(0,c.useEffect)(e,t),d[7]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{g(null)},d[7]=n):n=d[7],d[8]!==u?(i=[u],d[8]=u,d[9]=i):i=d[9],(0,c.useLayoutEffect)(n,i),d[10]!==v.isSyncing?(l=()=>{v.isSyncing&&g("syncing")},d[10]=v.isSyncing,d[11]=l):l=d[11],d[12]!==j||d[13]!==v.isSyncing?(r=[v.isSyncing,j],d[12]=j,d[13]=v.isSyncing,d[14]=r):r=d[14],(0,c.useLayoutEffect)(l,r),d[15]!==b||d[16]!==x?(a=(0,o.jsx)(y.M,{children:x?(0,o.jsx)(re,{paddingLeft:2,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},children:(0,o.jsx)(l7,{status:x||void 0})}):(0,o.jsx)(o.Fragment,{children:b?(0,o.jsx)(rl,{}):(0,o.jsx)(rr,{})})}),d[15]=b,d[16]=x,d[17]=a):a=d[17],a}function rs(e){return e.chunks}function ra(e){return e.isLoading}let rd=(0,x.zo)(a.xv)`
  color: var(--card-muted-fg-color);

  em {
    color: var(--card-fg-color);
    font-weight: 500;
    font-style: normal;
  }
`;function rc(){let e,t,n,i,l;let r=(0,s.c)(12),{displayed:d,revisionNotFound:c}=nv(),{t:u}=(0,m.$G7)(),h=d?._updatedAt||d?._createdAt;r[0]!==h||r[1]!==u?(e=h?(0,o.jsx)(m.vNl,{t:u,i18nKey:"document-status.revision-from",values:{date:(0,eg.Z)(new Date(h),"MMM d, yyyy '@' pp")}}):null,r[0]=h,r[1]=u,r[2]=e):e=r[2],r[3]!==e?(t={name:"revision",text:e,tone:"caution"},r[3]=e,r[4]=t):t=r[4];let f=t;return r[5]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o.jsx)(a.xu,{flex:"none",children:(0,o.jsx)(a.xv,{size:1,children:(0,o.jsx)(p.vaD,{})})}),r[5]=n):n=r[5],r[6]!==f||r[7]!==c||r[8]!==u?(i=c?(0,o.jsx)(m.vNl,{t:u,i18nKey:"document-status.revision-not-found"}):f.text,r[6]=f,r[7]=c,r[8]=u,r[9]=i):i=r[9],r[10]!==i?(l=(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(a.kC,{flex:1,gap:3,padding:2,children:[n,(0,o.jsx)(a.xu,{flex:1,children:(0,o.jsx)(rd,{size:1,textOverflow:"ellipsis",children:i})})]})}),r[10]=i,r[11]=l):l=r[11],l}let ru=b.E.create(a.Zb);function rp(e){let t,n,i,l,r,d,u,p;let h=(0,s.c)(22),{actionsBoxRef:f,createLinkMetadata:x}=e,{editState:g,onChange:b,revisionNotFound:y}=nv(),{params:v}=eF(),j=void 0===v?nS:v,{selectedPerspective:_}=(0,m.Wc0)(),{title:w}=nP(),k=m.opE().components?.documentLinkedActions,C=!!j.rev,[S,z]=(0,c.useState)(null),[E,I]=(0,c.useState)(null);h[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{z(e.contentRect.width<480)},h[0]=t):t=h[0];let $=t;h[1]!==E?(n={element:E,onResize:$},h[1]=E,h[2]=n):n=h[2],function(e){let t,n;let i=(0,s.c)(4),{element:l,onResize:r}=e;i[0]!==l||i[1]!==r?(t=()=>(l&&m.x$w.observe(l,r),()=>{l&&m.x$w.unobserve(l)}),n=[l,r],i[0]=l,i[1]=r,i[2]=t,i[3]=n):(t=i[2],n=i[3]),(0,c.useLayoutEffect)(t,n)}(n);e:{let e=!!(g?.ready&&"boolean"==typeof S);if(_){if((0,m.Vb0)(_)){i=e&&!!g?.published;break e}if((0,m._wt)(_)){i=e&&!!g?.version;break e}}i=e}let P=i;if(x&&(0,m.EM_)(x)&&k){let e;h[3]!==k||h[4]!==x||h[5]!==b||h[6]!==w?(e=(0,o.jsx)(k,{metadata:x,panelPortalElementId:iB,onDocumentChange:b,documentTitle:w}),h[3]=k,h[4]=x,h[5]=b,h[6]=w,h[7]=e):e=h[7],l=e}else if(C){let e;h[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(ls,{}),h[8]=e):e=h[8],l=e}else{let e;h[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(lo,{}),h[9]=e):e=h[9],l=e}if(C&&y)return null;let A=C?"revision":"published";h[10]===Symbol.for("react.memo_cache_sentinel")?(r={opacity:.2},h[10]=r):r=h[10],h[11]===Symbol.for("react.memo_cache_sentinel")?(d={opacity:1,transition:{duration:.3}},h[11]=d):d=h[11];let T=C?"caution":void 0;return h[12]!==l||h[13]!==f||h[14]!==S||h[15]!==P||h[16]!==C?(u=P&&(0,o.jsxs)(a.kC,{align:"stretch",gap:1,justify:"space-between",paddingLeft:C?0:1,paddingRight:C?0:1,children:[(0,o.jsxs)(a.kC,{align:"center",flex:1,gap:S?2:3,wrap:"wrap",paddingRight:3,children:[(0,o.jsxs)(a.kC,{align:"center",children:[C?(0,o.jsx)(rc,{}):(0,o.jsx)(ro,{}),(0,o.jsx)(lb,{})]}),(0,o.jsx)(l_,{})]}),(0,o.jsxs)(a.kC,{align:"flex-start",justify:"flex-end",ref:f,style:{flexShrink:0,marginLeft:"auto"},children:[(0,o.jsx)(lb,{}),l]})]}),h[12]=l,h[13]=f,h[14]=S,h[15]=P,h[16]=C,h[17]=u):u=h[17],h[18]!==A||h[19]!==T||h[20]!==u?(p=(0,o.jsx)(ru,{initial:r,animate:d,tone:T,radius:3,ref:I,sizing:"border",padding:2,children:u},A),h[18]=A,h[19]=T,h[20]=u,h[21]=p):p=h[21],p}let rm=(0,c.memo)(function(e){let t,n,i,l,r,a,d,c,u,p,h,f,x;let g=(0,s.c)(26);g[0]!==e?({actionsBoxElement:t,activeIndex:n,as:p,children:i,id:l,onActionStart:r,onKeyDown:a,rootRef:c,states:u,...d}=e,g[0]=e,g[1]=t,g[2]=n,g[3]=i,g[4]=l,g[5]=r,g[6]=a,g[7]=d,g[8]=c,g[9]=u,g[10]=p):(t=g[1],n=g[2],i=g[3],l=g[4],r=g[5],a=g[6],d=g[7],c=g[8],u=g[9],p=g[10]);let b=void 0===p?"div":p,y=u[n];g[11]!==r||g[12]!==a||g[13]!==u?(h=e=>{let t=u.filter(t=>t.shortcut&&(0,ed.P6)(t.shortcut,e)),n=t[0];if(t.length>1&&console.warn(`Keyboard shortcut conflict: More than one document action matches the shortcut "${n.shortcut}"`),n&&!n.disabled&&n.onHandle){e.preventDefault(),n.onHandle(),r(u.indexOf(n));return}a&&a(e)},g[11]=r,g[12]=a,g[13]=u,g[14]=h):h=g[14];let v=h;return g[15]!==t||g[16]!==y?(f=y&&y.dialog&&(0,o.jsx)(m.jr5,{zOffset:"paneFooter",children:(0,o.jsx)(iY,{dialog:y.dialog,referenceElement:t})}),g[15]=t,g[16]=y,g[17]=f):f=g[17],g[18]!==b||g[19]!==i||g[20]!==v||g[21]!==l||g[22]!==d||g[23]!==c||g[24]!==f?(x=(0,o.jsxs)(b,{id:l,onKeyDown:v,tabIndex:-1,...d,ref:c,children:[i,f]}),g[18]=b,g[19]=i,g[20]=v,g[21]=l,g[22]=d,g[23]=c,g[24]=f,g[25]=x):x=g[25],x}),rh=(0,c.memo)(e=>{let t,n,i,l,r,a,d,u,p;let m=(0,s.c)(20);m[0]!==e?({actionsBoxElement:t,as:l,children:n,...i}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=i,m[4]=l):(t=m[1],n=m[2],i=m[3],l=m[4]);let h=void 0===l?"div":l,{actions:f,editState:x,isInitialValueLoading:g,revisionId:b}=nv(),[y,v]=(0,c.useState)(-1);m[5]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{v(e)},m[5]=r):r=m[5];let j=r;m[6]!==x||m[7]!==g||m[8]!==b?(d=x&&{...x,onComplete:rf,revision:b||void 0,initialValueResolved:!g},m[6]=x,m[7]=g,m[8]=b,m[9]=d):d=m[9],a=d,m[10]!==t||m[11]!==y||m[12]!==h||m[13]!==n||m[14]!==i?(u=e=>{let{states:l}=e;return(0,o.jsx)(rm,{...i,activeIndex:y,actionsBoxElement:t,as:h,onActionStart:j,states:l,children:n})},m[10]=t,m[11]=y,m[12]=h,m[13]=n,m[14]=i,m[15]=u):u=m[15];let _=u;return a&&f?(m[16]!==a||m[17]!==f||m[18]!==_?(p=(0,o.jsx)(tq,{actionProps:a,actions:f,children:_}),m[16]=a,m[17]=f,m[18]=_,m[19]=p):p=m[19],p):null});function rf(){}function rx(e){let t,n,i,l,r,d,c;let u=(0,s.c)(23),{documentType:p,value:h,currentMinWidth:f,paneKey:x,minWidth:g}=e,{t:b}=(0,m.$G7)();return u[0]!==p?(t={documentType:p},u[0]=p,u[1]=t):t=u[1],u[2]!==b||u[3]!==t?(n=(0,o.jsx)(m.vNl,{t:b,i18nKey:"panes.document-pane.document-unknown-type.title",values:t}),u[2]=b,u[3]=t,u[4]=n):n=u[4],u[5]!==p||u[6]!==b?(i=p&&(0,o.jsx)(a.xv,{as:"p",children:(0,o.jsx)(m.vNl,{t:b,i18nKey:"panes.document-pane.document-unknown-type.text",values:{documentType:p}})}),u[5]=p,u[6]=b,u[7]=i):i=u[7],u[8]!==p||u[9]!==b?(l=!p&&(0,o.jsx)(a.xv,{as:"p",children:b("panes.document-pane.document-unknown-type.without-schema.text")}),u[8]=p,u[9]=b,u[10]=l):l=u[10],u[11]!==h?(r=m.r8Q&&h&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.xv,{as:"p",children:"Here is the JSON representation of the document:"}),(0,o.jsx)(a.Zb,{padding:3,overflow:"auto",radius:2,shadow:1,tone:"inherit",children:(0,o.jsx)(a.EK,{language:"json",size:[1,1,2],children:JSON.stringify(h,null,2)})})]}),u[11]=h,u[12]=r):r=u[12],u[13]!==i||u[14]!==l||u[15]!==r?(d=(0,o.jsxs)(a.Kq,{space:4,children:[i,l,r]}),u[13]=i,u[14]=l,u[15]=r,u[16]=d):d=u[16],u[17]!==f||u[18]!==g||u[19]!==x||u[20]!==n||u[21]!==d?(c=(0,o.jsx)(nx,{currentMinWidth:f,flex:2.5,minWidth:g,paneKey:x,title:n,tone:"caution",children:d}),u[17]=f,u[18]=g,u[19]=x,u[20]=n,u[21]=d,u[22]=c):c=u[22],c}rh.displayName="Memo(DocumentActionShortcuts)";let rg=["fixed","fixed","absolute"];function rb(e){let t,n,i,l,c,u,p;let h=(0,s.c)(16),{documentPanelPortalElement:f,setFooterElement:x,setActionsBoxElement:g}=e,b=(0,m.Cnp)(),{value:y}=nv();h[0]!==f?(n={[iB]:f},h[0]=f,h[1]=n):n=h[1],t=n,h[2]!==y?(i=(0,m.xaJ)(y),h[2]=y,h[3]=i):i=h[3];let v=i;return h[4]!==v||h[5]!==g?(l=(0,o.jsx)(r.uE,{children:(0,o.jsx)(rp,{actionsBoxRef:g,createLinkMetadata:v})}),h[4]=v,h[5]=g,h[6]=l):l=h[6],h[7]!==x||h[8]!==l?(c=(0,o.jsx)(tf,{ref:x,padding:1,children:l}),h[7]=x,h[8]=l,h[9]=c):c=h[9],h[10]!==c||h[11]!==b.portal?(u=(0,o.jsx)(d.Tu,{position:rg,zOffset:b.portal,children:c}),h[10]=c,h[11]=b.portal,h[12]=u):u=h[12],h[13]!==t||h[14]!==u?(p=(0,o.jsx)(a.Xp,{__unstable_elements:t,children:u}),h[13]=t,h[14]=u,h[15]=p):p=h[15],p}let ry=[],rv=["fixed","fixed","absolute"],rj=(0,x.zo)(m.jbM)`
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  min-width: 0;
`;function r_(){let{changesOpen:e,displayed:t,documentId:n,documentType:i,editState:r,fieldActions:s,focusPath:u,inspectOpen:h,inspector:f,inspectors:x,onFocus:g,onHistoryOpen:b,onMenuAction:y,onPathOpen:v,paneKey:j,schemaType:_,value:w,previewUrl:k}=nv(),{params:C}=eF(),{features:S}=nC(),{t:z}=(0,m.$G7)(l.UA),{collapsed:E}=eU(),I=(0,m.Cnp)(),[$,P]=(0,c.useState)(null),[A,T]=(0,c.useState)(null),[R,M]=(0,c.useState)(null),[D,L]=(0,c.useState)(null),[N,O]=(0,c.useState)(null);(0,m.LxO)({element:$,focusPath:u,value:w});let[U,B]=(0,c.useState)([]),[V,G]=(0,c.useState)([]),F=(0,d.XL)(A),K=(0,d.XL)(R),W=F?.height,X=K?.height,H=600+(f?320:0),q=320+(f?320:0),Y=(0,c.useMemo)(()=>x?.find(e=>e.name===f?.name),[x,f?.name]),Z=nk({displayed:t,documentId:n,editState:r}),J=!!w,Q=(0,c.useMemo)(()=>(function(e){let t=function({currentInspector:e,hasValue:t,inspectors:n,inspectorMenuItems:i}){return n.map((n,l)=>{let r=i[l];return!r||r.hidden?null:{action:`${nz}${n.name}`,group:r.showAsAction?void 0:"inspectors",icon:r.icon,disabled:!t,selected:e?.name===n.name,shortcut:r.hotkeys?.join("+"),showAsAction:r.showAsAction,title:r.title,tone:r.tone}}).filter(Boolean)}(e),n=[function({previewUrl:e,t}){return e?{action:"production-preview",group:"links",title:t("production-preview.menu-item.title"),icon:p.YE8,shortcut:"Ctrl+Alt+O"}:null}(e),function({documentIdStack:e,t}){let n=typeof e?.previousId>"u"&&{reason:t("compare-versions.menu-item.disabled-reason")};return{action:"compareVersions",group:"inspectors",title:t("compare-versions.menu-item.title"),icon:p.lAt,disabled:n}}(e)].filter(Boolean);return[{action:"copy-document-url",showAsAction:!0,title:e.t("action.copy-document-url.label"),icon:p.xPt},...t,function({hasValue:e,t}){return{action:"inspect",group:"inspectors",title:t("document-inspector.menu-item.title"),icon:p.Pr8,disabled:!e,shortcut:"Ctrl+Alt+I"}}(e),...n]})({currentInspector:Y,features:S,hasValue:J,inspectorMenuItems:U,inspectors:x,previewUrl:k,documentIdStack:Z,t:z}),[Y,Z,S,J,U,x,k,z]),ee=(0,c.useCallback)(e=>{for(let t of Q)if(t.shortcut&&(0,ed.P6)(t.shortcut,e)){e.preventDefault(),e.stopPropagation(),y(t);return}},[y,Q]),et=(0,c.useCallback)(e=>{v(e),g(e)},[v,g]);return _?(0,o.jsxs)(m.iWf,{value:w,children:[x.length>0&&(0,o.jsx)(n$,{documentId:n,documentType:i,inspectors:x,onMenuItems:B}),s.length>0&&_&&(0,o.jsx)(m.QMc,{actions:s,documentId:n,documentType:i,onActions:G,path:ry,schemaType:_}),(0,o.jsx)(m.kNp,{actions:V,path:ry,children:(0,o.jsxs)(rh,{actionsBoxElement:D,as:te,currentMinWidth:H,"data-testid":"document-pane",flex:2.5,id:j,minWidth:q,onKeyUp:ee,rootRef:P,children:[(0,o.jsx)(lf,{ref:M,menuItems:Q}),(0,o.jsx)(d.Tu,{position:rv,zOffset:I.paneDialog,children:(0,o.jsx)(a.kC,{direction:"column",flex:1,height:E?void 0:"fill",children:(0,o.jsx)(rj,{"data-testid":"change-connector-root",isReviewChangesOpen:e&&C?.changesInspectorTab==="review",onOpenReviewChanges:b,onSetFocus:et,children:(0,o.jsx)(iL,{footerHeight:W||null,headerHeight:X||null,isInspectOpen:h,rootElement:$,setDocumentPanelPortalElement:O,footer:(0,o.jsx)(rb,{documentPanelPortalElement:N,setFooterElement:T,setActionsBoxElement:L})})})})}),(0,o.jsx)(nT,{})]})})]}):(0,o.jsx)(rx,{currentMinWidth:H,documentType:i,minWidth:q,paneKey:j,value:w})}let rw=(0,em.dS)({name:"DocumentURLCopied",version:1,description:"User copied document URL to clipboard"}),rk=e=>{let t,n;let i=(0,s.c)(13),{paneOptions:l,documentType:r,documentId:o,params:a}=e,d=(0,m.zEW)(),c=eF(),u=(0,m.BoV)(c.payload);i[0]!==r||i[1]!==l.template||i[2]!==l.templateParameters||i[3]!==u||i[4]!==a.template||i[5]!==d?(t=function(e,t){let n=t.panePayload||{},i=t.templateName;t.urlTemplate&&i&&i!==t.urlTemplate&&console.warn(`Conflicting templates: URL says "${t.urlTemplate}", structure node says "${i}". Using "${i}".`);let l=i||t.urlTemplate,r=e.filter(e=>e.schemaType===t.documentType),o={...t.templateParams,..."object"==typeof n&&n||{}},s=l;return l||1!==r.length||(s=r[0].id),{templateName:s,templateParams:o}}(d,{documentType:r,templateName:l.template,templateParams:l.templateParameters,panePayload:u,urlTemplate:a.template}),i[0]=r,i[1]=l.template,i[2]=l.templateParameters,i[3]=u,i[4]=a.template,i[5]=d,i[6]=t):t=i[6];let{templateName:p,templateParams:h}=t;i[7]!==o||i[8]!==r||i[9]!==a.version||i[10]!==p||i[11]!==h?(n={documentId:o,documentType:r,templateName:p,templateParams:h,version:a.version},i[7]=o,i[8]=r,i[9]=a.version,i[10]=p,i[11]=h,i[12]=n):n=i[12];let f=(0,m.t2O)(n);return(0,m.BoV)(f)},rC=e=>(0,m.Uy$)(e)&&"string"==typeof e._id&&"string"==typeof e._type;function rS(e){let t=(0,m.Uy$)(e)&&"string"==typeof e.message?e.message:"Unknown error";throw Error(`An error was thrown while trying to get your preview url: ${t}`)}let rz=(0,c.memo)(e=>{let{children:t,index:n,pane:i,paneKey:r,onFocusPath:a,forcedVersion:p,historyStore:h}=e,{store:f,error:x,ready:g,revisionDocument:b,onOlderRevision:y,sinceDocument:j,isPristine:k,revisionId:C,lastNonDeletedRevId:S}=h,E=(0,m.I_y)(),{setDocumentMeta:$}=(0,m.ooN)(),{document:{actions:P,badges:A,unstable_fieldActions:T,unstable_languageFilter:M,drafts:{enabled:D}}}=(0,m.Lky)(),O=(0,ep.f1)(),U=eF(),B=U.setParams,{push:V}=(0,d.pm)(),{options:G,menuItemGroups:F=nE,title:K=null,views:W=[]}=i,X=(0,m.BoV)(G),H=X.id,q=(0,m.vsM)(H),Y=G.type,Z=(0,m.BoV)(U.params)||nS,{buildStudioUrl:J}=(0,m.cx5)(),Q=(0,m.Wc0)(),{document:{drafts:{enabled:et}}}=(0,m.cFj)(),{selectedReleaseId:en,selectedPerspectiveName:ei}=(0,c.useMemo)(()=>p||{selectedPerspectiveName:Q.selectedPerspectiveName,selectedReleaseId:Q.selectedReleaseId},[p,Q.selectedPerspectiveName,Q.selectedReleaseId]),er=t2(),eo=rk({paneOptions:X,documentId:q,documentType:Y,params:Z}),es=eo.loading,{changesOpen:ea,currentInspector:ed,inspectors:ec,closeInspector:eu,openInspector:em,handleHistoryClose:eh,handleHistoryOpen:ef,handleInspectorAction:ex,inspectOpen:eg,handleLegacyInspectClose:eb}=function({documentId:e,documentType:t,params:n,setParams:i}){let{features:l}=nC(),r=(0,m.Lky)().document.inspectors,o=(0,c.useMemo)(()=>r({documentId:e,documentType:t}),[e,t,r]),[s,a]=(0,c.useState)(()=>n.inspect||null),d=(0,c.useRef)(n.inspect);(0,c.useEffect)(()=>{d.current!==n.inspect&&(d.current=n.inspect,a(n.inspect||null))},[n.inspect]);let u=(0,c.useMemo)(()=>o?.find(e=>e.name===s),[o,s]),p=(0,c.useMemo)(()=>o.find(e=>e.name===nI),[o]),h=u?.name===nI,f=(0,c.useCallback)(e=>{let t=e&&o.find(t=>t.name===e);if(e&&!t){console.warn(`No inspector named "${e}"`);return}if(u){if(t){let e=t.onClose?.({params:n})??{params:n};a(null),d.current=void 0,i({...e.params,inspect:void 0});return}if(u){let e=u.onClose?.({params:n})??{params:n};a(null),d.current=void 0,i({...e.params,inspect:void 0})}}},[u,o,n,i]),x=(0,c.useCallback)((e,t)=>{let l=o.find(t=>t.name===e);if(!l){console.warn(`No inspector named "${e}"`);return}if(u?.name===l.name){i({...n,...t,inspect:l.name});return}let r=n;u&&(r=(l.onClose?.({params:r})??{params:r}).params);let s=l.onOpen?.({params:r})??{params:r};a(l.name),d.current=l.name,i({...s.params,...t,inspect:l.name})},[u,o,n,i]),g=(0,c.useCallback)(()=>{p&&f(p.name)},[f,p]),b=(0,c.useCallback)(()=>{l.reviewChanges&&p&&x(p.name,{changesInspectorTab:"review"})},[l.reviewChanges,x,p]),y="on"===n.inspect,v=(0,c.useCallback)((e=!y)=>{i(e?{...n,inspect:"on"}:_(n,"inspect"))},[y,n,i]),j=(0,c.useCallback)(()=>v(!1),[v]),w=(0,c.useCallback)(e=>{if("inspect"===e.action)return v(!0),!0;if("string"!=typeof e.action)return!1;let t=e.action.slice(nz.length),n=o.find(e=>e.name===t);return!!n&&(n.name===s?f(n.name):x(n.name),!0)},[f,s,o,x,v]);return{changesOpen:h,currentInspector:u,inspectors:o,closeInspector:f,openInspector:x,handleHistoryClose:g,handleHistoryOpen:b,handleInspectorAction:w,handleLegacyInspectClose:j,inspectOpen:y}}({documentId:q,documentType:Y,params:Z,setParams:B}),[ey,ev]=(0,c.useState)(!1),ej=(0,c.useCallback)(e=>!!g&&!e?.draft&&!e?.published&&!e?.version&&!k,[g,k]),e_=(0,c.useCallback)(e=>ea?j||e?.published:e?.published||null,[ea,j]),ew=E.get(Y),ek=(0,c.useCallback)(e=>{let t=ej(e);return!!Z.rev||ey||t||!(0,m.Xje)({selectedPerspective:Q.selectedPerspective,isDraftModelEnabled:et,schemaType:ew}).result},[ej,ey,et,Z.rev,Q.selectedPerspective,ew]),eC=(0,c.useCallback)(e=>y?b||{_id:e._id,_type:e._type}:e,[y,b]),{editState:eS,connectionState:ez,focusPath:eE,onChange:eI,validation:e$,ready:eP,value:eA,formState:eT,permissions:eR,onPathOpen:eM,isPermissionsLoading:eD,formStateRef:eL,onProgrammaticFocus:eN,collapsedFieldSets:eO,collapsedPaths:eU,onBlur:eB,onFocus:eV,onSetActiveFieldGroup:eG,onSetCollapsedPath:eK,onSetCollapsedFieldSet:eW,openPath:eX}=(0,m.izb)({documentType:Y,documentId:q,initialValue:eo,comparisonValue:e_,releaseId:en,selectedPerspectiveName:ei,initialFocusPath:Z.path?(0,w.mL)(Z.path):m.LZ8,readOnly:ek,onFocusPath:a,getFormDocumentValue:eC}),eH=(0,c.useCallback)(()=>{let e;switch(!0){case!!Z.rev:e="revision";break;case en&&(0,m.Y_j)(eA._id):e="version";break;case"published"===ei:e="published";break;case D:e="draft";break;default:e="published"}return e},[Z.rev,en,eA._id,ei,D]),eq=(0,c.useMemo)(()=>eH(),[eH]),eY=(0,c.useMemo)(()=>({schemaType:Y,documentId:q,versionType:eq,releaseId:en}),[Y,q,eq,en]),eZ=(0,c.useMemo)(()=>P(eY),[P,eY]),eJ=(0,c.useMemo)(()=>A({schemaType:Y,documentId:q}),[A,q,Y]),eQ=(0,c.useMemo)(()=>M({schemaType:Y,documentId:q}),[q,Y,M]),e0=(0,m.BoV)(W),e1=Z.view||e0[0]&&e0[0].id||null,e2=function(e){let t,n,i,l,r,o;let a=(0,s.c)(6),{resolveProductionUrl:d}=(0,m.Lky)().document;return a[0]===Symbol.for("react.memo_cache_sentinel")?(n=new L.X(void 0),a[0]=n):n=a[0],t=n,a[1]!==e?(i=()=>{t.next(e)},l=[t,e],a[1]=e,a[2]=i,a[3]=l):(i=a[2],l=a[3]),(0,c.useEffect)(i,l),a[4]!==d?(o=t.asObservable().pipe((0,I.x)(),(0,el.b)(500),(0,ee.w)(e=>rC(e)?(0,N.D)(d({document:e})):(0,z.of)(void 0)),(0,I.x)(),(0,R.K)(rS)),a[4]=d,a[5]=o):o=a[5],r=o,(0,v.m)(r)}(eA),{t:e3}=(0,m.$G7)(l.UA),e4=(0,c.useMemo)(()=>ew?T({documentId:q,documentType:Y,schemaType:ew}):[],[q,Y,T,ew]),e5=eP&&(!Z.rev||g||!!x),e6=(0,c.useMemo)(()=>eC(eA),[eC,eA]),{previousId:e7}=nk({displayed:e6,documentId:q,editState:eS}),e8=(0,c.useCallback)((e,t)=>{B({...Z,since:e,rev:t||void 0})},[Z,B]),e9=(0,c.useCallback)(()=>U.closeCurrent(),[U]),te=(0,c.useCallback)(()=>U.duplicateCurrent(),[U]),tt=(0,c.useCallback)(async e=>{if("production-preview"===e.action&&e2)return window.open(e2),!0;if("copy-document-url"===e.action&&navigator){O.log(rw);let e=J({coreUi:e=>`${e}/intent/edit/id=${q};type=${Y}`});return await navigator.clipboard.writeText(e),V({id:"copy-document-url",status:"info",title:e3("panes.document-operation-results.operation-success_copy-url")}),!0}return"reviewChanges"===e.action?(ef(),!0):(("inspect"===e.action||"string"==typeof e.action&&e.action.startsWith(nz))&&ex(e),"compareVersions"===e.action&&"u">typeof e7&&(er.navigateDiffView({mode:"version",previousDocument:{type:Y,id:e7},nextDocument:{type:Y,id:eA._id}}),!0))},[e2,e7,O,J,V,e3,q,Y,ef,ex,er,eA._id]);(0,c.useEffect)(()=>{$({documentId:q,documentType:Y,schemaType:ew,onChange:eI})},[q,Y,ew,eI,$]);let tn=(0,c.useMemo)(()=>e_(eS),[eS,e_]),ti=(0,c.useMemo)(()=>ej(eS),[eS,ej]),tl=y&&!b,tr=(0,c.useMemo)(()=>({actions:eZ,activeViewId:e1,badges:eJ,changesOpen:ea,closeInspector:eu,collapsedFieldSets:eO,collapsedPaths:eU,compareValue:tn,connectionState:ez,displayed:e6,documentId:q,documentIdRaw:H,documentType:Y,editState:eS,fieldActions:e4,focusPath:eE,inspector:ed||null,inspectors:ec,onBlur:eB,onChange:eI,onFocus:eV,onPathOpen:eM,onHistoryClose:eh,onHistoryOpen:ef,onInspectClose:eb,onMenuAction:tt,onPaneClose:e9,onPaneSplit:te,onSetActiveFieldGroup:eG,onSetCollapsedPath:eK,onSetCollapsedFieldSet:eW,openInspector:em,openPath:eX,index:n,inspectOpen:eg,validation:e$,menuItemGroups:F||[],paneKey:r,previewUrl:e2,ready:e5,schemaType:ew,isPermissionsLoading:eD,isInitialValueLoading:es,permissions:eR,setTimelineRange:e8,setIsDeleting:ev,isDeleting:ey,isDeleted:ti,timelineError:x,timelineStore:f,title:K,value:eA,selectedReleaseId:en,views:e0,formState:eT,unstable_languageFilter:eQ,revisionId:C,revisionNotFound:tl,lastNonDeletedRevId:S}),[eZ,e1,eJ,ea,eu,eO,eU,tn,ez,e6,q,H,Y,eS,e4,eE,ed,ec,eB,eI,eV,eM,eh,ef,eb,tt,e9,te,eG,eK,eW,em,eX,n,eg,e$,F,r,e2,e5,ew,eD,es,eR,e8,ey,ti,x,f,K,eA,en,e0,eT,eQ,C,tl,S]);return(0,c.useEffect)(()=>{if(e5&&Z.path){let{path:e,...t}=Z;eN((0,w.vW)(eL.current?.value,(0,w.mL)(e))),U.setParams(t)}},[eL,eN,U,Z,e5]),(0,o.jsx)(u.cO.Provider,{value:tr,children:t})});rz.displayName="Memo(DocumentPaneProvider)";let rE=e=>{let t,n,i,l,r,a,d,c;let u=(0,s.c)(37),{params:p}=eF(),h=void 0===p?nS:p,f=rV(e.pane.options,h),x=(0,m.I_y)(),g=f.type,b=!!x.get(f.type)?.liveEdit,{selectedPerspectiveName:y,selectedReleaseId:v,selectedPerspective:j}=(0,m.Wc0)(),{data:_}=(0,m.vlT)();u[0]!==f.id?(t=(0,m.vsM)(f.id),u[0]=f.id,u[1]=t):t=u[1];let w=(0,m.iav)(t,g,"default",v),k=b&&"drafts"===j&&!w?.draft,{rev:C,since:S}=h,z=h.historyVersion;e:{if(k){let e;u[2]!==f.id?(e=(0,m.vsM)(f.id),u[2]=f.id,u[3]=e):e=u[3],n=e;break e}if(z&&_.some(e=>(0,m.QXs)(e._id)===z)){let e;u[4]!==z||u[5]!==f.id?(e=(0,m.XLS)(f.id,z),u[4]=z,u[5]=f.id,u[6]=e):e=u[6],n=e;break e}if(typeof y>"u"){let e;u[7]!==f.id?(e=(0,m.qyu)(f.id),u[7]=f.id,u[8]=e):e=u[8],n=e;break e}if("published"===y){let e;u[9]!==f.id?(e=(0,m.vsM)(f.id),u[9]=f.id,u[10]=e):e=u[10],n=e;break e}if(v){let e;u[11]!==f.id||u[12]!==y?(e=(0,m.XLS)(f.id,y),u[11]=f.id,u[12]=y,u[13]=e):e=u[13],n=e;break e}n=f.id}let E=n;u[14]!==E||u[15]!==f.type||u[16]!==C||u[17]!==S?(i={documentId:E,documentType:f.type,rev:C,since:S},u[14]=E,u[15]=f.type,u[16]=C,u[17]=S,u[18]=i):i=u[18];let I=(0,m.qDX)(i),$=I.error,P=I.revision?.revisionId||null,A=!!(C&&!I.revision?.loading),T=I.revision?.document||null,R=I.sinceRevision?.document||null,M=!I.loading,D=0===I.events.length;return u[19]!==I.events?(r=I.events.find(rI)?.id||null,u[19]=I.events,u[20]=r):r=u[20],u[21]!==I.error||u[22]!==M||u[23]!==D||u[24]!==r||u[25]!==P||u[26]!==A||u[27]!==T||u[28]!==R?(a={error:$,revisionId:P,onOlderRevision:A,revisionDocument:T,sinceDocument:R,ready:M,isPristine:D,lastNonDeletedRevId:r},u[21]=I.error,u[22]=M,u[23]=D,u[24]=r,u[25]=P,u[26]=A,u[27]=T,u[28]=R,u[29]=a):a=u[29],l=a,u[30]!==l||u[31]!==z||u[32]!==e?(d=z?(0,o.jsx)(m.t7B,{selectedPerspectiveName:z,excludedPerspectives:m.LZ8,children:(0,o.jsx)(rz,{...e,historyStore:l})}):(0,o.jsx)(rz,{...e,historyStore:l}),u[30]=l,u[31]=z,u[32]=e,u[33]=d):d=u[33],u[34]!==d||u[35]!==I?(c=(0,o.jsx)(m.Yls,{value:I,children:d}),u[34]=d,u[35]=I,u[36]=c):c=u[36],c};function rI(e){return!(0,m.E8O)(e)&&!(0,m.Pm6)(e)}let r$=e=>{let t,n,i,l,r;let a=(0,s.c)(20),{pane:d}=e,u=eF(),p=rV(d.options,u.params),h=u.params||nS,[f,x]=(0,c.useState)(null);a[0]!==p.id?(t=(0,m.vsM)(p.id),a[0]=p.id,a[1]=t):t=a[1],a[2]!==p.type||a[3]!==h.rev||a[4]!==h.since||a[5]!==t?(n={documentId:t,documentType:p.type,onError:x,rev:h.rev,since:h.since},a[2]=p.type,a[3]=h.rev,a[4]=h.since,a[5]=t,a[6]=n):n=a[6];let g=(0,m.Dab)(n),b=(0,m.P08)(g,rP),y=(0,m.P08)(g,rA),v=(0,m.P08)(g,rT),j=(0,m.P08)(g,rR),_=(0,m.P08)(g,rM),w=(0,m.P08)(g,rD),k=(0,m.P08)(g,rL),C=y?.id||null,S=!!w;return a[7]!==k||a[8]!==b||a[9]!==g||a[10]!==C||a[11]!==j||a[12]!==v||a[13]!==S||a[14]!==f||a[15]!==_?(l={store:g,error:f,revisionId:C,onOlderRevision:b,revisionDocument:j,sinceDocument:v,ready:_,isPristine:S,lastNonDeletedRevId:k},a[7]=k,a[8]=b,a[9]=g,a[10]=C,a[11]=j,a[12]=v,a[13]=S,a[14]=f,a[15]=_,a[16]=l):l=a[16],i=l,a[17]!==i||a[18]!==e?(r=(0,o.jsx)(rz,{...e,historyStore:i}),a[17]=i,a[18]=e,a[19]=r):r=a[19],r};function rP(e){return e.onOlderRevision}function rA(e){return e.revTime}function rT(e){return e.sinceAttributes}function rR(e){return e.timelineDisplayed}function rM(e){return e.timelineReady}function rD(e){return e.isPristine}function rL(e){return e.lastNonDeletedRevId}let rN=(0,c.memo)(e=>{let t;let n=(0,s.c)(4);if(m.Lky().beta?.eventsAPI?.documents){let t;return n[0]!==e?(t=(0,o.jsx)(rE,{...e}),n[0]=e,n[1]=t):t=n[1],t}return n[2]!==e?(t=(0,o.jsx)(r$,{...e}),n[2]=e,n[3]=t):t=n[3],t});rN.displayName="Memo(DocumentPaneProviderWrapper)";let rO=(0,c.memo)(function(e){let t,n;let i=(0,s.c)(5),{name:l}=(0,m.Lky)(),r=e.pane.source||l;return i[0]!==e?(t=(0,o.jsx)(m.Or8,{children:(0,o.jsx)(rU,{...e})}),i[0]=e,i[1]=t):t=i[1],i[2]!==r||i[3]!==t?(n=(0,o.jsx)(m.cWh,{name:r,children:t}),i[2]=r,i[3]=t,i[4]=n):n=i[4],n});function rU(e){let t,n,i,r,d,u,p,h,f,x,g,b,y;let v=(0,s.c)(57),{pane:j,paneKey:_}=e,{resolveNewDocumentOptions:k}=(0,m.Lky)().document,{selectedPerspectiveName:C}=(0,m.Wc0)(),S=eF(),z=rV(j.options,S.params),{documentType:E,isLoaded:I}=(0,m.Hdz)(z.id,z.type);!function(){let e,t,n,i,l;let r=(0,s.c)(10),{params:o,setParams:a}=eF(),d=void 0===o?nS:o,{selectedPerspectiveName:u}=(0,m.Wc0)(),p=(0,c.useRef)(!1);r[0]!==d||r[1]!==a?(e=e=>{["since","historyVersion","rev","preserveRev"].some(e=>d[e])&&a({...d,rev:"true"===d.preserveRev?d.rev:void 0,preserveRev:void 0,since:void 0,historyVersion:void 0})},r[0]=d,r[1]=a,r[2]=e):e=r[2];let h=(0,eb.i)(e);r[3]!==u||r[4]!==h?(t=()=>{p.current&&h(u)},r[3]=u,r[4]=h,r[5]=t):t=r[5],r[6]!==u?(n=[u],r[6]=u,r[7]=n):n=r[7],(0,c.useEffect)(t,n),r[8]===Symbol.for("react.memo_cache_sentinel")?(i=()=>(p.current=!0,()=>{p.current=!1}),l=[],r[8]=i,r[9]=l):(i=r[8],l=r[9]),(0,c.useEffect)(i,l)}();let $=function(){let e;let t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={pick:ni,defaultComponent:r_},t[0]=e):e=t[0],(0,m.uwK)(e)}();v[0]!==z.id||v[1]!==z.type||v[2]!==k?(n=k({type:"document",documentId:z.id,schemaType:z.type}),v[0]=z.id,v[1]=z.type,v[2]=k,v[3]=n):n=v[3],t=n,v[4]!==t?(i={templateItems:t},v[4]=t,v[5]=i):i=v[5];let[P,A]=(0,m.UMU)(i),T=I&&!A;v[6]!==E||v[7]!==T||v[8]!==z||v[9]!==e?(d=T&&E&&z.type!==E?{...e,pane:{...e.pane,options:{...z,type:E}}}:e,v[6]=E,v[7]=T,v[8]=z,v[9]=e,v[10]=d):d=v[10],r=d;let{ReferenceChildLink:R,handleEditReference:M,groupIndex:D,routerPanesState:L}=S;v[11]!==D||v[12]!==L?(u=L[D+1]?.[0].params||{},v[11]=D,v[12]=L,v[13]=u):u=v[13];let N=u,O=L.length,{parentRefPath:U}=N;v[14]!==D||v[15]!==U||v[16]!==O?(h=U?{path:(0,w.mL)(U),state:D>=O-1?"none":D>=O-2?"selected":"pressed"}:{path:[],state:"none"},v[14]=D,v[15]=U,v[16]=O,v[17]=h):h=v[17],p=h;let{t:B}=(0,m.$G7)(l.UA);if("*"===z.type&&!T){let e,t;return v[18]!==B?(e=B("panes.document-pane.document-not-found.loading"),v[18]=B,v[19]=e):e=v[19],v[20]!==_||v[21]!==e?(t=(0,o.jsx)(ny,{flex:2.5,minWidth:320,paneKey:_,title:e}),v[20]=_,v[21]=e,v[22]=t):t=v[22],t}if(!E){let e,t,n,i,l;return v[23]!==B?(e=B("panes.document-pane.document-not-found.title"),v[23]=B,v[24]=e):e=v[24],v[25]!==z.id?(t={id:z.id},v[25]=z.id,v[26]=t):t=v[26],v[27]===Symbol.for("react.memo_cache_sentinel")?(n={Code:rB},v[27]=n):n=v[27],v[28]!==B||v[29]!==t?(i=(0,o.jsx)(a.Kq,{space:4,children:(0,o.jsx)(a.xv,{as:"p",children:(0,o.jsx)(m.vNl,{t:B,i18nKey:"panes.document-pane.document-not-found.text",values:t,components:n})})}),v[28]=B,v[29]=t,v[30]=i):i=v[30],v[31]!==_||v[32]!==i||v[33]!==e?(l=(0,o.jsx)(nx,{flex:2.5,minWidth:320,paneKey:_,title:e,children:i}),v[31]=_,v[32]=i,v[33]=e,v[34]=l):l=v[34],l}let V=`${E}-${z.id}-${C||""}`;return v[35]!==$||v[36]!==z.id||v[37]!==z.type?(f=(0,o.jsx)($,{documentId:z.id,documentType:z.type}),v[35]=$,v[36]=z.id,v[37]=z.type,v[38]=f):f=v[38],v[39]!==z.id||v[40]!==z.type||v[41]!==f?(x=(0,o.jsx)(nj,{documentId:z.id,documentType:z.type,children:f}),v[39]=z.id,v[40]=z.type,v[41]=f,v[42]=x):x=v[42],v[43]!==z.id||v[44]!==z.type||v[45]!==x?(g=(0,o.jsx)(nf,{documentId:z.id,documentType:z.type,children:x}),v[43]=z.id,v[44]=z.type,v[45]=x,v[46]=g):g=v[46],v[47]!==R||v[48]!==p||v[49]!==M||v[50]!==g||v[51]!==P?(b=(0,o.jsx)(m.euX,{EditReferenceLinkComponent:R,onEditReference:M,initialValueTemplateItems:P,activePath:p,children:g}),v[47]=R,v[48]=p,v[49]=M,v[50]=g,v[51]=P,v[52]=b):b=v[52],v[53]!==r||v[54]!==b||v[55]!==V?(y=(0,o.jsx)(rN,{...r,children:b},V),v[53]=r,v[54]=b,v[55]=V,v[56]=y):y=v[56],y}function rB(e){let{children:t}=e;return(0,o.jsx)("code",{children:t})}function rV(e,t){let n,i;let l=(0,s.c)(8);l[0]!==t?(n=void 0===t?{}:t,l[0]=t,l[1]=n):n=l[1];let r=n,o=(0,m.zEW)();e:{let t,n;if(e.type&&"*"!==e.type){i=e;break e}let s=e.template||r.template;l[2]!==s||l[3]!==o?(t=s?o.find(e=>e.id===s):void 0,l[2]=s,l[3]=o,l[4]=t):t=l[4];let a=t?.schemaType;if(!a){i=e;break e}l[5]!==a||l[6]!==e?(n={...e,type:a},l[5]=a,l[6]=e,l[7]=n):n=l[7],i=n}return i}let rG={by:[{field:"_updatedAt",direction:"desc"}]},rF={},rK=(0,x.zo)(a.xu)`
  position: relative;
  opacity: ${e=>e.$opacity||1};
  transition: opacity 0.4s;
`,rW=(0,x.zo)(a.xu)`
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
`,rX=[...Array(30).keys()];function rH(e){let t,n;let i=(0,s.c)(4),{layout:l}=e;return i[0]!==l?(t=rX.map(e=>(0,o.jsx)(m.ogX,{isPlaceholder:!0,layout:l},e)),i[0]=l,i[1]=t):t=i[1],i[2]!==t?(n=(0,o.jsx)(a.Kq,{paddingX:3,paddingY:2,paddingTop:0,space:1,children:t}),i[2]=t,i[3]=n):n=i[3],n}function rq(e){let t,n,i,r,d,u,p;let h=(0,s.c)(66),{childItemId:f,error:x,isRetrying:g,autoRetry:b,filterIsSimpleTypeConstraint:y,hasMaxItems:v,hasSearchQuery:j,isActive:_,isLazyLoading:w,muted:k,isLoading:C,isConnected:S,retryCount:z,canRetry:E,items:I,layout:$,loadingVariant:P,onEndReached:A,onRetry:T,paneTitle:R,searchInputElement:M,showIcons:D}=e,L=(0,m.I_y)(),{collapsed:N}=eU(),{collapsed:O,index:U}=tn(),[B,V]=(0,c.useState)(!O),{t:G}=(0,m.$G7)(l.UA);h[0]!==A||h[1]!==B?(t=()=>{B&&A()},h[0]=A,h[1]=B,h[2]=t):t=h[2];let F=t;h[3]!==O?(n=()=>{if(O)return;let e=setTimeout(()=>{V(!0)},0);return()=>{clearTimeout(e)}},h[3]=O,h[4]=n):n=h[4],h[5]!==O||h[6]!==I?(i=[O,I],h[5]=O,h[6]=I,h[7]=i):i=h[7],(0,c.useEffect)(n,i),h[8]!==f||h[9]!==v||h[10]!==_||h[11]!==w||h[12]!==I.length||h[13]!==$||h[14]!==L||h[15]!==D||h[16]!==G?(r=(e,t)=>{let{activeIndex:n}=t,i=(0,m.vsM)(e._id),l=f===i,r=!_&&l,s=_&&l,d=n===I.length-1,c=d&&w,u=d&&v;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(tX,{icon:!1!==D&&void 0,id:i,layout:$,marginBottom:1,pressed:r,schemaType:L.get(e._type),selected:s,value:e}),c&&(0,o.jsx)(m.Bwn,{}),u&&(0,o.jsx)(a.xu,{marginY:1,paddingX:3,paddingY:4,children:(0,o.jsx)(a.xv,{align:"center",muted:!0,size:1,children:G("panes.document-list-pane.max-items.text",{limit:2e3})})})]})},h[8]=f,h[9]=v,h[10]=_,h[11]=w,h[12]=I.length,h[13]=$,h[14]=L,h[15]=D,h[16]=G,h[17]=r):r=h[17];let K=r;e:{let e,t;if(j){let e,t;h[18]!==G?(e=G("panes.document-list-pane.no-documents.text"),h[18]=G,h[19]=e):e=h[19],h[20]!==e?(t=(0,o.jsx)(a.kC,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,o.jsx)(a.W2,{width:1,children:(0,o.jsx)(a.xu,{paddingX:4,paddingY:5,children:(0,o.jsx)(a.xv,{align:"center",muted:!0,children:e})})})}),h[20]=e,h[21]=t):t=h[21],d=t;break e}h[22]!==y||h[23]!==G?(e=G(y?"panes.document-list-pane.no-documents-of-type.text":"panes.document-list-pane.no-matching-documents.text"),h[22]=y,h[23]=G,h[24]=e):e=h[24],h[25]!==e?(t=(0,o.jsx)(a.kC,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,o.jsx)(a.W2,{width:1,children:(0,o.jsx)(a.xu,{paddingX:4,paddingY:5,children:(0,o.jsx)(a.xv,{align:"center",muted:!0,children:e})})})}),h[25]=e,h[26]=t):t=h[26],d=t}let W=d;t:{let e,t;if(!B){u=null;break t}let n=window.navigator.onLine;if(x){let e,t,i,l,r,s,d;h[27]!==G?(e=G("panes.document-list-pane.error.title"),h[27]=G,h[28]=e):e=h[28],h[29]!==e?(t=(0,o.jsx)(a.X6,{as:"h3",children:e}),h[29]=e,h[30]=t):t=h[30],h[31]!==x||h[32]!==G?(i=m.r8Q?(0,o.jsx)(m.vNl,{t:G,i18nKey:"panes.document-list-pane.error.text.dev",values:{error:x.message},components:{Code:rY}}):G(n?"panes.document-list-pane.error.text":"panes.document-list-pane.error.text.offline"),h[31]=x,h[32]=G,h[33]=i):i=h[33],h[34]!==i?(l=(0,o.jsx)(a.xv,{as:"p",children:i}),h[34]=i,h[35]=l):l=h[35];let c=n&&E?T:void 0;h[36]!==x||h[37]!==g||h[38]!==c?(r=(0,o.jsx)(m.fZm,{error:x,eventId:null,onRetry:c,isRetrying:g}),h[36]=x,h[37]=g,h[38]=c,h[39]=r):r=h[39],h[40]!==b||h[41]!==E||h[42]!==g||h[43]!==z||h[44]!==G?(s=E?(0,o.jsx)(a.xv,{as:"p",muted:!0,size:1,children:g?G("panes.document-list-pane.error.retrying",{count:z}):b?G("panes.document-list-pane.error.will-retry-automatically",{count:z}):G("panes.document-list-pane.error.max-retries-attempted",{count:z})}):null,h[40]=b,h[41]=E,h[42]=g,h[43]=z,h[44]=G,h[45]=s):s=h[45],h[46]!==r||h[47]!==s||h[48]!==t||h[49]!==l?(d=(0,o.jsx)(a.kC,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,o.jsx)(a.W2,{width:1,children:(0,o.jsxs)(a.Kq,{paddingX:4,paddingY:5,space:4,children:[t,l,r,s]})})}),h[46]=r,h[47]=s,h[48]=t,h[49]=l,h[50]=d):d=h[50],u=d;break t}if(S&&!C&&0===I.length){u=W;break t}if("initial"===P&&C){let e;h[51]!==$?(e=(0,o.jsx)(e6,{ms:300,children:(0,o.jsx)(rH,{layout:$})}),h[51]=$,h[52]=e):e=h[52],u=e;break t}if("spinner"===P&&C){u=null;break t}let i=`${U}-${O}`,l=k?.8:1;h[53]!==F||h[54]!==I||h[55]!==i||h[56]!==R||h[57]!==K||h[58]!==M?(e=(0,o.jsx)(rW,{children:(0,o.jsx)(m.e8h,{activeItemDataAttr:"data-hovered",ariaLabel:R,canReceiveFocus:!0,inputElement:M,itemHeight:51,items:I,onEndReached:F,onlyShowSelectionWhenActive:!0,overscan:10,paddingBottom:1,paddingX:3,renderItem:K,wrapAround:!1},i)}),h[53]=F,h[54]=I,h[55]=i,h[56]=R,h[57]=K,h[58]=M,h[59]=e):e=h[59],h[60]!==l||h[61]!==e?(t=(0,o.jsx)(rK,{overflow:"hidden",height:"fill",$opacity:l,children:e}),h[60]=l,h[61]=e,h[62]=t):t=h[62],u=t}let X=u,H=N||"initial"===P?"hidden":"auto";return h[63]!==X||h[64]!==H?(p=(0,o.jsx)(ti,{"data-testid":"document-list-pane",overflow:H,children:X}),h[63]=X,h[64]=H,h[65]=p):p=h[65],p}function rY(e){let{children:t}=e;return(0,o.jsx)("code",{children:t})}function rZ(e,t={}){try{let n=function e(t){switch(t.type){case"OpCall":{let{left:e,right:n}=t;switch(t.op){case"==":return"AccessAttribute"!==e.type||"_type"!==e.name||e.base?"AccessAttribute"!==n.type||"_type"!==n.name||n.base?null:"Value"!==e.type||"string"!=typeof e.value?null:new Set([e.value]):"Value"!==n.type||"string"!=typeof n.value?null:new Set([n.value]);case"in":{if("AccessAttribute"!==e.type||"_type"!==e.name||e.base||"Array"!==n.type)return null;let t=new Set;for(let e of n.elements){if(e.isSplat||"Value"!==e.value.type||"string"!=typeof e.value.value)return null;t.add(e.value.value)}return t.size?t:null}default:return null}}case"Group":return e(t.base);case"Or":{let n=e(t.left);if(!n)return null;let i=e(t.right);return i?new Set([...n,...i]):null}case"And":{let n=e(t.left),i=e(t.right);return n||i?new Set([...n||[],...i||[]]):null}default:return null}}((0,eC.Qc)(e,{params:t}));return n?Array.from(n).sort():null}catch{return null}}let rJ=(0,m.h40)({maxSize:100});function rQ(e){let{client:t,schema:n,sort:i,perspective:r,limit:o,params:s,filter:a,searchQuery:d,staticTypeNames:c,maxFieldDepth:u,searchStrategy:p}=e,h=i.by,f=i?.extendedProjection,x=(0,O.P)(()=>t.listen(`*[${a}]`,s,{events:["welcome","mutation","reconnect"],includeAllVersions:!0,includeResult:!1,visibility:"query",tag:"listen-search-query"})).pipe((0,U.z)((e,t)=>{let n=0===t;return n&&"reconnect"===e.type?(0,B._)(()=>Error("Failed to establish EventSource connection")):n&&"welcome"!==e.type?(0,B._)(()=>Error(`Received unexpected type of first event "${e.type}"`)):(0,z.of)(e)}),(0,V.B)()),[g,b]=(0,G.u)(x,e=>"welcome"===e.type),y=JSON.stringify({fiilter:a,limit:o,params:s,searchQuery:d,perspective:r,sort:i,staticTypeNames:c});return(0,A.T)(g,b.pipe((0,F.p)(1e3,K.z,{leading:!0,trailing:!0}))).pipe((0,eE.q)(e=>(c?(0,z.of)(c):t.observable.fetch(`array::unique(*[${a}][]._type)`,s)).pipe((0,U.z)(x=>{let g=(0,m.wBu)(n,c||[]).filter(e=>!!x.includes(e.name)&&((0,l.xc)(e,i.by,!0),!0)),b=(0,m.mju)(g,t,{filter:a,params:s,strategy:p,maxDepth:u}),y=()=>b({query:d||"",types:g},{__unstable_extendedProjection:f,comments:[`findability-source: ${d?"list-query":"list"}`],limit:o,skipSortByScore:!0,sort:h,perspective:r}).pipe((0,P.U)(e=>e.hits.map(({hit:e})=>e)),(0,P.U)(e=>({type:"result",documents:e})));return"mutation"===e.type&&"query"!==e.visibility?(0,C.H)(1200).pipe((0,U.z)(y)):"reconnect"===e.type?(0,z.of)(e):y()}))),(0,er.R)((e,t)=>({connected:"reconnect"!==t.type,documents:"result"===t.type?t.documents:e?.documents||[]}),null),(0,$.h)(e=>null!==e),rJ(y),(0,P.U)(({fromCache:e,value:t})=>({fromCache:e,...t})))}let r0={error:null,isRetrying:!1,retryCount:0,autoRetry:!1,canRetry:!1,isLoading:!0,isLoadingFullList:!1,fromCache:!1,items:[]},r1="[WARNING: This was thrown as a non-error. Only Error instances should be thrown]",r2=(0,x.F4)`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,r3=(0,x.F4)`
  0% {
    opacity: 0;
  }
  50% {
    opacity: 0.1;
  }
  100% {
    opacity: 0.4;
  }
`,r4=(0,x.zo)(p.L4p)`
  animation: ${r2} 500ms linear infinite;
`,r5=(0,x.zo)(p.L4p)`
  animation: ${r2} 1500ms linear infinite;
  opacity: 0.4;
`,r6=(0,x.zo)(p.L4p)`
  animation:
    ${r2} 1500ms linear infinite,
    ${r3} 1000ms linear;
  opacity: 0.4;
`,r7=(0,c.memo)(function(e){let{childItemId:t,isActive:n,pane:i,paneKey:r,sortOrder:s,layout:d}=e,u=(0,m.I_y)(),f=(0,m.F6R)(),{perspectiveStack:x}=(0,m.Wc0)(),{displayOptions:g,options:b}=i,{apiVersion:y,filter:j}=b,_=oz(b.params||rF),S=(0,c.useMemo)(()=>{let e=rZ(j,_);return e?.length===1?e[0]:null},[j,_]),E=g?.showIcons!==!1,{t:I}=(0,m.$G7)(l.UA),{title:T}=(0,m.v0Z)(i),[R,D]=(0,c.useState)(""),[L,N]=(0,c.useState)(""),[O,B]=(0,c.useState)(null),G=S&&s?function(e,t){let n=e.by.map(e=>{if(e.mapWith)return e;let n=function(e,t){let n=w.mL(t),i=e;for(let e of n){if(!i)return;if("string"==typeof e){i=function(e,t){if(!("fields"in e))return;let n=e.fields.find(e=>e.name===t);return n?n.type:void 0}(i,e);continue}if(!((0,h.Fd)(e)||(0,h.dw)(e))||"array"!==i.jsonType)return;let[t,n]=i.of||[];if(n||!t)return;if(!(0,h.dD)(t)){i=t;continue}let[l,r]=t.to||[];if(r||!l)return;i=l}return i}(t,e.field);return n?!function(e,t){let n=e.type;for(;n;){if(n.name===t||!n.type&&n.jsonType===t)return!0;n=n.type}return!1}(n,"datetime")?"string"===n.jsonType?{...e,mapWith:"lower"}:e:{...e,mapWith:"dateTime"}:e});return n.every((t,n)=>t===e.by[n])?e:{...e,by:n}}(s,u.get(S)):s,F=(0,m.BoV)(G),{error:K,isLoadingFullList:q,isLoading:Y,items:Z,fromCache:J,isRetrying:Q,autoRetry:en,canRetry:ei,retryCount:el,connected:ed,onLoadFullList:ec,onRetry:eu}=function(e){let{filter:t,params:n,sortOrder:i,searchQuery:l,perspective:r,apiVersion:o}=e,s=(0,m.m85)({...m.Dr7,apiVersion:o||m.Dr7.apiVersion}),{strategy:a}=(0,m.cFj)().search,d=(0,m.I_y)(),u=(0,m.NFh)(),p=(0,c.useMemo)(()=>rZ(t,n),[t,n]),[[h,f]]=(0,c.useState)(()=>(0,ez.E)()),[[x,g]]=(0,c.useState)(()=>(0,ez.E)()),b=(0,c.useMemo)(()=>{let e={client:s,filter:t,limit:100,params:n,schema:d,perspective:r,searchQuery:l||"",sort:i||rG,staticTypeNames:p,maxFieldDepth:u,searchStrategy:a},o=rQ(e).pipe((0,et.d)({refCount:!0,bufferSize:1})),c=x.pipe((0,eo.M)(o),(0,$.h)(([,e])=>e?.documents.length===100),(0,es.q)(1),(0,U.z)(()=>(0,M.z)((0,z.of)({type:"loadFullList"}),rQ({...e,limit:2e3}).pipe((0,P.U)(e=>({type:"result",result:e}))))),(0,V.B)());return(0,A.T)(o.pipe((0,P.U)(e=>({type:"result",result:e})),(0,ea.R)(c)),c).pipe((0,m.p0W)((e,t,n)=>{var i;let l=e instanceof Error?e:"object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message?Error(`${e.message} ${r1}`):Error(`${String(e)} ${r1}`),r=window.navigator.onLine,o=r&&!((i=e)instanceof eS.rB)&&(i instanceof eS.nl||!(i instanceof eS.XF)||403===i.statusCode),s=t<10,a=(0,A.T)(r?h:(0,k.R)(window,"online"),r&&s?(0,C.H)(1e3*t):W.C).pipe((0,es.q)(1),(0,ee.w)(()=>(0,A.T)((0,z.of)({type:"error",error:l,retrying:!0,autoRetry:s,canRetry:o,retryCount:t}),n)));return(0,M.z)((0,z.of)({type:"error",error:l,retrying:!1,autoRetry:s,canRetry:o,retryCount:t}),a)}),(0,er.R)((e,t)=>{if("error"===t.type)return{...e,error:t.error,retryCount:t.retryCount,isRetrying:t.retrying,autoRetry:t.autoRetry,canRetry:t.canRetry};if("result"===t.type){var n;return{...e,error:null,isRetrying:!1,fromCache:t.result.fromCache,connected:t.result.connected,isLoading:!1,items:(n=t.result.documents,(0,m.RgL)(n).map(e=>{let t=e.draft||e.published||e.versions[0],n=!!e.draft;return{...t,hasPublished:!!e.published,hasDraft:n}})),isLoadingFullList:!1}}if("loadFullList"===t.type)return{...e,error:null,isLoadingFullList:!0};throw Error(`Unexpected event type: ${t.type}`)},r0))},[s,t,n,d,r,l,i,p,u,a,x,h]),{error:y,items:j,isLoading:_,fromCache:w,connected:S,canRetry:E,isLoadingFullList:I,isRetrying:T,autoRetry:R,retryCount:D}=(0,v.m)(b,r0);return{error:y,onRetry:f,isLoading:_,items:j,isRetrying:T,canRetry:E,retryCount:D,autoRetry:R,connected:S,fromCache:w,onLoadFullList:g,isLoadingFullList:I}}({apiVersion:y,filter:j,perspective:x,params:_,searchQuery:R?.trim(),sortOrder:F}),ep=Y||f.loading,em=(0,v.H)(e=>e.pipe((0,P.U)(e=>e.target.value),(0,X.b)(N),(0,H.D)(e=>""===e?(0,z.of)(""):(0,C.H)(300)),(0,X.b)(D))),eh=(0,c.useCallback)(()=>{D(""),N("")},[]),ef=(0,c.useCallback)(e=>{"Escape"===e.key&&eh()},[eh]),[ex,eg]=(0,c.useState)();(0,c.useEffect)(()=>{ex||ep||eg(r)},[ex,ep,r]),(0,c.useEffect)(()=>{eh(),eg()},[r,eh]);let eb=(0,c.useMemo)(()=>ed&&ep&&ex===r?"spinner":ed&&J?"subtle":"initial",[ed,ex,J,ep,r]),ey=(0,c.useMemo)(()=>"spinner"===eb?r4:L&&"subtle"===eb?r5:p.W1M,[eb,L]);return(0,m.IPD)(!ed),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.xu,{paddingX:3,paddingBottom:3,children:(0,o.jsx)(a.oi,{"aria-label":I("panes.document-list-pane.search-input.aria-label"),autoComplete:"off",border:!1,clearButton:!!R,fontSize:[2,2,1],icon:ey,iconRight:ed&&("subtle"!==eb||L)?null:r6,onChange:em,onClear:eh,onKeyDown:ef,padding:2,placeholder:I("panes.document-list-pane.search-input.placeholder"),radius:2,ref:B,spellCheck:!1,value:L})}),(0,o.jsx)(rq,{childItemId:t,error:K,filterIsSimpleTypeConstraint:!!S,hasMaxItems:2e3===Z.length,hasSearchQuery:!!R,isActive:n,isLazyLoading:q,isLoading:ep,autoRetry:en,canRetry:ei,retryCount:el,isRetrying:Q,isConnected:ed,items:Z,layout:d,muted:"subtle"===eb,loadingVariant:eb,onEndReached:ec,onRetry:eu,paneTitle:T,searchInputElement:O,showIcons:E},r)]})}),r8=(0,c.memo)(e=>{let t,n,i,l,a,d,c,u,m,h;let f=(0,s.c)(27),{contentAfter:x,index:g,initialValueTemplates:b,menuItemGroups:y,menuItems:v,setLayout:j,setSortOrder:_,title:w}=e;f[0]!==b?(t=void 0===b?[]:b,f[0]=b,f[1]=t):t=f[1];let k=t;f[2]!==y?(n=void 0===y?[]:y,f[2]=y,f[3]=n):n=f[3];let C=n;f[4]!==v?(i=void 0===v?[]:v,f[4]=v,f[5]=i):i=f[5];let S=i,{features:z}=nC(),{collapsed:E,isLast:I}=tn(),$=I&&!E?-1:0;return f[6]!==j?(a=e=>{let{layout:t}=e;j(t)},f[6]=j,f[7]=a):a=f[7],f[8]!==_?(d=e=>{_(e)},f[8]=_,f[9]=d):d=f[9],f[10]!==a||f[11]!==d?(c={setLayout:a,setSortOrder:d},f[10]=a,f[11]=d,f[12]=c):c=f[12],l=c,f[13]!==l||f[14]!==k||f[15]!==C||f[16]!==S?(u=(0,o.jsx)(tG,{initialValueTemplateItems:k,actionHandlers:l,menuItemGroups:C,menuItems:S}),f[13]=l,f[14]=k,f[15]=C,f[16]=S,f[17]=u):u=f[17],f[18]!==z.backButton||f[19]!==g?(m=z.backButton&&g>0&&(0,o.jsx)(r.zx,{as:eO,"data-as":"a",icon:p.Y4O,mode:"bleed",tooltipProps:{content:"Back"}}),f[18]=z.backButton,f[19]=g,f[20]=m):m=f[20],f[21]!==x||f[22]!==u||f[23]!==m||f[24]!==$||f[25]!==w?(h=(0,o.jsx)(r.uE,{children:(0,o.jsx)(tj,{actions:u,backButton:m,contentAfter:x,tabIndex:$,title:w})}),f[21]=x,f[22]=u,f[23]=m,f[24]=$,f[25]=w,f[26]=h):h=f[26],h});function r9(e){let{row:t,table:n}=e,{selectedAnchor:i,setSelectedAnchor:l}=n.options.meta||{},r=(0,c.useCallback)(e=>{if(e.shiftKey&&null!=i){let e=t.index,l=e<i?e:i,r=e<i?i:e,o=n.getRowModel().flatRows.slice(l,r+1).map(({id:e})=>e),s=n.getSelectedRowModel().rows.map(({id:e})=>e);n.setRowSelection(()=>[...o,...s].reduce((e,t)=>({...e,[t]:!0}),{}))}else l&&(l(t.getIsSelected()?null:t.index),t.toggleSelected())},[i,t,l,n]);return(0,o.jsx)(a.XZ,{style:{paddingLeft:4},checked:e.row.getIsSelected(),disabled:!e.row.getCanSelect(),onChange:()=>null,onClick:r})}r8.displayName="Memo(PaneHeader)";let oe=()=>{let e=(0,c.useContext)(u.Q2);if(void 0===e)throw Error("useDocumentSheetListContext must be used within an DocumentSheetListProvider");return e};function ot({children:e,table:t}){let[n,i]=(0,c.useState)(null),[l,r]=(0,c.useState)([]),s=(0,c.useCallback)((e=null)=>{n?.state==="focused"&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),i(e),r([])},[n]),a=(0,c.useCallback)(()=>s(),[s]),d=(0,c.useCallback)(e=>{if(!n)return;let i=t.getVisibleLeafColumns(),l=i.findIndex(e=>e.id===n.colId)+("left"===e?-1:1);l<0||l>=i.length||s({colId:i[l].id,rowIndex:n.rowIndex,state:"selected"})},[s,n,t]),p=(0,c.useCallback)(e=>{n&&r(t=>{let{rowIndex:i}=n,l=t=>t+("down"===e?1:-1);if(!t.length){let e=l(i);return e<0?[]:[e]}let r=l(t[t.length-1]);return r<0?t:r===i?[]:t.includes(r)?t.slice(0,-1):[...t,r]})},[n]),m=(0,c.useCallback)((e,t)=>{s({colId:e,rowIndex:t,state:"selected"})},[s]),h=(0,c.useCallback)(()=>{n&&(l.length?r([]):s("selected"===n.state?null:{...n,state:"selected"}))},[s,n,l.length]),f=(0,c.useCallback)((e,t)=>{if(!n)return;let i="ArrowDown"===t?"down":"up",l="down"===i?1:-1;if(e)p(i);else{let e=n.rowIndex+l;if(e<0)return;m(n.colId,e)}},[p,n,m]),x=(0,c.useCallback)(e=>{if(!n)return;let{key:t,shiftKey:i}=e;switch(t){case"Shift":break;case"Escape":h();break;case"ArrowDown":case"ArrowUp":e.preventDefault(),f(i,t);break;case"ArrowLeft":case"ArrowRight":"selected"===n.state&&(e.preventDefault(),d("ArrowLeft"===t?"left":"right"))}},[n,h,f,d]),g=(0,c.useCallback)(e=>{n&&(document.getElementById(`cell-${n.colId}-${n.rowIndex}`)?.contains(e.target)||a())},[a,n]);(0,c.useEffect)(()=>(n&&(document.addEventListener("keydown",x),document.addEventListener("click",g)),()=>{n&&(document.removeEventListener("keydown",x),document.removeEventListener("click",g))}),[g,x,n]);let b=(0,c.useCallback)(()=>i(e=>e?{...e,state:"focused"}:null),[]),y=(0,c.useCallback)((e,t)=>n?.colId!==e?null:n.rowIndex===t?"focused"===n.state?"focused":"selectedAnchor":l.includes(t)?"selectedRange":null,[n,l]),v=(0,c.useCallback)(()=>{n&&s({colId:n.colId,rowIndex:n.rowIndex+1,state:"selected"})},[s,n]),j=(0,c.useMemo)(()=>({focusAnchorCell:b,resetFocusSelection:a,setSelectedAnchorCell:m,getStateByCellId:y,submitFocusedCell:v}),[b,a,m,y,v]);return(0,o.jsx)(u.Q2.Provider,{value:j,children:e})}let on=x.zo.td`
  display: flex;
  overflow: hidden;
  box-sizing: border-box;
  width: ${({width:e})=>e}px;
  border-top: 1px solid var(--card-border-color);
  background-color: var(--card-bg-color);
`,oi=(0,x.zo)(on)`
  position: sticky;
  z-index: 2;
`;function ol(e){let{getValue:t,column:n,row:i,fieldType:l}=e,r=`cell-${n.id}-${i.index}`,[s,d]=(0,c.useState)(t()),[u,p]=(0,c.useState)(!1),m=(0,c.useRef)(null),{focusAnchorCell:h,resetFocusSelection:f,setSelectedAnchorCell:x,getStateByCellId:g,submitFocusedCell:b}=oe(),y=g(n.id,i.index),v=(0,c.useCallback)(()=>{x(n.id,i.index),h()},[n.id,h,i.index,x]),{patchDocument:j}=e.table.options.meta||{},_=()=>{m.current?.focus(),m.current instanceof HTMLInputElement&&m.current.select()},w=(0,c.useCallback)(e=>{let{key:t}=e;"Enter"===t&&("selectedAnchor"===y&&_(),"focused"===y&&b())},[y,b]),k=(0,c.useCallback)(e=>{let t=e.clipboardData?.getData("Text");("string"==typeof t||"number"==typeof t)&&(d(t),j?.(i.id,n.id,t))},[n.id,j,i.id]),C=(0,c.useCallback)(()=>{navigator.clipboard.writeText(s.toString())},[s]);(0,c.useEffect)(()=>(("selectedAnchor"===y||"focused"===y)&&document.addEventListener("keydown",w),("selectedAnchor"===y||"selectedRange"===y)&&document.addEventListener("paste",k),"selectedAnchor"===y&&document.addEventListener("copy",C),()=>{("selectedAnchor"===y||"focused"===y)&&document.removeEventListener("keydown",w),("selectedAnchor"===y||"selectedRange"===y)&&document.removeEventListener("paste",k),"selectedAnchor"===y&&document.removeEventListener("copy",C)}),[r,y,n.id,g,C,w,k,i.index]);let S=()=>"focused"===y?"2px solid blue":"selectedRange"===y?"1px solid green":"selectedAnchor"===y?"1px solid blue":"1px solid transparent",z={onFocus:v,onBlur:()=>{u&&(j?.(i.id,n.id,s),p(!1)),f()},onMouseDown:e=>{2===e.detail?_():(e.preventDefault(),x(n.id,i.index))},"aria-selected":!!y,"data-testid":r,id:r,ref:e=>{m.current=e}};return"boolean"===l.name?(0,o.jsxs)(a.Ph,{...z,onChange:()=>null,radius:0,style:{boxShadow:"none",border:S(),padding:0},value:JSON.stringify(s),children:[(0,o.jsx)("option",{value:"True",children:"True"}),(0,o.jsx)("option",{value:"False",children:"False"})]}):(0,o.jsx)(a.oi,{...z,size:0,radius:0,border:!1,style:{border:S(),padding:"22px 16px"},value:"string"==typeof s||"number"==typeof s?s:JSON.stringify(s),onChange:e=>{p(!0),d(e.target.value)}})}function or(e){let t=e.column.getIsPinned(),n=t&&e.column.getIsLastColumn("left")?2:1;return(0,o.jsx)(t?oi:on,{style:{left:e.column.getStart("left")??void 0,borderRight:`${n}px solid var(--card-border-color)`},width:e.column.getSize(),children:(0,eI.ie)(e.column.columnDef.cell,e.getContext?.())},e.row.original._id+e.id)}let oo=e=>{let{documentPreviewStore:t,row:n,schemaType:i}=e,l=(0,c.useMemo)(()=>(0,m.eLL)(t,i,n.original._id),[t,n.original._id,i]),r=(0,m._je)(n.original._id),{snapshot:s,isLoading:d}=(0,v.m)(l,{snapshot:null,isLoading:!0});if(d)return(0,o.jsx)(a.xv,{size:1,muted:!0,children:"Loading..."});let u=s?.title??"Untitled";return(0,o.jsxs)(a.kC,{align:"center",gap:3,children:[(0,o.jsx)(m.aAo,{draft:r.draft,published:r.published,versions:void 0}),(0,o.jsx)(a.xv,{size:1,children:u})]})},os=(0,e$.Cl)(),oa=["string","number","boolean"],od=(e,t)=>e.fields.reduce((e,n)=>{let{type:i,name:l}=n;return oa.includes(i.name)?[...e,os.accessor(t?`${t}.${n.name}`:n.name,{id:t?`${t}_${n.name}`:n.name,header:n.type.title,enableHiding:!0,cell:e=>(0,o.jsx)(ol,{...e,fieldType:i})})]:"object"===i.name&&(0,h.m$)(i)&&!t?[...e,os.group({header:l,columns:od(i,n.name)})]:e},[]),oc=e=>e.flatMap(e=>"accessorKey"in e?e:"columns"in e&&e.columns?oc(e.columns):[]);function ou({table:e}){let{t}=(0,m.$G7)(),n=e.getVisibleLeafColumns().filter(e=>e.getCanHide()).length>=5,i=(0,c.useCallback)(()=>{e.resetColumnVisibility()},[e]),l=e=>()=>{e.toggleVisibility()},s=t=>{let i=t.getIsVisible(),l=1===e.getVisibleLeafColumns().filter(e=>e.getCanHide()).length;return n&&!i||l&&i};return(0,o.jsx)(r.j2,{button:(0,o.jsx)(r.zx,{mode:"bleed",text:t("sheet-list.edit-columns")}),id:"columns-control",menu:(0,o.jsx)(a.v2,{padding:3,paddingTop:4,style:{width:240},children:(0,o.jsxs)(a.kC,{direction:"column",height:"fill",gap:3,children:[(0,o.jsx)(a.xv,{weight:"semibold",size:1,children:t("sheet-list.select-fields")}),(0,o.jsx)(a.kC,{style:{flex:"1 1 auto",maxHeight:320,overflowY:"scroll"},children:(0,o.jsx)(a.Kq,{children:e.getAllLeafColumns().filter(e=>e.getCanHide()).map(e=>(0,o.jsxs)(a.kC,{marginY:2,align:"center",children:[(0,o.jsx)(a.XZ,{readOnly:s(e),checked:e.getIsVisible(),onChange:l(e),id:`col-visibility-${e.id}`,style:{display:"block"}}),(0,o.jsx)(a.xu,{flex:1,paddingLeft:3,children:(0,o.jsx)(a.xv,{size:1,children:(0,o.jsx)("label",{htmlFor:`col-visibility-${e.id}`,children:e.columnDef.header?.toString()})})})]},e.id))})}),(0,o.jsx)(r.zx,{width:"fill",mode:"ghost",text:t("sheet-list.reset-columns"),onClick:i})]})}),placement:"bottom",popover:{portal:!0}})}let op=(0,x.zo)(a.kC)`
  flex-shrink: 0;
`;function om(){let e,t,n;let i=(0,s.c)(5),{state:l}=(0,m.XNc)(),{filtersVisible:r}=l;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(m.s8v,{}),i[0]=e):e=i[0],i[1]!==r?(t=r&&(0,o.jsx)(m.x$p,{showTypeFilter:!1}),i[1]=r,i[2]=t):t=i[2],i[3]!==t?(n=(0,o.jsxs)(op,{children:[e,t]}),i[3]=t,i[4]=n):n=i[4],n}let oh=x.zo.th`
  margin: 16px;
  z-index: 1;
  padding: 22px 0px;
  border-top: 1px solid var(--card-border-color);
  background-color: var(--card-badge-default-bg-color);
  box-sizing: border-box;
  text-align: left;
  width: ${({width:e})=>e}px;
  max-width: ${({width:e})=>e}px;
`,of=(0,x.zo)(oh)`
  position: sticky;
  z-index: 2;
`,ox=x.zo.div`
  visibility: hidden;

  ${oh}:hover & {
    visibility: visible;
  }
`;function og(e){let{header:t,headerGroup:n}=e,{t:i}=(0,m.$G7)(),l=t.column.getIsPinned(),s=n.depth>0&&!t.column.parent?null:(0,o.jsx)(a.xv,{size:1,weight:"semibold",textOverflow:"ellipsis",children:(0,eI.ie)(t.column.columnDef.header,t.getContext())}),d=t.column.getCanHide()&&(0===n.depth?!t.column.columns.length:t.column.parent),c=l&&t.column.getIsLastColumn("left")?2:1;return(0,o.jsx)(l?of:oh,{style:{left:t.column.getStart("left")??void 0,borderRight:`${c}px solid var(--card-border-color)`},"data-testid":`header-${t.id}`,width:t.getSize(),children:(0,o.jsxs)(a.kC,{justify:"space-between",marginX:2,align:"baseline",children:[(0,o.jsx)(r.u,{delay:500,content:s,children:(0,o.jsx)(a.xu,{style:{boxSizing:"border-box"},marginLeft:3,marginRight:3,children:s})}),d&&(0,o.jsx)(ox,{children:(0,o.jsx)(r.j2,{button:(0,o.jsx)(r.zx,{tooltipProps:{content:"Open field menu"},mode:"bleed",icon:p.xXb,"data-testid":"field-menu-button"}),id:"field menu",popover:{placement:"bottom-end"},menu:(0,o.jsx)(a.v2,{children:(0,o.jsx)(r.sN,{text:i("sheet-list.hide-field"),icon:p.Two,onClick:()=>t.column.toggleVisibility()})})})})]})},t.id)}function ob({table:e}){return(0,o.jsx)(r.uE,{children:(0,o.jsxs)(a.kC,{gap:3,align:"center",children:[(0,o.jsx)(r.zx,{onClick:()=>e.setPageIndex(0),disabled:!e.getCanPreviousPage(),icon:p.TwJ,tooltipProps:{content:"Go to first page"}}),(0,o.jsx)(r.zx,{onClick:()=>e.previousPage(),disabled:!e.getCanPreviousPage(),icon:p.wyc,tooltipProps:{content:"Go to previous page"}}),(0,o.jsxs)(a.xv,{style:{whiteSpace:"nowrap"},children:[e.getState().pagination.pageIndex+1," of ",e.getPageCount()]}),(0,o.jsx)(r.zx,{onClick:()=>e.nextPage(),disabled:!e.getCanNextPage(),icon:p.XCv,tooltipProps:{content:"Go to next page"}}),(0,o.jsx)(r.zx,{onClick:()=>e.setPageIndex(e.getPageCount()-1),disabled:!e.getCanNextPage(),icon:p.hZl,tooltipProps:{content:"Go to last page"}}),(0,o.jsx)("select",{value:e.getState().pagination.pageSize,onChange:t=>{e.setPageSize(Number(t.target.value))},children:[25,50,100].map(e=>(0,o.jsx)("option",{value:e,children:e},e))})]})})}function oy(e,t){switch(t.type){case"DOCUMENTS_SET":{let n=t.documents.reduce((e,t)=>({...e,[t._id]:t}),{});return{...e,documents:n}}case"DOCUMENT_RECEIVED":{let n=t.payload;return{...e,documents:{...e.documents,[n._id]:n}}}case"DOCUMENT_DELETED":{let{[t.id]:n,...i}=e.documents;return{...e,documents:i}}case"DOCUMENT_UPDATED":{let n=t.payload,i=n._id,l={...e.documents[i],...n};return{...e,documents:{...e.documents,[i]:l}}}default:return e}}let ov={events:["welcome","mutation","reconnect"],includeResult:!0,visibility:"query",includeAllVersions:!0,tag:"document-sheet-list-store"},oj=(0,x.zo)(a.kC)`
  height: 100%;
`,o_=x.zo.div`
  overflow: auto; //our scrollable table container
  position: relative; //needed for sticky header
`,ow=x.zo.table`
  border-collapse: separate;
  border-spacing: 0;
  font-family: arial, sans-serif;
  white-space: nowrap;
  width: 100%;
  border: 1px solid lightgray;

  thead {
    display: grid;
    position: sticky;
    top: 0;
    z-index: 10;
  }
  tr {
    padding: 0;
  }
  tr:last-child {
    border-bottom: none;
  }
`;function ok({documentSchemaType:e}){let{dispatch:t,state:n}=(0,m.XNc)(),{columns:i,initialColumnsVisibility:l}=function(e){let t=(0,m.rq_)(),n=(0,c.useMemo)(()=>e?[os.display({id:"selected",enableHiding:!1,header:e=>(0,o.jsxs)(a.xu,{children:[(0,o.jsx)(a.XZ,{style:{paddingLeft:4},indeterminate:e.table.getIsSomeRowsSelected(),onChange:e.table.getToggleAllPageRowsSelectedHandler()}),e.table.getSelectedRowModel().rows.length," selected"]}),cell:r9}),os.accessor("Preview",{enableHiding:!1,id:"Preview",cell:n=>(0,o.jsx)(oo,{...n,documentPreviewStore:t,schemaType:e})}),...od(e)]:[],[t,e]),[i]=(0,c.useMemo)(()=>oc(n).reduce(([e,t],n)=>{if(!n.id)throw Error("Column must have an id");let i=n.id;return n.enableHiding?5===t?[{...e,[i]:!1},t]:[{...e,[i]:!0},t+1]:[{...e,[i]:!0},t]},[{},0]),[n]);return{columns:n,initialColumnsVisibility:i}}(e),{data:r}=function(e){let t,n,i,l,r,o;let a=(0,s.c)(12),{typeName:d}=e,{state:u}=(0,m.XNc)();a[0]!==u.result.hits?(n=new Map,u.result.hits.forEach(e=>n.set((0,m.vsM)(e.hit._id),e.hit)),a[0]=u.result.hits,a[1]=n):n=a[1],t=n;let p=`_type == "${d}"`;a[2]!==p?(i={filter:p},a[2]=p,a[3]=i):i=a[3];let{data:h,isLoading:f}=function(e){let t,n,i,l,r,o,a,d,u,p;let h=(0,s.c)(25),{filter:f,params:x,apiVersion:g}=e,b=`*[${f}][0...2000]`,y=g||m.Dr7.apiVersion;h[0]!==y?(t={...m.Dr7,apiVersion:y},h[0]=y,h[1]=t):t=h[1];let v=(0,m.m85)(t);h[2]===Symbol.for("react.memo_cache_sentinel")?(n={documents:{}},h[2]=n):n=h[2];let[j,_]=(0,c.useReducer)(oy,n),[w,k]=(0,c.useState)(null!==v),[C,S]=(0,c.useState)(null);h[3]!==b||h[4]!==v||h[5]!==x?(i=async()=>{if(!v){k(!1);return}try{let e=await v.fetch(b,x);_({type:"DOCUMENTS_SET",documents:e}),k(!1)}catch(e){S(e)}},h[3]=b,h[4]=v,h[5]=x,h[6]=i):i=h[6];let E=i;h[7]!==E?(l=async e=>{if("welcome"===e.type&&(k(!0),await E(),k(!1)),"reconnect"===e.type&&k(!0),"mutation"===e.type){if("appear"===e.transition){let t=e.result;t&&_({type:"DOCUMENT_RECEIVED",payload:t})}if("disappear"===e.transition&&_({type:"DOCUMENT_DELETED",id:e.documentId}),"update"===e.transition){let t=e.result;t&&_({type:"DOCUMENT_UPDATED",payload:t})}}},h[7]=E,h[8]=l):l=h[8];let I=l;e:{let e;if(!v){let e;h[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,z.of)(),h[9]=e):e=h[9],r=e;break e}if(h[10]!==b||h[11]!==v.observable||h[12]!==x){let t;h[14]===Symbol.for("react.memo_cache_sentinel")?(t=e=>(S(e),(0,z.of)(e)),h[14]=t):t=h[14],e=v.observable.listen(b,x,ov).pipe((0,R.K)(t)),h[10]=b,h[11]=v.observable,h[12]=x,h[13]=e}else e=h[13];r=e}let $=r;return h[15]!==I||h[16]!==$?(o=()=>{let e=$.subscribe(I);return()=>{e?.unsubscribe()}},a=[I,$],h[15]=I,h[16]=$,h[17]=o,h[18]=a):(o=h[17],a=h[18]),(0,c.useEffect)(o,a),h[19]!==j.documents?(u=Object.values(Object.keys(j.documents).reduce((e,t)=>{let n=j.documents[t],i=n._id===(0,m.qyu)(n._id),l=i?n._id:(0,m.qyu)(n._id);return e[l]&&!i||(e[l]=n),e},{})),h[19]=j.documents,h[20]=u):u=h[20],d=u,h[21]!==d||h[22]!==C||h[23]!==w?(p={data:d,isLoading:w,error:C},h[21]=d,h[22]=C,h[23]=w,h[24]=p):p=h[24],p}(i);if(a[4]!==h||a[5]!==t){let e;a[7]!==t?(e=e=>t.has((0,m.vsM)(e._id)),a[7]=t,a[8]=e):e=a[8],r=h.filter(e),a[4]=h,a[5]=t,a[6]=r}else r=a[6];return l=r,a[9]!==l||a[10]!==f?(o={data:l,isLoading:f},a[9]=l,a[10]=f,a[11]=o):o=a[11],o}({typeName:e.name}),[d,u]=(0,c.useState)(null),p=n.result.hits.length,h=(0,eI.b7)({data:r,columns:i,getCoreRowModel:(0,e$.sC)(),getFilteredRowModel:(0,e$.vL)(),getPaginationRowModel:(0,e$.G_)(),autoResetPageIndex:!1,initialState:{columnPinning:{left:["selected","Preview"]},pagination:{pageSize:25},columnVisibility:l},getRowId:e=>e._id,meta:{selectedAnchor:d,setSelectedAnchor:u,patchDocument:(e,t,n)=>null}}),{rows:f}=h.getRowModel();(0,c.useEffect)(()=>(t({type:"TERMS_TYPE_ADD",schemaType:e}),()=>{t({type:"TERMS_TYPE_REMOVE",schemaType:e})}),[e,t]);let x=(0,c.useCallback)(e=>(0,o.jsx)(a.xu,{as:"tr",paddingY:2,style:{display:"flex",width:"100%"},children:e.getVisibleCells().map(t=>(0,c.createElement)(or,{...t,key:e.original._id+t.id}))},e.original._id+e.id),[]),g=`Total: ${p} rows, showing ${f.length} rows`;return(0,o.jsxs)(oj,{direction:"column",paddingX:3,"data-testid":"document-sheet-list-pane",children:[(0,o.jsxs)(a.kC,{direction:"row",align:"center",paddingY:3,paddingX:1,justify:"space-between",children:[(0,o.jsxs)(a.kC,{direction:"row",align:"center",children:[(0,o.jsx)(om,{}),(0,o.jsx)(a.xv,{size:0,muted:!0,children:g})]}),(0,o.jsx)(ou,{table:h})]}),(0,o.jsx)(o_,{children:(0,o.jsx)(ot,{table:h,children:(0,o.jsxs)(ow,{children:[(0,o.jsx)("thead",{children:h.getHeaderGroups().map(e=>(0,o.jsx)(a.xu,{as:"tr",children:e.headers.map(t=>(0,o.jsx)(og,{header:t,headerGroup:e},t.id))},e.id))}),(0,o.jsx)("tbody",{children:h.getRowModel().rows.map(x)})]})})}),(0,o.jsx)(a.kC,{justify:"flex-end",padding:3,gap:4,paddingY:5,children:(0,o.jsx)(ob,{table:h})})]})}function oC(e){let t=(0,m.I_y)(),n=e.pane.schemaTypeName,i=t.get(n);if(!i||!(0,h.em)(i))throw Error(`Schema type "${n}" not found or not a document schema`);return(0,o.jsx)(m.X$R,{children:(0,o.jsx)(ok,{...e,documentSchemaType:i})})}let oS=e=>{let{menuItems:t,sortOrderRaw:n,layout:i}=e;return t?.map(e=>e.params?.layout?{...e,selected:i===e.params?.layout}:e?.params?.by?{...e,selected:ev(n?.by,e?.params?.by||m.LZ8)}:{...e,selected:!1})};function oz(e){let[t,n]=(0,c.useState)(e);return ej(t,e)?t:(n(e),e)}let oE=(0,c.memo)(function(e){let t,n,i,l,r,a,d,u,p,h,f;let x=(0,s.c)(36),{index:g,isSelected:b,pane:y,paneKey:v}=e,{name:j}=(0,m.Lky)(),{defaultLayout:_,initialValueTemplates:w,menuItemGroups:k,menuItems:C,options:S}=y,z=void 0===w?m.LZ8:w,{defaultOrdering:E,filter:I}=S,$=void 0===E?m.LZ8:E,P=oz(S.params||rF),A=y.source;e:{let e;x[0]!==I||x[1]!==P?(e=rZ(I,P),x[0]=I,x[1]=P,x[2]=e):e=x[2];let n=e;if(n?.length===1){t=n[0];break e}t=null}let T=t,[R,M]=nN("layout",T??y.id,void 0===_?"default":_),{title:D}=(0,m.v0Z)(y);x[3]!==$?(i=$?.length>0?{by:$}:rG,x[3]=$,x[4]=i):i=x[4],n=i;let[L,N]=nN("sort-order",T??y.id,n);x[5]!==R||x[6]!==C||x[7]!==L?(r=oS({menuItems:C,sortOrderRaw:L,layout:R}),x[5]=R,x[6]=C,x[7]=L,x[8]=r):r=x[8],l=r;let O="sheetList"===R;x[9]!==O||x[10]!==R||x[11]!==e||x[12]!==L?(a=O?(0,c.createElement)(oC,{...e,key:e.pane.id}):(0,o.jsx)(r7,{...e,sortOrder:L,layout:R}),x[9]=O,x[10]=R,x[11]=e,x[12]=L,x[13]=a):a=x[13];let U=a,B=A||j;return x[14]!==O?(d=O?{}:{currentMaxWidth:350,maxWidth:640},x[14]=O,x[15]=d):d=x[15],x[16]!==y.source?(u=iN,x[16]=y.source,x[17]=u):u=x[17],x[18]!==g||x[19]!==z||x[20]!==k||x[21]!==l||x[22]!==M||x[23]!==N||x[24]!==D?(p=(0,o.jsx)(r8,{index:g,initialValueTemplates:z,menuItemGroups:k,menuItems:l,setLayout:M,setSortOrder:N,title:D}),x[18]=g,x[19]=z,x[20]=k,x[21]=l,x[22]=M,x[23]=N,x[24]=D,x[25]=p):p=x[25],x[26]!==b||x[27]!==v||x[28]!==U||x[29]!==d||x[30]!==u||x[31]!==p?(h=(0,o.jsxs)(te,{"data-ui":"DocumentListPane",id:v,minWidth:320,...d,selected:b,children:[u,p,U]}),x[26]=b,x[27]=v,x[28]=U,x[29]=d,x[30]=u,x[31]=p,x[32]=h):h=x[32],x[33]!==h||x[34]!==B?(f=(0,o.jsx)(m.cWh,{name:B,children:h}),x[33]=h,x[34]=B,x[35]=f):f=x[35],f});oE.displayName="Memo(PaneContainer)";let oI=e=>{let{liveEditSchemaType:t,version:n}=e;return t&&!n?{label:"Live",color:"danger"}:null};oI.displayName="LiveEditBadge";let o$={activePanes:[]};function oP(e){o$.activePanes=e}function oA(e,t,n,i){let l=n?.panes||[],r=o$.activePanes||[],o=t.id||(0,f.Z)();for(let n=r.length-1;n>=0;n--){let s=r[n];if("object"==typeof s&&(s.canHandleIntent?.(e,t,{pane:s,index:n})||"documentList"===s.type&&s.schemaTypeName===t.type&&"_type == $type"===s.options.filter)){let r=function(e,{template:t,version:n}){return"create"!==e?iO:t&&n?{template:t,version:n}:t?{template:t}:n?{version:n}:iO}(e,t);return{panes:l.slice(0,n).concat([[{id:o,params:r,payload:i}]])}}}return{intent:e,params:t,payload:i}}let oT=(0,x.zo)(m.l$t)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`,oR=(0,x.zo)(a.xu)`
  &:not([hidden]) {
    display: grid;
  }
  grid-template-columns: 48px 1fr;
  align-items: center;
  gap: 0.25em;
`;function oM(e){let t,n,i,r,d,u,p,h,f,x,g,b,y;let v=(0,s.c)(39),{showChanges:j}=e,{documentId:_,schemaType:w,timelineError:k,timelineStore:C,value:S}=nv(),{selectedReleaseId:z}=(0,m.Wc0)(),[E,I]=(0,c.useState)(null),$=(0,m.P08)(C,oB),P=(0,m.P08)(C,oU),A=(0,m.P08)(C,oO),T=(0,m.P08)(C,oN),R=(0,m.P08)(C,oL),M="loading"===T,D=!A,{t:L}=(0,m.$G7)(l.UA);if(v[0]!==P||v[1]!==_||v[2]!==D||v[3]!==w||v[4]!==S?(n={documentId:_,schemaType:w,FieldWrapper:oD,rootDiff:P,isComparingCurrent:D,value:S,showFromValue:!0},v[0]=P,v[1]=_,v[2]=D,v[3]=w,v[4]=S,v[5]=n):n=v[5],t=n,z){let e;return v[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(a.kC,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,o.jsx)(a.Zb,{flex:1,padding:2,paddingTop:0,children:(0,o.jsx)(lK,{versionError:!0})})}),v[6]=e):e=v[6],e}return v[7]!==L?(i=L("changes.from.label"),v[7]=L,v[8]=i):i=v[8],v[9]!==i?(r=(0,o.jsx)(a.xv,{size:1,muted:!0,children:i}),v[9]=i,v[10]=r):r=v[10],v[11]!==R?(d=(0,o.jsx)(lH,{mode:"since",chunk:R,placement:"bottom-start"}),v[11]=R,v[12]=d):d=v[12],v[13]!==L?(u=L("changes.to.label"),v[13]=L,v[14]=u):u=v[14],v[15]!==u?(p=(0,o.jsx)(a.xv,{size:1,muted:!0,children:u}),v[15]=u,v[16]=p):p=v[16],v[17]!==$?(h=(0,o.jsx)(lH,{chunk:$,mode:"rev",placement:"bottom-end"}),v[17]=$,v[18]=h):h=v[18],v[19]!==r||v[20]!==d||v[21]!==p||v[22]!==h?(f=(0,o.jsx)(a.xu,{padding:3,children:(0,o.jsxs)(oR,{paddingX:2,paddingBottom:2,children:[r,d,p,h]})}),v[19]=r,v[20]=d,v[21]=p,v[22]=h,v[23]=f):f=v[23],v[24]!==P||v[25]!==t||v[26]!==M||v[27]!==w||v[28]!==j||v[29]!==k?(x=j&&(0,o.jsx)(oV,{diff:P,documentContext:t,error:k,loading:M,schemaType:w}),v[24]=P,v[25]=t,v[26]=M,v[27]=w,v[28]=j,v[29]=k,v[30]=x):x=v[30],v[31]!==x?(g=(0,o.jsx)(oT,{"data-ui":"Scroller",ref:I,children:(0,o.jsx)(a.xu,{flex:1,paddingX:3,height:"fill",children:x})}),v[31]=x,v[32]=g):g=v[32],v[33]!==E||v[34]!==g?(b=(0,o.jsx)(a.Zb,{flex:1,paddingX:2,paddingY:2,children:(0,o.jsx)(a.NM,{element:E,children:g})}),v[33]=E,v[34]=g,v[35]=b):b=v[35],v[36]!==b||v[37]!==f?(y=(0,o.jsxs)(a.kC,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[f,b]}),v[36]=b,v[37]=f,v[38]=y):y=v[38],y}function oD(e){return(0,o.jsx)(m.MUX,{...e,hasRevertHover:!1})}function oL(e){return e.sinceTime}function oN(e){return e.selectionState}function oO(e){return e.onOlderRevision}function oU(e){return e.diff}function oB(e){return e.revTime}function oV(e){let t,n;let i=(0,s.c)(9),{error:l,diff:r,documentContext:a,loading:d,schemaType:c}=e;if(l){let e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(m.kwM,{}),i[0]=e):e=i[0],e}if(d){let e;return i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(m.Bwn,{showText:!0}),i[1]=e):e=i[1],e}if(!r){let e;return i[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(m.kwM,{}),i[2]=e):e=i[2],e}return i[3]!==r||i[4]!==c?(t=(0,o.jsx)(m.EyJ,{diff:r,schemaType:c}),i[3]=r,i[4]=c,i[5]=t):t=i[5],i[6]!==a||i[7]!==t?(n=(0,o.jsx)(u.H7.Provider,{value:a,children:t}),i[6]=a,i[7]=t,i[8]=n):n=i[8],n}let oG=e=>!(0,m.Pm6)(e)&&!(0,m.E8O)(e)&&!(0,m.fWL)(e)&&!(0,m.rxG)(e)&&!(0,m.c$P)(e);function oF(e){let t,n,i,l,d,c,u,p;let h=(0,s.c)(27),{event:f,isSelected:x,onSelect:g,optionsMenu:b}=e,{t:y}=(0,m.$G7)("studio");h[0]!==f?(t=oG(f),h[0]=f,h[1]=t):t=h[1];let v=t;h[2]!==f||h[3]!==v||h[4]!==g?(n=e=>{e.preventDefault(),e.stopPropagation(),v&&g(f)},h[2]=f,h[3]=v,h[4]=g,h[5]=n):n=h[5];let j=n;h[6]!==v||h[7]!==y?(i=v?"":y("changes.not-selectable"),h[6]=v,h[7]=y,h[8]=i):i=h[8];let _=v?"button":"div",w=v?"pointer":"default";return h[9]!==w?(l={cursor:w,width:"100%"},h[9]=w,h[10]=l):l=h[10],h[11]!==f?(d=(0,o.jsx)(m.juk,{event:f,showChangesBy:"tooltip"}),h[11]=f,h[12]=d):d=h[12],h[13]!==f.timestamp||h[14]!==j||h[15]!==x||h[16]!==_||h[17]!==l||h[18]!==d?(c=(0,o.jsx)(a.Zb,{as:_,onClick:j,padding:2,pressed:x,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-timestamp":f.timestamp,style:l,children:d}),h[13]=f.timestamp,h[14]=j,h[15]=x,h[16]=_,h[17]=l,h[18]=d,h[19]=c):c=h[19],h[20]!==v||h[21]!==i||h[22]!==c?(u=(0,o.jsx)(r.u,{content:i,disabled:v,children:c}),h[20]=v,h[21]=i,h[22]=c,h[23]=u):u=h[23],h[24]!==b||h[25]!==u?(p=(0,o.jsxs)(a.kC,{gap:1,children:[u,b]}),h[24]=b,h[25]=u,h[26]=p):p=h[26],p}function oK(e){let t,n,i,d,c,u,p,h,f,x,g;let b=(0,s.c)(41),{event:y}=e,{t:v}=(0,m.$G7)(l.UA),{t:_}=(0,m.$G7)(),w=(0,a.vI)(),{params:k,setParams:C}=eF(),S=(0,m.RQ8)();b[0]!==y.id||b[1]!==y.versionId||b[2]!==y.versionRevisionId||b[3]!==k||b[4]!==C?(t=()=>{C({...k,rev:y.versionRevisionId||"@lastPublished",since:void 0,historyEvent:y.id,historyVersion:(0,m.eBk)(y.versionId)})},b[0]=y.id,b[1]=y.versionId,b[2]=y.versionRevisionId,b[3]=k,b[4]=C,b[5]=t):t=b[5];let z=t;b[6]!==y.versionRevisionId||b[7]!==k||b[8]!==C||b[9]!==S?(n=()=>{C({...k,rev:y.versionRevisionId,preserveRev:"true",since:void 0}),setTimeout(()=>{S("drafts")},100)},b[6]=y.versionRevisionId,b[7]=k,b[8]=C,b[9]=S,b[10]=n):n=b[10];let E=n;b[11]!==y.release?(i=e=>{let{children:t}=e;return(0,o.jsx)(m.Q3e,{$tone:y.release?(0,m._wt)(y.release)?(0,m.Ydd)(y.release):"default":void 0,children:t})},b[11]=y.release,b[12]=i):i=b[12];let I=i,$=y.release&&!(0,m._wt)(y.release),P=`timeline-item-menu-button-${y.versionId}`;b[13]!==v?(d=v("timeline-item.menu-button.aria-label"),b[13]=v,b[14]=d):d=b[14],b[15]!==y.release||b[16]!==$||b[17]!==v?(c=$?v("timeline-item.not-found-release.tooltip",{releaseId:y.release?._id?(0,m.QXs)(y.release._id):void 0}):v("timeline-item.menu-button.tooltip"),b[15]=y.release,b[16]=$,b[17]=v,b[18]=c):c=b[18],b[19]!==c?(u={content:c},b[19]=c,b[20]=u):u=b[20],b[21]!==$||b[22]!==d||b[23]!==u?(p=(0,o.jsx)(m.lXN,{"aria-label":d,tooltipProps:u,disabled:$}),b[21]=$,b[22]=d,b[23]=u,b[24]=p):p=b[24],b[25]!==I||b[26]!==y.release||b[27]!==y.versionRevisionId||b[28]!==E||b[29]!==z||b[30]!==v||b[31]!==_?(h=(0,o.jsx)(a.v2,{padding:1,children:y.release?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(j.nR,{intent:m.B91,params:{id:(0,m.QXs)(y.release._id)},style:{textDecoration:"none"},children:(0,o.jsx)(a.sN,{padding:3,children:(0,o.jsx)(a.kC,{align:"center",justify:"flex-start",children:(0,o.jsx)(a.xv,{size:1,style:{textDecoration:"none"},children:(0,o.jsx)(m.vNl,{components:{VersionBadge:e=>{let{children:t}=e;return(0,o.jsx)(I,{children:t})}},i18nKey:"events.open.release",values:{releaseTitle:y.release.metadata?.title||_("release.placeholder-untitled-release")},t:v})})})})}),(0,o.jsx)(a.sN,{onClick:z,children:(0,o.jsx)(a.kC,{align:"center",justify:"flex-start",children:(0,o.jsx)(a.xv,{size:1,children:(0,o.jsx)(m.vNl,{components:{VersionBadge:e=>{let{children:t}=e;return(0,o.jsx)(I,{children:t})}},i18nKey:"events.inspect.release",values:{releaseTitle:y.release.metadata?.title||_("release.placeholder-untitled-release")},t:v})})})})]}):(0,o.jsx)(a.sN,{onClick:E,disabled:!y.versionRevisionId,children:(0,o.jsx)(a.kC,{align:"center",children:(0,o.jsx)(a.xv,{size:1,children:(0,o.jsx)(m.vNl,{components:{VersionBadge:oW},i18nKey:"events.open.draft",t:v})})})})}),b[25]=I,b[26]=y.release,b[27]=y.versionRevisionId,b[28]=E,b[29]=z,b[30]=v,b[31]=_,b[32]=h):h=b[32];let A=!w.elements?.[lX]||lX;return b[33]===Symbol.for("react.memo_cache_sentinel")?(f=["bottom-end","bottom-start"],b[33]=f):f=b[33],b[34]!==A?(x={portal:A,placement:"bottom",fallbackPlacements:f},b[34]=A,b[35]=x):x=b[35],b[36]!==x||b[37]!==P||b[38]!==p||b[39]!==h?(g=(0,o.jsx)(r.j2,{id:P,button:p,menu:h,popover:x}),b[36]=x,b[37]=P,b[38]=p,b[39]=h,b[40]=g):g=b[40],g}function oW(e){let{children:t}=e;return(0,o.jsx)(m.Q3e,{$tone:"caution",children:t})}let oX=b.E.create(a.xu),oH={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},oq=({events:e,hasMoreEvents:t,selectedEventId:n,onLoadMore:i,onSelect:l,listMaxHeight:r="calc(100vh - 280px)",fetchEventChildren:s})=>{let[d,u]=(0,c.useState)(!1),{t:p}=(0,m.$G7)("studio"),[h,f]=(0,c.useState)(()=>{if(n){let t=e.find(e=>e.id===n);if(t&&"parentId"in t&&t.parentId)return new Set([t.parentId])}return new Set}),[x,g]=(0,c.useState)(new Set),b=(0,c.useMemo)(()=>e.filter(t=>(0,m.zv9)(t)&&t.parentId?e[e.length-1].id===t.id||h.has(t.parentId):!(0,m.yLX)(t)||!t.parentId||h.has(t.parentId)),[h,e]),y=(0,c.useCallback)(e=>async()=>{let t=e.id,n=!1;f(e=>{let i=new Set(e);return e.has(t)?i.delete(t):(n=!0,i.add(t)),i}),n&&(g(e=>{let n=new Set(e);return n.add(t),n}),await s(e),g(e=>{let n=new Set(e);return n.delete(t),n}))},[s,g]),v=(0,c.useCallback)(e=>{l(e)},[l]),j=(0,c.useCallback)(e=>{let t=(0,m.ljK)(e.documentId);return(0,m.uUJ)(e)&&"published"===t?(0,o.jsx)(oK,{event:e}):(0,m.uUJ)(e)&&"draft"===t&&e.creationEvent||(0,m.Pm6)(e)&&e.creationEvent?(0,o.jsx)(lz,{isExpanded:h.has(e.id),onExpand:y(e)}):null},[h,y]),_=(0,c.useCallback)((e,{activeIndex:i})=>{let l=(0,m.zv9)(e)&&e.parentId&&x.has(e.parentId),r=i===b.length-1;return l?(0,o.jsx)(oX,{animate:{opacity:1},initial:{opacity:0},transition:{duration:.2,delay:.2},children:(0,o.jsx)(a.kC,{align:"center",justify:"center",style:{height:57},children:(0,o.jsx)(a.$j,{})})}):(0,o.jsxs)(oX,{paddingBottom:1,paddingRight:1,animate:"animate",exit:"exit",initial:"initial",variants:"parentId"in e?oH:void 0,paddingLeft:((0,m.yLX)(e)||(0,m.zv9)(e))&&e.parentId&&!r?4:1,children:[(0,o.jsx)(oF,{event:e,isSelected:e.id===n,onSelect:v,optionsMenu:j(e)}),r&&t&&(0,o.jsx)(m.Bwn,{})]},e.timestamp)},[x,n,v,j,b.length,t]);(0,c.useEffect)(()=>u(!0),[]);let w=b.findIndex(e=>e.id===n);return(0,o.jsx)(l$,{$visible:!w||d,"data-ui":"timeline",children:b.length>0?(0,o.jsx)(lI,{direction:"column",$maxHeight:r,id:"timeline-list-wrapper",children:(0,o.jsx)(m.e8h,{activeItemDataAttr:"data-hovered",ariaLabel:p("timeline.list.aria-label"),autoFocus:"list",initialIndex:w,initialScrollAlign:"center",itemHeight:57,items:b,onEndReached:i,onEndReachedIndexOffset:20,overscan:5,renderItem:_,wrapAround:!1})}):(0,o.jsxs)(a.Kq,{padding:3,space:3,children:[(0,o.jsx)(a.xv,{size:1,weight:"medium",children:p("timeline.error.no-document-history-title")}),(0,o.jsx)(a.xv,{muted:!0,size:1,children:p("timeline.error.no-document-history-description")})]})})};oq.displayName="EventsTimeline";let oY=(0,x.zo)(r.J2)`
  overflow: hidden;
  overflow: clip;
`,oZ={timestamp:{dateStyle:"medium",timeStyle:"short"}};function oJ({event:e,events:t,mode:n,placement:i}){let{setTimelineRange:l}=nv(),[s,u]=(0,c.useState)(!1),[h,f]=(0,c.useState)(null),[x,g]=(0,c.useState)(null),b=(0,d.pm)(),{nextCursor:y,loading:v,error:j,findRangeForRevision:_,findRangeForSince:w,loadMoreEvents:k,expandEvent:C}=(0,m.hIH)(),{t:S}=(0,m.$G7)("studio"),z=(0,c.useCallback)(()=>{u(!0)},[]),E=(0,c.useCallback)(()=>{u(!1)},[]),I=(0,c.useCallback)(e=>{s&&("Escape"===e.key||"Tab"===e.key)&&(E(),h?.focus())},[h,E,s]);(0,a.qh)(I),(0,a.Of)(s&&E,()=>[h,x]);let $=(0,c.useCallback)(e=>{try{if((0,m.Pm6)(e)||(0,m.E8O)(e)||(0,m.fWL)(e)||(0,m.rxG)(e)||(0,m.c$P)(e)){console.error("Event is not selectable");return}let[t,n]=_(e?.id);l(t,n),E()}catch(e){b.push({closable:!0,description:e.message,status:"error",title:S("timeline.error.unable-to-load-revision")})}},[S,b,l,_,E]),P=(0,c.useCallback)(e=>{try{let[t,n]=w(e.id);l(t,n),E()}catch(e){b.push({closable:!0,description:e.message,status:"error",title:S("timeline.error.unable-to-load-revision")})}},[w,l,b,S,E]),A=(0,c.useCallback)(()=>{!v&&y&&k()},[v,k,y]),T=(0,c.useMemo)(()=>j?(0,o.jsx)(lK,{}):(0,o.jsx)(oq,{events:t,fetchEventChildren:C,hasMoreEvents:!!y,selectedEventId:e?.id,onLoadMore:A,onSelect:"rev"===n?$:P}),[j,n,C,t,y,e?.id,A,P,$]),R=e?S(m.e9p[e.documentVariantType][e.type],{context:"timestamp",timestamp:new Date(e.timestamp),formatParams:oZ}):S("timeline.latest-revision"),M=e?S(m.e9p[e.documentVariantType][e.type],{context:"timestamp",timestamp:new Date(e.timestamp),formatParams:oZ}):t.length>0?S("timeline.since-version-missing"):S("timeline.no-previous-events"),D="rev"===n?R:M;return(0,o.jsx)(a.Xp,{__unstable_elements:{"timeline-menu":x},children:(0,o.jsx)(oY,{"data-testid":"timeline-menu",constrainSize:!0,content:s&&T,"data-ui":"versionMenu",open:s,placement:i,matchReferenceWidth:!0,portal:!0,ref:g,children:(0,o.jsx)(a.kC,{width:"fill",children:(0,o.jsx)(r.zx,{"data-testid":s?"timeline-menu-close-button":"timeline-menu-open-button",disabled:v||!t.length,mode:"ghost",onClick:s?E:z,ref:f,selected:s,width:"fill",tooltipProps:null,justify:"space-between",style:{maxWidth:"100%"},iconRight:p.v4q,text:v?S("timeline.loading-history"):D})})})})}let oQ=(0,x.zo)(m.l$t)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`,o0=(0,x.zo)(a.xu)`
  &:not([hidden]) {
    display: grid;
  }
  grid-template-columns: 48px 1fr;
  align-items: center;
  gap: 0.25em;
`,o1=(0,x.zo)(a.kC)`
  width: 100%;
  position: absolute;
  bottom: -4px;
`,o2={diff:null,loading:!0,error:null},o3=()=>{let e,t,n,i,r,d,c,p,h,f,x,b,y;let v=(0,s.c)(35),{documentId:j,schemaType:_,editState:w,displayed:k}=nv(),{selectedPerspective:C,selectedPerspectiveName:S,selectedReleaseId:z}=(0,m.Wc0)(),{t:E}=(0,m.$G7)(l.UA);if(v[0]!==w?.published?(t=w?.published??{},v[0]=w?.published,v[1]=t):t=v[1],v[2]!==k||v[3]!==t){let e;v[5]!==k?(e=k??{},v[5]=k,v[6]=e):e=v[6],n=(0,g.t)((0,g.r)(t,{author:""}),(0,g.r)(e,{author:""})),v[2]=k,v[3]=t,v[4]=n}else n=v[4];return(e=n,(!z||w?.version)&&("drafts"!==C||w?.draft)&&"published"!==S&&k?._rev)?(v[7]!==E?(i=E("events.compare-with-published.title"),v[7]=E,v[8]=i):i=v[8],v[9]!==i?(r=(0,o.jsx)(a.xv,{size:1,weight:"medium",children:i}),v[9]=i,v[10]=r):r=v[10],v[11]!==C?(d=(0,m._wt)(C)?C.metadata?.title:"draft",v[11]=C,v[12]=d):d=v[12],v[13]!==d?(c={version:d},v[13]=d,v[14]=c):c=v[14],v[15]!==E||v[16]!==c?(p=(0,o.jsx)(a.xv,{size:1,muted:!0,children:(0,o.jsx)(m.vNl,{i18nKey:"events.compare-with-published.description",t:E,values:c})}),v[15]=E,v[16]=c,v[17]=p):p=v[17],v[18]!==r||v[19]!==p?(h=(0,o.jsx)(a.Zb,{borderBottom:!0,paddingBottom:3,children:(0,o.jsxs)(a.Kq,{space:3,paddingTop:1,children:[r,p]})}),v[18]=r,v[19]=p,v[20]=h):h=v[20],v[21]!==k||v[22]!==j||v[23]!==e||v[24]!==_?(f={documentId:j,schemaType:_,rootDiff:e,isComparingCurrent:!0,FieldWrapper:o7,value:k,showFromValue:!0},v[21]=k,v[22]=j,v[23]=e,v[24]=_,v[25]=f):f=v[25],v[26]!==e||v[27]!==_?(x=(0,o.jsx)(a.xu,{paddingY:1,children:(0,o.jsx)(m.EyJ,{diff:e,schemaType:_})}),v[26]=e,v[27]=_,v[28]=x):x=v[28],v[29]!==x||v[30]!==f?(b=(0,o.jsx)(u.H7.Provider,{value:f,children:x}),v[29]=x,v[30]=f,v[31]=b):b=v[31],v[32]!==b||v[33]!==h?(y=(0,o.jsxs)(a.Kq,{space:2,marginBottom:3,children:[h,b]}),v[32]=b,v[33]=h,v[34]=y):y=v[34],y):null};function o4({showChanges:e}){let{documentId:t,schemaType:n,timelineError:i,value:l,formState:r}=nv(),[s,d]=(0,c.useState)(null),{events:u,revision:p,sinceRevision:h,getChangesList:f}=(0,m.hIH)(),x=!p?.revisionId,g=(0,c.useMemo)(()=>f(),[f]),{diff:y,loading:j,error:_}=(0,v.m)(g,o2),{t:w}=(0,m.$G7)("studio"),k=(0,c.useMemo)(()=>({documentId:t,schemaType:n,FieldWrapper:e=>e.path.length>0?(0,o.jsx)(m.MUX,{...e}):e.children,rootDiff:y,isComparingCurrent:x&&!r?.readOnly,value:l,showFromValue:!0}),[y,t,x,r?.readOnly,n,l]),[C,S]=(0,c.useMemo)(()=>u?[u.find(e=>e.id===h?.revisionId)||null,u.find(e=>e.id===p?.revisionId)||u[0]]:[null,null],[u,p?.revisionId,h?.revisionId]),z=(0,c.useMemo)(()=>S?u.slice(u.indexOf(S)+1).map(e=>"parentId"in S&&"parentId"in e&&e.parentId===S.parentId||"parentId"in e&&S.id===e.parentId?{...e,parentId:void 0}:e):u.slice(1),[u,S]);return u.length?(0,o.jsxs)(a.kC,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[(0,o.jsxs)(a.xu,{padding:3,style:{position:"relative"},children:[(0,o.jsxs)(o0,{paddingX:2,paddingBottom:2,children:[(0,o.jsx)(a.xv,{size:1,muted:!0,children:w("changes.inspector.from-label")}),(0,o.jsx)(oJ,{event:C||null,events:z,mode:"since",placement:"bottom-start"}),(0,o.jsx)(a.xv,{size:1,muted:!0,children:w("changes.inspector.to-label")}),(0,o.jsx)(oJ,{event:S||null,events:u,mode:"rev",placement:"bottom-end"})]}),j&&(0,o.jsx)(b.E.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,o.jsxs)(o1,{justify:"center",align:"center",gap:2,children:[(0,o.jsx)(a.xv,{muted:!0,size:0,children:w("changes.loading-changes")}),(0,o.jsx)(a.$j,{size:0})]})})]}),(0,o.jsx)(a.Zb,{flex:1,paddingX:2,paddingY:2,children:(0,o.jsx)(a.NM,{element:s,children:(0,o.jsx)(oQ,{"data-ui":"Scroller",ref:d,children:(0,o.jsx)(a.xu,{flex:1,paddingX:3,height:"fill",children:e&&(0,o.jsx)(o5,{documentContext:k,error:i||_,loading:p?.loading||h?.loading||!1,schemaType:n,sameRevisionSelected:C?.id===S?.id,sinceEvent:C})})})})})]}):(0,o.jsx)(a.xu,{paddingX:2,children:(0,o.jsxs)(a.Kq,{padding:3,space:3,children:[(0,o.jsx)(a.xv,{size:1,weight:"medium",children:w("timeline.error.no-document-history-title")}),(0,o.jsx)(a.xv,{muted:!0,size:1,children:w("timeline.error.no-document-history-description")})]})})}function o5(e){let t,n;let i=(0,s.c)(15),{error:l,documentContext:r,loading:d,schemaType:c,sameRevisionSelected:p,sinceEvent:h}=e;if(l){let e,t,n;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(o3,{}),i[0]=e):e=i[0],i[1]!==l||i[2]!==h?.type?(t=h?.type!=="historyCleared"&&(0,o.jsx)(m.DAA,{error:l}),i[1]=l,i[2]=h?.type,i[3]=t):t=i[3],i[4]!==t?(n=(0,o.jsxs)(o.Fragment,{children:[e,t]}),i[4]=t,i[5]=n):n=i[5],n}if(d){let e;return i[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(m.Bwn,{showText:!0}),i[6]=e):e=i[6],e}if(p){let e;return i[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(o6,{}),i[7]=e):e=i[7],e}if(!r.rootDiff){let e;return i[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(b.E.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,o.jsx)(m.kwM,{})}),i[8]=e):e=i[8],e}return i[9]!==r.rootDiff||i[10]!==c?(t=(0,o.jsx)(a.xu,{paddingY:1,children:(0,o.jsx)(m.EyJ,{diff:r.rootDiff,schemaType:c})}),i[9]=r.rootDiff,i[10]=c,i[11]=t):t=i[11],i[12]!==r||i[13]!==t?(n=(0,o.jsx)(u.H7.Provider,{value:r,children:t}),i[12]=r,i[13]=t,i[14]=n):n=i[14],n}function o6(){let e,t,n,i,l,r,d;let c=(0,s.c)(12),{t:u}=(0,m.$G7)("");return c[0]===Symbol.for("react.memo_cache_sentinel")?(e={opacity:1},t={opacity:0},n={delay:.2,duration:.2},c[0]=e,c[1]=t,c[2]=n):(e=c[0],t=c[1],n=c[2]),c[3]!==u?(i=u("changes.same-revision-selected-title"),c[3]=u,c[4]=i):i=c[4],c[5]!==i?(l=(0,o.jsx)(a.xv,{size:1,weight:"medium",as:"h3",children:i}),c[5]=i,c[6]=l):l=c[6],c[7]!==u?(r=(0,o.jsx)(a.xv,{as:"p",size:1,muted:!0,children:(0,o.jsx)(m.vNl,{i18nKey:"changes.same-revision-selected-description",t:u})}),c[7]=u,c[8]=r):r=c[8],c[9]!==l||c[10]!==r?(d=(0,o.jsx)(b.E.div,{animate:e,initial:t,transition:n,children:(0,o.jsxs)(a.Kq,{space:3,paddingTop:2,children:[l,r]})}),c[9]=l,c[10]=r,c[11]=d):d=c[11],d}function o7(e){return e.children}let o8=(0,x.zo)(m.l$t)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`;function o9({showList:e}){let[t,n]=(0,c.useState)(null),[i,l]=(0,c.useState)(0),{setTimelineRange:r}=nv(),s=(0,c.useCallback)(e=>{!i&&e&&(l(e.clientHeight?e.clientHeight-1:0),n(e))},[i]),{events:u,nextCursor:p,loading:h,error:f,revision:x,loadMoreEvents:g,findRangeForRevision:b,expandEvent:y}=(0,m.hIH)(),{t:v}=(0,m.$G7)("studio"),j=(0,d.pm)(),_=(0,c.useCallback)(e=>{try{if((0,m.Pm6)(e)||(0,m.E8O)(e)||(0,m.fWL)(e)||(0,m.rxG)(e)||(0,m.c$P)(e)){console.error("Event is not selectable");return}let[t,n]=b(e.id);r(t,n)}catch(e){j.push({closable:!0,description:e.message,status:"error",title:v("timeline.error.unable-to-load-revision")})}},[v,j,r,b]),w=h&&!u.length;return(0,o.jsx)(a.kC,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,o.jsx)(a.Zb,{flex:1,padding:2,paddingTop:0,children:f?(0,o.jsx)(lK,{}):(0,o.jsx)(a.NM,{element:t,children:(0,o.jsxs)(o8,{"data-ui":"Scroller",ref:s,children:[i&&e&&!w?(0,o.jsx)(oq,{events:u,fetchEventChildren:y,hasMoreEvents:!!p,selectedEventId:x?.revisionId||u[0]?.id,onLoadMore:g,onSelect:_,listMaxHeight:`${i}px`}):null,h&&(0,o.jsx)(m.Bwn,{})]})})})})}let se=(0,x.zo)(m.l$t)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`;function st({showList:e}){let{timelineError:t,setTimelineRange:n,timelineStore:i}=nv(),{selectedReleaseId:l}=(0,m.Wc0)(),[r,s]=(0,c.useState)(null),[u,p]=(0,c.useState)(0),h=(0,c.useCallback)(e=>{e?.clientHeight&&(p(e.clientHeight-1),s(e))},[]),f=(0,m.P08)(i,e=>e.chunks),x=(0,m.P08)(i,e=>e.realRevChunk),g=(0,m.P08)(i,e=>e.hasMoreChunks),b=(0,m.P08)(i,e=>e.isLoading),{t:y}=(0,m.$G7)("studio"),v=(0,d.pm)(),j=(0,c.useCallback)(e=>{try{let[t,l]=i?.findRangeForRev(e)||[null,null];n(t,l)}catch(e){v.push({closable:!0,description:e.message,status:"error",title:y("timeline.error.unable-to-load-revision")})}},[n,y,i,v]),_=(0,c.useCallback)(()=>{b||i?.loadMore()},[b,i]);return(0,o.jsx)(a.kC,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,o.jsx)(a.Zb,{flex:1,padding:2,paddingTop:0,children:t||l?(0,o.jsx)(lK,{versionError:!!l}):(0,o.jsx)(a.NM,{element:r,children:(0,o.jsx)(se,{"data-ui":"Scroller",ref:h,children:u&&e?(0,o.jsx)(lF,{chunks:f,hasMoreChunks:g,lastChunk:x,onLoadMore:_,onSelect:j,listMaxHeight:`${u}px`}):null})})})})}let sn=(0,x.zo)(a.kC)`
  opacity: 0;
  transition: opacity 200ms;
  &[data-ready] {
    opacity: 1;
  }
`,si=["history","review"],sl=e=>e&&si.includes(e),sr={error:p.uIy,warning:p.foC,info:p.hQ6},so={error:"critical",warning:"caution",info:"primary"};function ss(e){let t,n,i,l;let d=(0,s.c)(17),{marker:u,onOpen:p,schemaType:m,value:h}=e;d[0]!==u.path||d[1]!==p?(t=()=>p(u.path),d[0]=u.path,d[1]=p,d[2]=t):t=d[2];let f=t,[x,g]=(0,c.useState)(null),b=sr[u.level];return d[3]!==x?(n=x&&(0,o.jsx)(a.Zb,{padding:3,radius:2,tone:"critical",children:(0,o.jsx)(a.xv,{size:1,children:x.error.message})}),d[3]=x,d[4]=n):n=d[4],d[5]!==b||d[6]!==x||d[7]!==f||d[8]!==u.level||d[9]!==u.message||d[10]!==u.path||d[11]!==m||d[12]!==h?(i=!x&&(0,o.jsx)(a.Zb,{__unstable_focusRing:!0,as:"button",onClick:f,padding:3,radius:2,tone:so[u.level],children:(0,o.jsxs)(a.kC,{align:"flex-start",gap:3,children:[(0,o.jsx)(a.xu,{flex:"none",children:(0,o.jsx)(a.xv,{size:1,children:(0,o.jsx)(b,{})})}),(0,o.jsxs)(a.Kq,{flex:1,space:2,children:[(0,o.jsx)(sa,{path:u.path,schemaType:m,value:h}),(0,o.jsx)(a.xv,{muted:!0,size:1,children:u.message})]})]})}),d[5]=b,d[6]=x,d[7]=f,d[8]=u.level,d[9]=u.message,d[10]=u.path,d[11]=m,d[12]=h,d[13]=i):i=d[13],d[14]!==n||d[15]!==i?(l=(0,o.jsxs)(r.SV,{onCatch:g,children:[n,i]}),d[14]=n,d[15]=i,d[16]=l):l=d[16],l}function sa(e){let{path:t,schemaType:n,value:i}=e,l=(0,c.useMemo)(()=>{try{return function(e){let{path:t,schemaType:n,value:i}=e,l=[],r=n,o=i;for(let e of t){if("string"==typeof e){if(!(0,m.Uy$)(o)&&void 0!==o)throw Error(`Parent value is not an object, cannot get path segment: .${e}`);if("object"!==r.jsonType)throw Error(`Parent type is not an object schema type, cannot get path segment: .${e}`);o=o?.[e];let t=r.fields.find(t=>t.name===e);if(!t)return l.push({name:e}),l;r=t.type,l.push(r);continue}if("number"==typeof e){if(!(0,m.kJL)(o)&&void 0!==o)throw Error(`Parent value is not an array, cannot get path segment: [${e}]`);if("array"!==r.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: [${e}]`);o=o?.[e];let t=r.of.find(e=>"string"==typeof o?"string"===e.jsonType:"number"==typeof o?"number"===e.jsonType:"boolean"==typeof o?"boolean"===e.jsonType:!!(0,m.Uy$)(o)&&e.name===o?._type);if(!t)throw Error(`Item type not found: [${e}]`);r=t,l.push(r);continue}if((0,m.Uy$)(e)&&e._key){if(!(0,m.kJL)(o))throw Error(`Parent value is not an array, cannot get path segment: [_key == ${e}]`);if("array"!==r.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: .${e}`);if(o=(o??[]).find(t=>(0,m.Uy$)(t)&&t._key===e._key),!(0,m.Uy$)(o))throw Error(`Array item not found: [_key == ${e._key}]`);let t=r.of.find(e=>(0,m.Uy$)(o)&&e.name===o?._type);if(!t)throw Error(`Array item type not found: .${o?._type}`);r=t,l.push(r);continue}throw Error(`Invalid path segment: ${JSON.stringify(e)}`)}return l}({path:t,schemaType:n,value:i})}catch(e){console.error(e)}return null},[t,n,i]);return l?.length?(0,o.jsx)(a.xv,{size:1,children:l.map((e,t)=>(0,o.jsxs)(c.Fragment,{children:[t>0&&(0,o.jsx)("span",{style:{color:"var(--card-muted-fg-color)",opacity:.5},children:" / "}),(0,o.jsx)("span",{style:{fontWeight:500},children:e.title||e.name})]},t))}):null}let sd={},sc=j.BC.create("/",[j.BC.intents("/intent"),j.BC.create("/edit/:type/:editDocumentId",[j.BC.create({path:"/:params",transform:{params:{toState:function(e){try{return JSON.parse(decodeURIComponent(e))}catch{return console.warn("Failed to parse JSON parameters"),{}}},toPath:function(e){return JSON.stringify(e)}}}})]),j.BC.create({path:"/:panes",children:[j.BC.create("/:action",j.BC.create("/:legacyEditDocumentId"))],transform:{panes:{toState:function(e){var t;return -1!==(t=decodeURIComponent(e)).indexOf(",{")?function(e){let t=[],n=e;for(;n.length;){let[e,i,l]=n.match(su)||[];if(!e){n=n.slice(1);continue}let r=l&&function(e){try{return JSON.parse(e)}catch(e){console.warn(`Failed to parse parameters: ${e.message}`);return}}(l);t.push({id:i,payload:r}),n=n.slice(e.length)}return[t]}(t):t.split(";").map(e=>{let[t,...n]=e.split("|").map(e=>{let[t,...n]=e.split(",");return function(e,t){let n={...t,params:sd,payload:void 0};return e.reduce((e,t)=>{if(sp(t)){let n=t.slice(0,t.indexOf("=")),i=t.slice(n.length+1);e.params={...e.params,[decodeURIComponent(n)]:decodeURIComponent(i)}}else sm(t)?e.payload=function(e){try{return e?(0,j.ZB)(e):void 0}catch(e){console.warn(`Failed to parse parameters: ${e.message}`);return}}(t):console.warn("Unknown pane segment: %s - skipping",t);return e},n)}(n,{id:t})});return[t,...n.map(e=>({...t,...e,id:e.id||t.id,params:{..._(t.params,sh),...e.params},payload:e.payload||t.payload}))]}).filter(e=>e.length>0)},toPath:function(e){return(e||[]).map(e=>e.map(sx).join("|")).map(encodeURIComponent).join(";")}}}})]),su=/^([.a-z0-9_-]+),?({.*?})?(?:(;|$))/i,sp=e=>/^[a-z0-9]+=[^=]+/i.test(e),sm=e=>/^[A-Za-z0-9\-_]+(?:={0,2})$/.test(e),sh=["view","since","rev","inspect","comment"],sf=Boolean;function sx(e,t,n){let{payload:i,params:l={},id:r}=e,[o]=n,s=e===o,a=0!==t&&r===o.id,d=typeof i>"u"?void 0:(0,j.B8)(i),c=Object.entries(l).filter(e=>{let[t,n]=e;return!!n&&(!!s||!(n===o.params?.[t]&&!sh.includes(t)))}).map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`);return[a?"":r].concat([c.length>0&&c,d].filter(sf).flat()).join(",")||","}let sg=[ln,ll,i4,i6,i2,i7],sb=[oI],sy=[{name:"sanity/structure/validation",component:function(e){let t,n,i,l,r,d,c;let u=(0,s.c)(23),{onClose:p}=e,{onFocus:h,onPathOpen:f,schemaType:x,validation:g,value:b,editState:y}=nv(),{t:v}=(0,m.$G7)("validation");u[0]!==h||u[1]!==f?(t=e=>{f(e),h(e)},u[0]=h,u[1]=f,u[2]=t):t=u[2];let j=t;u[3]!==y?(n=y&&y.version&&(0,m.nOg)(y.version),u[3]=y,u[4]=n):n=u[4];let _=n;return u[5]!==v?(i=v("panel.close-button-aria-label"),u[5]=v,u[6]=i):i=u[6],u[7]!==v?(l=v("panel.title"),u[7]=v,u[8]=l):l=u[8],u[9]!==p||u[10]!==i||u[11]!==l?(r=(0,o.jsx)(nD,{as:"header",closeButtonLabel:i,flex:"none",onClose:p,title:l}),u[9]=p,u[10]=i,u[11]=l,u[12]=r):r=u[12],u[13]!==j||u[14]!==_||u[15]!==x||u[16]!==v||u[17]!==g||u[18]!==b?(d=(0,o.jsx)(a.Zb,{flex:1,overflow:"auto",padding:3,children:_?(0,o.jsx)(a.xu,{padding:2,children:(0,o.jsx)(a.xv,{muted:!0,size:1,children:v("panel.unpublish-message")})}):(0,o.jsxs)(o.Fragment,{children:[0===g.length&&(0,o.jsx)(a.xu,{padding:2,children:(0,o.jsx)(a.xv,{muted:!0,size:1,children:v("panel.no-errors-message")})}),g.length>0&&(0,o.jsx)(a.Kq,{space:2,children:g.map((e,t)=>(0,o.jsx)(ss,{marker:e,onOpen:j,schemaType:x,value:b},t))})]})}),u[13]=j,u[14]=_,u[15]=x,u[16]=v,u[17]=g,u[18]=b,u[19]=d):d=u[19],u[20]!==r||u[21]!==d?(c=(0,o.jsxs)(a.kC,{direction:"column",height:"fill",overflow:"hidden",children:[r,d]}),u[20]=r,u[21]=d,u[22]=c):c=u[22],c},useMenuItem:function(e){let{documentId:t,documentType:n}=e,{t:i}=(0,m.$G7)("validation"),{selectedReleaseId:l}=(0,m.Wc0)(),{validation:r}=(0,m.a3k)(t,n,l),{value:o}=nv(),s=(0,c.useMemo)(()=>r.map(e=>({level:e.level,message:e.message,path:e.path})),[r]),a=s.some(h.z1),d=s.some(h.AY),u=(0,m.nOg)(o),f=(0,c.useMemo)(()=>a?p.uIy:d?p.foC:p.nSX,[a,d]),x=(0,c.useMemo)(()=>a?"critical":d?"caution":"positive",[a,d]);return{hidden:0===s.length||u,icon:f,title:i("panel.title"),tone:x,showAsAction:!0}}},{name:nI,useMenuItem:()=>{let{features:e}=nC(),{t}=(0,m.$G7)();return{hidden:!e.reviewChanges,icon:p.vaD,title:t("changes.title")}},component:function(e){let t,n,i,u,h,f,x,g,b,y,v,j,_,w,k,C,S,z,E,I,$,P,A,T,R,M;let D=(0,s.c)(72),{params:L,setParams:N}=eF(),O=(0,m.Lky)(),[U,B]=(0,c.useState)(null),{t:V}=(0,m.$G7)(l.UA),G=L?.inspect===nI,{selectedPerspective:F}=(0,m.Wc0)();D[0]!==L?(t=sl(L?.changesInspectorTab)?L.changesInspectorTab:si[0],D[0]=L,D[1]=t):t=D[1];let K=t;D[2]!==L||D[3]!==N?(n=e=>N({...L,changesInspectorTab:e,since:"history"===e?void 0:L?.since}),D[2]=L,D[3]=N,D[4]=n):n=D[4];let W=n;D[5]!==F||D[6]!==V?(i=(0,m._wt)(F)?F.metadata.title:V("drafts"===F?"compare-versions.status.draft":"compare-versions.status.published"),D[5]=F,D[6]=V,D[7]=i):i=D[7];let X=i,H=G?"":void 0;D[8]!==V?(u=V("changes.tab.history"),D[8]=V,D[9]=u):u=D[9],D[10]!==W?(h=()=>W("history"),D[10]=W,D[11]=h):h=D[11];let q="history"===K;D[12]!==u||D[13]!==h||D[14]!==q?(f=(0,o.jsx)(r.OK,{"aria-controls":"history-panel",id:"history-tab",label:u,onClick:h,selected:q}),D[12]=u,D[13]=h,D[14]=q,D[15]=f):f=D[15],D[16]!==V?(x=V("changes.tab.review-changes"),D[16]=V,D[17]=x):x=D[17],D[18]!==W?(g=()=>W("review"),D[18]=W,D[19]=g):g=D[19];let Y="review"===K;D[20]!==Y||D[21]!==x||D[22]!==g?(b=(0,o.jsx)(r.OK,{"aria-controls":"review-changes-panel",id:"changes-tab",label:x,onClick:g,selected:Y}),D[20]=Y,D[21]=x,D[22]=g,D[23]=b):b=D[23],D[24]!==b||D[25]!==f?(y=(0,o.jsxs)(a.td,{space:1,flex:1,children:[f,b]}),D[24]=b,D[25]=f,D[26]=y):y=D[26],D[27]!==V?(v=V("changes.action.close-label"),D[27]=V,D[28]=v):v=D[28];let Z=e.onClose;D[29]!==V?(j=V("document-inspector.close-button.tooltip"),D[29]=V,D[30]=j):j=D[30],D[31]!==j?(_={content:j},D[31]=j,D[32]=_):_=D[32],D[33]!==e.onClose||D[34]!==v||D[35]!==_?(w=(0,o.jsx)(r.zx,{"aria-label":v,icon:p.Two,mode:"bleed",onClick:Z,tooltipProps:_}),D[33]=e.onClose,D[34]=v,D[35]=_,D[36]=w):w=D[36],D[37]!==y||D[38]!==w?(k=(0,o.jsx)(a.Zb,{paddingBottom:1,children:(0,o.jsxs)(a.kC,{align:"center",padding:3,gap:2,children:[y,w]})}),D[37]=y,D[38]=w,D[39]=k):k=D[39],D[40]!==V?(C=(0,o.jsx)(a.xu,{flex:1,padding:1,children:(0,o.jsx)(a.xv,{size:1,children:(0,o.jsx)(m.vNl,{t:V,i18nKey:"changes.banner.tooltip"})})}),D[40]=V,D[41]=C):C=D[41],D[42]===Symbol.for("react.memo_cache_sentinel")?(S=(0,o.jsx)(a.xv,{size:0,muted:!0,children:(0,o.jsx)(p.hQ6,{fontSize:1})}),D[42]=S):S=D[42],D[43]!==U||D[44]!==C?(z=(0,o.jsx)(r.u,{portal:!0,placement:"bottom-end",boundaryElement:U,content:C,children:S}),D[43]=U,D[44]=C,D[45]=z):z=D[45],D[46]!==X?(E={perspective:X},D[46]=X,D[47]=E):E=D[47],D[48]!==V||D[49]!==E?(I=(0,o.jsx)(a.xv,{size:0,muted:!0,children:(0,o.jsx)(m.vNl,{t:V,values:E,i18nKey:"changes.banner.description"})}),D[48]=V,D[49]=E,D[50]=I):I=D[50],D[51]!==z||D[52]!==I?($=(0,o.jsx)(a.Zb,{padding:2,marginBottom:3,marginX:3,tone:"neutral",border:!0,radius:3,children:(0,o.jsxs)(a.kC,{gap:2,align:"flex-start",children:[z,I]})}),D[51]=z,D[52]=I,D[53]=$):$=D[53];let J="history"!==K;D[54]!==K||D[55]!==O.beta?.eventsAPI?.documents?(P=O.beta?.eventsAPI?.documents?(0,o.jsx)(o9,{showList:"history"===K}):(0,o.jsx)(st,{showList:"history"===K}),D[54]=K,D[55]=O.beta?.eventsAPI?.documents,D[56]=P):P=D[56],D[57]!==J||D[58]!==P?(A=(0,o.jsx)(d.x4,{"aria-labelledby":"history-tab",height:"fill",hidden:J,id:"history-panel",children:P}),D[57]=J,D[58]=P,D[59]=A):A=D[59];let Q="review"!==K;return D[60]!==K||D[61]!==O.beta?.eventsAPI?.documents?(T=O.beta?.eventsAPI?.documents?(0,o.jsx)(o.Fragment,{children:"review"===K?(0,o.jsx)(o4,{showChanges:"review"===K}):null}):(0,o.jsx)(oM,{showChanges:"review"===K}),D[60]=K,D[61]=O.beta?.eventsAPI?.documents,D[62]=T):T=D[62],D[63]!==Q||D[64]!==T?(R=(0,o.jsx)(d.x4,{"aria-labelledby":"review-tab",hidden:Q,id:"review-panel",height:"fill",children:T}),D[63]=Q,D[64]=T,D[65]=R):R=D[65],D[66]!==k||D[67]!==$||D[68]!==A||D[69]!==H||D[70]!==R?(M=(0,o.jsxs)(sn,{direction:"column",padding:0,height:"fill","data-ready":H,ref:B,children:[k,$,A,R]}),D[66]=k,D[67]=$,D[68]=A,D[69]=H,D[70]=R,D[71]=M):M=D[71],M},onClose:({params:e})=>({params:{...e,since:void 0,rev:void 0,changesInspectorTab:void 0,historyVersion:void 0}}),onOpen:({params:e})=>({params:{...e,since:"@lastPublished"}})}],sv=(0,m.Cw0)(e=>{let t=e?.icon||p.kLv;return{name:"sanity/structure",document:{actions:e=>Array.from(new Set([...e,...sg])),badges:e=>Array.from(new Set([...e,...sb])),inspectors:e=>Array.from(new Set([...e,...sy]))},tools:[{name:e?.name||"structure",title:e?.title||"Structure",icon:t,component:(0,c.lazy)(()=>n.e(9845).then(n.bind(n,59845))),canHandleIntent:(e,t)=>{var n;return"create"===e?"type"in t&&(!("template"in t)||{template:!0}):"edit"===e&&"id"in(n=t)&&(!("mode"in n)||{mode:"structure"===n.mode})},getIntentState:oA,controlsDocumentTitle:!0,options:e,router:sc,__internalApplicationType:"sanity/structure"}],i18n:{bundles:[l.Pk]}}});var sj=Object.freeze({__proto__:null,default:rO}),s_=Object.freeze({__proto__:null,default:oE})}}]);